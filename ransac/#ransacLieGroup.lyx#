#LyX 2.3 created this file. For more info see http://www.lyx.org/
\lyxformat 544
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass IEEEtran
\begin_preamble
\usepackage{algorithm,algpseudocode,tabularx}
\usepackage{cite}
\newcommand{\multiline}[1]{%
  \begin{tabularx}{\dimexpr\linewidth-\ALG@thistlm}[t]{@{}X@{}}
    #1
  \end{tabularx}
}
\end_preamble
\use_default_options true
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding auto
\fontencoding global
\font_roman "default" "default"
\font_sans "default" "default"
\font_typewriter "default" "default"
\font_math "auto" "auto"
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\use_microtype false
\use_dash_ligatures true
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize 10
\spacing single
\use_hyperref false
\papersize default
\use_geometry true
\use_package amsmath 2
\use_package amssymb 2
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 1
\use_minted 0
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 1in
\topmargin 1in
\rightmargin 1in
\bottommargin 1in
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\is_math_indent 0
\math_numbering_side default
\quotes_style english
\dynamic_quotes 0
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Title
R-RANSAC with Lie Groups
\end_layout

\begin_layout Section
Introduction
\end_layout

\begin_layout Standard
Optimal algorithms for the multiple target tracking (MTT) problem are not
 feasible in real time due to their computational complexities; therefore,
 many suboptimal approaches have been developed which can be implemented
 in real time.
 Some of these common algorithms are the global nearest neighbor (GNN),
 the joint probabilistic data association filter (JPDAF), the multiple hypothesi
s tracking (MHT), and the probabilistic multi-hypothesis tracker (PHMT).
 Each of these algorithms have variants that trade optimality for computational
 feasibility.
 There are also many other MTT algorithms which we will not discussed here
 but we refer the reader to 
\begin_inset CommandInset citation
LatexCommand cite
key "Pulford2005"
literal "true"

\end_inset

 for a survey of the more common algorithms.
 We briefly present some of these common algorithms in order to compare
 and contrast them.
 (Add something about PHD filter)
\end_layout

\begin_layout Standard
The GNN is the simplest MTT method.
 It is a single-scan tracker that uses hard data association to assign measureme
nts to tracks based on distance without taking into account statistical
 information such as the innovation term 
\begin_inset CommandInset citation
LatexCommand cite
key "Bar-Shalom2011"
literal "true"

\end_inset

.
 The GNN filter is a computationally efficient algorithm, but its 
\begin_inset Quotes eld
\end_inset

greedy
\begin_inset Quotes erd
\end_inset

 data association causes track divergence and loss in clutter.
 This method requires an additional scheme to prune, initialize and merge
 tracks.
 
\end_layout

\begin_layout Standard
The JPDAF is an extension of the probabilistic data association filter (PDAF)
 to multiple target tracking.
 It is a single-scan tracker that uses a soft data association technique
 to weighs new measurements inside a track's validation region based upon
 the new measurement's joint data association probability 
\begin_inset CommandInset citation
LatexCommand cite
key "Bar-Shalom2009"
literal "true"

\end_inset

.
 The weights are used to update the tracks.
 Even though it is a single-scan tracker, calculating the joint probability
 of all possible data associations per scan makes it more computationally
 complex and demanding.
 In addition, this method requires an additional scheme to prune, initialize
 and merge tracks.
 
\end_layout

\begin_layout Standard
The MHT algorithm is a batch tracker that uses a hard data association technique.
 It is an optimal algorithm since it considers all possible measurement
 associations in order to create the hypotheses tree.
 There are two different versions of MHT: measurement-oriented (MO-MHT)
 
\begin_inset CommandInset citation
LatexCommand cite
key "Reid1979"
literal "true"

\end_inset

 and track-oriented (TO-MHT) 
\begin_inset CommandInset citation
LatexCommand cite
key "Kurien1990"
literal "true"

\end_inset

.
 While MHT is an optimal algorithm, it is not feasible unless appropriate
 techniques are used to limit the number of generated hypotheses: pruning,
 merging, sliding window, etc.
 When these techniques are used, the algorithm is suboptimal.
 Lastly, the algorithm is capable of initializing and pruning tracks.
 
\end_layout

\begin_layout Standard
The PHMT is a soft data association algorithm that relaxes the criteria
 that a track can only produce at most one measurement per time step.
 It does this by using a combination of the maximum likelihood and expectation
 maximization algorithm 
\begin_inset CommandInset citation
LatexCommand cite
key "Dempster1977"
literal "true"

\end_inset

 to maximize the posterior probability of the tracks given a batch of measuremen
ts or a windowed batch of measurements.
 In the original form, it didn't have a method of track initialization or
 pruning, but later variants used the Hugh transform or the MHT as a front
 end to initialize tracks 
\begin_inset CommandInset citation
LatexCommand cite
key "Crousey2009"
literal "true"

\end_inset

.
 The PHMT performance is similar to that of the PDAF which is a single-scan
 tracker 
\begin_inset CommandInset citation
LatexCommand cite
key "Bar-Shalom2011"
literal "true"

\end_inset

.
 A variant of the PHMT operates on a windowed batch of data, and can be
 used as a single-scan tracker.
 
\end_layout

\begin_layout Standard
Recursive random sample consensus (R-RANSAC) is a recently new MTT algorithm
 with a modular paradigm.
 Unlike the MTT algorithms previously discussed that rely on additional
 initialization scheme or a computationally extensive hypotheses tree to
 initialize tracks, R-RANSAC uses RANSAC over a windowed batch of data to
 initialize tracks.
 Once tracks are initialized, it uses any single-scan tracker (GNN, JPDAF,
 PDAF, PHMT, ect) to update the tracks.
 In addition, it manages the tracks by pruning and merging them.
 Another novelty of the algorithm is that the surveillance region doesn't
 need to be fixed, but can be moved provided that a transformation is available
 to transform measurements and tracks.
\end_layout

\begin_layout Standard
R-RANSAC was first designed to estimate the parameters of multiple static
 signals 
\begin_inset CommandInset citation
LatexCommand cite
key "Niedfeldt2013"
literal "true"

\end_inset

, but it was quickly extended to track multiple dynamic targets 
\begin_inset CommandInset citation
LatexCommand cite
key "Niedfeldt"
literal "true"

\end_inset

.
 Since then, R-RANSAC has been improved, modified and changed in various
 literature 
\begin_inset CommandInset citation
LatexCommand cite
key "Niedfeldt2014b,Niedfeldt2014,Niedfeldt2016,Ingersoll2015,Ingersoll2015a,Defranco2015,Lusk2018,Niedfeldt2017,Wikle2017,Millard2017,Yang2017,Yang2018"
literal "true"

\end_inset

.
 All of these improvements seemed to have stemmed from 
\begin_inset CommandInset citation
LatexCommand cite
key "Niedfeldt"
literal "true"

\end_inset

, which resulted in many different versions of R-RANSAC.
 This paper aims at aggregating the best contributions while adding some
 of our own improvements.
 Our specific contributions include removing the constraint that measurements
 come at a fixed time interval, improving the criteria for a good track
 using a probabilistic frame work, allowing the measurement and process
 noise covariance to change at every time step, extending the theory of
 R-RANSAC to any Lie group, modifying the model merging method and give
 several example implementation.
\end_layout

\begin_layout Standard
The rest of the paper is outlined as follows.
 In section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Lie-Theory-Review"

\end_inset

 we give a brief review of Lie theory to establish important notation, in
 section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Problem-Description"

\end_inset

 we present a more detailed description of the problem with assumptions,
 in section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Modular-Paradigm"

\end_inset

 we present the modular paradigm.
 Sections 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Lie-Group-Probability"

\end_inset

- 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:LMLE-Simplification"

\end_inset

 go into more detail on specific parts of R-RANSAC, and in section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Examples"

\end_inset

 we present examples.
\end_layout

\begin_layout Standard
\begin_inset Separator parbreak
\end_inset


\end_layout

\begin_layout Section
Lie Theory Review
\begin_inset CommandInset label
LatexCommand label
name "sec:Lie-Theory-Review"

\end_inset


\end_layout

\begin_layout Standard
The objective of this section is to provide a review of the pertinent concepts
 of Lie theory to establish notation.
 We assume that the reader is familiar with Lie group and Lie algebra theory.
 For those unfamiliar with this material, we refer the interested reader
 primarily to 
\begin_inset CommandInset citation
LatexCommand cite
key "Sola2018"
literal "true"

\end_inset

.
 Solá offers a very gentle introduction to Lie theory that covers the majority
 of information needed to understand this paper.
 We also follow much of the notation prescribed by Solá and Hertzberg in
 
\begin_inset CommandInset citation
LatexCommand cite
key "Sola2018"
literal "true"

\end_inset

 and 
\begin_inset CommandInset citation
LatexCommand cite
key "Hertzberg2013"
literal "true"

\end_inset

.
 For those who are interested in a more rigorous treatment of Lie theory,
 we refer the reader to 
\begin_inset CommandInset citation
LatexCommand cite
key "Barfoot2019,Stillwell2008,Hall2003,Bullo2005a,Lee2013,Abraham1998"
literal "true"

\end_inset

.
 In this document we will focus on targets with a discrete system model
 and constant velocity, this is merely to simplify the presentation of the
 material.
 With no loss in generality, everything we present can be extended to targets
 with a continuous system model and constant acceleration by using a semidirect
 product group formed from a Lie group and its Lie algebra.
 A good discussion of the semidirect product group can be found in 
\begin_inset CommandInset citation
LatexCommand cite
key "Engo2003"
literal "true"

\end_inset

.
 If using a continuous system that requires numerical integration on the
 manifold, we refer the reader to 
\begin_inset CommandInset citation
LatexCommand cite
key "Munthe-Kaas1995,Munthe-Kaas1998,Munthe-Kaas1999"
literal "true"

\end_inset

 which describe the Runge-Kutta-Muthe-Kass numerical integration technique.
 
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $G$
\end_inset

 denote a Lie group and 
\begin_inset Formula $\mathfrak{g}$
\end_inset

 denote it's corresponding Lie algebra.
 The exponential function is a surjection that maps an element of the Lie
 algebra to an element of the Lie group, and the logarithmic map is the
 inverse of the exponential map.
 We denote these maps as
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{subequations}
\end_layout

\end_inset

 
\begin_inset Formula 
\begin{align*}
\exp:\mathfrak{g} & \to G\\
\log:G & \to\mathfrak{g}.
\end{align*}

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{subequations}
\end_layout

\end_inset

 The definition of these maps is dependent on the Lie group.
 For matrix Lie groups, the exponential and logarithm maps are defined as
 the matrix exponential and matrix logarithm.
 
\end_layout

\begin_layout Standard
The Lie algebra is isomorphic to the Euclidean space 
\begin_inset Formula $\mathbb{R}^{n}$
\end_inset

 where 
\begin_inset Formula $n$
\end_inset

 is the dimension of the Lie algebra.
 We will denote this Euclidean space as 
\begin_inset Formula $E$
\end_inset

.
 The Wedge function maps an element from the Euclidean space to the Lie
 algebra, and the Vee function is the inverse function which we denote as
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{subequations}
\end_layout

\end_inset

 
\begin_inset Formula 
\begin{align*}
\cdot^{\wedge}:E\to\mathfrak{g} & \quad\left(v\right)\mapsto v^{\wedge}\\
\cdot^{\vee}:\mathfrak{g}\to E & \quad\left(v^{\wedge}\right)^{\vee}\mapsto v.
\end{align*}

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{subequations}
\end_layout

\end_inset

The definitions of these maps are dependent on the Lie algebra.
 We will rely on context to distinguish between elements of 
\begin_inset Formula $E$
\end_inset

 and 
\begin_inset Formula $\mathfrak{g}$
\end_inset

.
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $\text{Exp}:E\to G$
\end_inset

 and its inverse be defined as the composite function 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{subequations}
\end_layout

\end_inset


\begin_inset Formula 
\begin{align*}
\text{Exp}\left(v\right) & =\exp\left(v^{\wedge}\right)\\
\text{Log}\left(g\right) & =\log\left(g\right)^{\vee}.
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{subequations}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Other functions of importance are the box-plus/minus and the o-plus/minus
 defined as 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{subequations}
\end_layout

\end_inset

 
\begin_inset Formula 
\begin{align*}
\boxplus:G\times\mathfrak{g}\to G & \quad\left(g,u\right)\mapsto g\bullet\exp\left(u\right)\\
\boxminus:G\times G\to\mathfrak{g} & \quad\left(g_{1},g_{2}\right)\mapsto\log\left(g_{2}^{-1}\bullet g_{1}\right)\\
\oplus:G\times E\to G & \quad\left(g,v\right)\mapsto g\bullet\text{Exp}\left(v\right)\\
\ominus:G\times G\to E & \quad\left(g_{1},g_{2}\right)\mapsto\text{Log}\left(g_{2}^{-1}\bullet g\right).
\end{align*}

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{subequations}
\end_layout

\end_inset

 where 
\begin_inset Formula $\bullet$
\end_inset

 denotes the group operator which we will omit in the future, and 
\begin_inset Formula $g_{2}^{-1}$
\end_inset

 is the inverse element of 
\begin_inset Formula $g_{2}$
\end_inset

.
 We have based the definition of these function on left trivializations
 (using vector fields that are left invariant) since we will present the
 material using the left trivialization.
 Note that we could easily use the right trivialization as well.
\end_layout

\begin_layout Standard
The adjoint of 
\begin_inset Formula $G$
\end_inset

 is a representation of 
\begin_inset Formula $G$
\end_inset

 that acts on 
\begin_inset Formula $\mathfrak{g}$
\end_inset

, and is denoted and generically defined as 
\begin_inset Formula 
\begin{align*}
Ad_{g}:\mathfrak{g} & \to\mathfrak{g};\quad\left(u\right)\mapsto gug^{-1}
\end{align*}

\end_inset

where 
\begin_inset Formula $g\in G$
\end_inset

.
 Since the adjoint is a linear function, we can find a matrix version that
 operates on the associated Euclidean space generically defined as 
\begin_inset Formula 
\[
\mathbf{Ad}_{g}:E\to E;\quad\left(v\right)\mapsto\mathbf{Ad}_{g}v
\]

\end_inset

where 
\begin_inset Formula $\mathbf{Ad}_{g}$
\end_inset

 is the matrix adjoint representation of 
\begin_inset Formula $G$
\end_inset

.
 
\end_layout

\begin_layout Standard
The adjoint of 
\begin_inset Formula $\mathfrak{g}$
\end_inset

 is a representation of 
\begin_inset Formula $\mathfrak{g}$
\end_inset

 that acts on 
\begin_inset Formula $\mathfrak{g}$
\end_inset

.
 It is also the Lie bracket 
\begin_inset Formula $\left[\cdot,\cdot\right]$
\end_inset

 which we will generically define as 
\begin_inset Formula 
\[
ad_{u}:\mathfrak{g}\to\mathfrak{g};\quad\left(v\right)\mapsto\left[u,v\right]
\]

\end_inset

where 
\begin_inset Formula $u\in\mathfrak{g}$
\end_inset

.
 Since the adjoint is a linear function, we can find a matrix version that
 operates on the associated Euclidean space generically defined as 
\begin_inset Formula 
\[
\mathbf{ad}_{u}:E\to E\quad\left(v\right)\mapsto\mathbf{ad}_{u}v
\]

\end_inset

where 
\begin_inset Formula $u\in\mathfrak{g}$
\end_inset

 and 
\begin_inset Formula $\mathbf{ad}_{u}$
\end_inset

 is the matrix adjoint representation of 
\begin_inset Formula $\mathfrak{g}$
\end_inset

.
 
\end_layout

\begin_layout Standard
As stated in 
\begin_inset CommandInset citation
LatexCommand cite
key "Iserles2000a"
literal "true"

\end_inset

, we can define the differential of the exponential mapping as the 'left
 trivialized' tangent of the exponential map or as the 'right trivialized'
 tangent of the exponential map.
 These differentials are also commonly called the right and left Jacobians.
 The right and left Jacobians 
\begin_inset Formula $J_{r},J_{l}:E\to GL\left(E\right)$
\end_inset

 are defined as
\begin_inset Formula 
\begin{align*}
J_{r}\left(v\right) & =\frac{^{r}\partial\text{Exp}\left(v\right)}{\partial v} &  & J_{l}\left(v\right)=\frac{^{l}\partial\text{Exp}\left(v\right)}{\partial v}.
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
Their inverses are defined as 
\begin_inset Formula 
\begin{align*}
J_{r}^{-1}\left(v\right) & =\frac{^{r}\partial\text{Log}\left(v\right)}{\partial v} &  & J_{l}^{-1}\left(v\right)=\frac{^{l}\partial\text{Log}\left(v\right)}{\partial v}.
\end{align*}

\end_inset

The right Jacobian has the property that for small 
\begin_inset Formula $\delta v\in E$
\end_inset

 and 
\begin_inset Formula $v\in E$
\end_inset

 
\begin_inset Formula 
\begin{align*}
\text{Exp}\left(\delta v+u\right) & \approx\text{Exp}\left(v\right)\text{Exp}\left(J_{r}\left(v\right)\delta v\right)\\
\text{Exp}\left(v\right)\text{Exp}\left(\delta v\right) & \approx\text{Exp}\left(v+J_{r}^{-1}\left(v\right)\delta v\right)\\
\text{Log}\left(\text{Exp}\left(v\right)\text{Exp}\left(\delta v\right)\right) & \approx v+J_{r}^{-1}\left(v\right)\delta v.
\end{align*}

\end_inset

The left Jacobian has the similar property that for small 
\begin_inset Formula $\delta v\in E$
\end_inset

 and 
\begin_inset Formula $v\in E$
\end_inset

 
\begin_inset Formula 
\begin{align*}
\text{Exp}\left(v+\delta v\right) & \approx\text{Exp}\left(J_{l}\left(v\right)\delta v\right)\text{Exp}\left(v\right)\\
\text{Exp}\left(\delta v\right)\text{Exp}\left(v\right) & \approx\text{Exp}\left(v+J_{l}^{-1}\left(v\right)\delta v\right)\\
\text{Log}\left(\text{Exp}\left(\delta v\right)\text{Exp}\left(v\right)\right) & \approx v+J_{l}^{-1}\left(v\right)\delta v.
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
The derivation of the left and right Jacobians stems from the Baker-Campbell-Hau
sdorff formula and can be studied in 
\begin_inset CommandInset citation
LatexCommand cite
key "Hall2003"
literal "true"

\end_inset

 and 
\begin_inset CommandInset citation
LatexCommand cite
key "Barfoot2019"
literal "true"

\end_inset

.
 
\end_layout

\begin_layout Standard
An infinitesimal generator corresponding to 
\begin_inset Formula $u\in\mathfrak{g}$
\end_inset

 is a smooth vector field on 
\begin_inset Formula $G$
\end_inset

 defined as 
\begin_inset Formula 
\[
\xi_{u}\left(g\right)=\left.\frac{d}{dt}\right|_{t=0}g\boxplus\left(tu\right)
\]

\end_inset


\end_layout

\begin_layout Standard
This is a very simplified definition that serves our purpose in deriving
 the discrete system model.
 For a more formal and encompassing definition of an infinitesimal generator,
 we refer the reader to the authors already mentioned.
 
\end_layout

\begin_layout Section
Problem Description 
\begin_inset CommandInset label
LatexCommand label
name "sec:Problem-Description"

\end_inset


\end_layout

\begin_layout Standard
The objective is to track multiple dynamic targets by estimating their states
 given a set of measurements from multiple sensors without prior information
 about the number of targets.
 
\end_layout

\begin_layout Standard
The following notation is used throughout.
 We denote the current time using a subscript 
\begin_inset Formula $k$
\end_inset

, the next previous time using a subscript 
\begin_inset Formula $k^{-}$
\end_inset

, and an arbitrary previous time using the subscript 
\begin_inset Formula $m$
\end_inset

 such that 
\begin_inset Formula $m\leq k$
\end_inset

.
 We use 
\begin_inset Formula $\delta_{k}$
\end_inset

 to denote the time elapsed from 
\begin_inset Formula $k^{-}$
\end_inset

 to 
\begin_inset Formula $k$
\end_inset

, and 
\begin_inset Formula $\delta_{m:k}$
\end_inset

 to denote the time elapsed from 
\begin_inset Formula $m$
\end_inset

 to 
\begin_inset Formula $k$
\end_inset

 such that 
\begin_inset Formula $\delta_{m:k},\delta_{k^{-}}\geq0$
\end_inset

 and 
\begin_inset Formula $\delta_{k:m}=-\delta_{m:k}$
\end_inset

.
 Lastly, a subscript of 
\begin_inset Formula $0$
\end_inset

 is used to denote the the time at the beginning of the time window, e.g,
 
\begin_inset Formula $\delta_{0:k}=\delta_{k-T_{W}:k}$
\end_inset

.
 
\end_layout

\begin_layout Standard
Let the state of the system at time 
\begin_inset Formula $k$
\end_inset

 be given by 
\begin_inset Formula $x_{k}=\left(g_{k},u_{k}\right)\in G\times E$
\end_inset

 where 
\begin_inset Formula $g_{k}\in G$
\end_inset

 and 
\begin_inset Formula $u_{k}\in E$
\end_inset

.
 We assume the state transition model to be continuous, near constant velocity,
 and time invariant which we define as
\begin_inset Formula 
\begin{align*}
\dot{g}_{k} & =\xi_{u_{k}}\left(g_{k}\right)\\
\dot{u}_{k} & =w_{k}^{u},
\end{align*}

\end_inset

where 
\begin_inset Formula $\xi_{u_{k}}\left(g_{k}\right)$
\end_inset

 is an infinitesimal generator constructed from 
\begin_inset Formula $u_{k}$
\end_inset

, 
\begin_inset Formula $w_{k}=\begin{bmatrix}w_{k}^{g}\\
w_{k}^{u}
\end{bmatrix}$
\end_inset

 is process noise sampled from a zero-mean, white-noise, Gaussian distribution
 with covariance 
\begin_inset Formula $Q$
\end_inset

.
 Under the assumption that 
\begin_inset Formula $w_{k}$
\end_inset

 stays constant over a time period 
\begin_inset Formula $\delta_{k}$
\end_inset

 we can discretize the model to get 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{subequations}
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "eq:system-model"

\end_inset


\begin_inset Formula 
\begin{align}
g_{k} & =g_{k^{-}}\oplus\left(\delta_{k}u_{k^{-}}+\delta_{k}w_{k}^{g}+\frac{\delta_{k}^{2}}{2}w_{k}^{u}\right)\\
u_{k} & =u_{k^{-}}+\delta_{k}w_{k}^{u}.
\end{align}

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{subequations}
\end_layout

\end_inset

 This form is similar to the one found in 
\begin_inset CommandInset citation
LatexCommand cite
key "Sjoberg2019"
literal "true"

\end_inset

 and is an exact solution provided that the Lie group is commutative.
 If the Lie group is not commutative, the exact solution is cumbersome if
 not impossible to derive, in which case we use the system model as an approxima
te numerical solution.
\end_layout

\begin_layout Standard
The complete discrete system is defined as
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{subequations}
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "eq:system"

\end_inset

 
\begin_inset Formula 
\begin{align}
x_{k} & =f\left(x_{k^{-}},w_{k},\delta_{k}\right)\\
y_{k} & =h\left(x_{k},v_{k}\right),
\end{align}

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{subequations}
\end_layout

\end_inset

 where 
\begin_inset Formula $f$
\end_inset

 is the state transition model defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:system-model"

\end_inset

, 
\begin_inset Formula $y_{k}\in N$
\end_inset

 is a measurement and 
\begin_inset Formula $N$
\end_inset

 is a Lie group, 
\begin_inset Formula $h:G\to N$
\end_inset

 is the observation model, and 
\begin_inset Formula $v_{k}$
\end_inset

 is measurement noise sampled from a zero-mean, white-noise, Gaussian distributi
on with covariance 
\begin_inset Formula $R$
\end_inset

.
\end_layout

\begin_layout Standard
The state 
\begin_inset Formula $x$
\end_inset

 is a Lie group generated from the Cartesian product of 
\begin_inset Formula $G$
\end_inset

 and 
\begin_inset Formula $E$
\end_inset

.
 The Lie algebra of 
\begin_inset Formula $G\times E$
\end_inset

 is simply 
\begin_inset Formula $\mathfrak{g}\times E$
\end_inset

 which is isomorphic to 
\begin_inset Formula $\mathbb{R}^{2n}$
\end_inset

 with 
\begin_inset Formula $n$
\end_inset

 being the dimension of 
\begin_inset Formula $G$
\end_inset

.
 We will denote this space as 
\begin_inset Formula $E^{*}$
\end_inset

.
 All of the operations previously defined are simply inherited.
 For example, let 
\begin_inset Formula $x\in G\times\mathfrak{g}$
\end_inset

 and 
\begin_inset Formula $v=\left(a,b\right)^{\vee}\in E^{*}$
\end_inset

, then 
\begin_inset Formula 
\begin{align*}
x\oplus v & =\left(g,u\right)\oplus v\\
 & =\left(g,u\right)\boxplus\left(a,b\right)\\
 & =\left(g\exp\left(a\right),u+b\right),
\end{align*}

\end_inset

where 
\begin_inset Formula $g\in G$
\end_inset

, 
\begin_inset Formula $a\in\mathfrak{g}$
\end_inset

, and 
\begin_inset Formula $u,b\in E$
\end_inset

.
\end_layout

\begin_layout Standard
Targets are observed via sensors.
 Each sensor perceives a subset of the measurement space called a local
 surveillance region (LSR) which has a local frame that the data is expressed
 in and a volume denoted 
\begin_inset Formula $S_{vol}$
\end_inset

.
 The union of all LSRs is called the global surveillance region (GSR).
 Measurements are extracted from the data using algorithms.
 We call the unique sensor and algorithm pair a measurement source or source
 for short.
 In the case that multiple sources have the same sensor, it is possible
 for duplication of information which, when incorporated into a state estimate
 of a target, would lead to overconfidence of the state estimate.
 We do not have a way to account for this except to assume it is minimal.
\end_layout

\begin_layout Standard
A sensor scan occurs when a source produces new measurements.
 Measurements from a source can be either false or true measurements.
 We assume that false measurements are uniformly distributed in the LSR,
 and that the number of false measurements from a source per sensor scan
 can be modeled using a Poisson distribution with parameter 
\begin_inset Formula $\Lambda$
\end_inset

 being the expected value.
 The expected number of false measurements per unit volume is called the
 spacial density and is 
\begin_inset Formula $\lambda=\frac{\Lambda}{S_{vol}}$
\end_inset

.
 We also assume that a measurement source provides at most one true measurement
 per target every sensor scan with probability 
\begin_inset Formula $P_{D}$
\end_inset

, i.e.
 the probability of detection.
 
\end_layout

\begin_layout Standard
R-RANSAC works in a single frame requiring all of the measurements to be
 transformed and expressed in a single global frame before being given to
 R-RANSAC.
 In the case that the global frame changes, a transformation 
\begin_inset Formula $T$
\end_inset

 must be provided to R-RANSAC that contains the information necessary to
 transform all the past measurements and models stored in R-RANSAC into
 the new global frame.
 
\end_layout

\begin_layout Standard
R-RANSAC uses the new measurements along with all the previous measurements
 from the time window 
\begin_inset Formula $T_{W}$
\end_inset

 to track targets.
 As time progresses, old measurements fall outside the time window and are
 removed.
 These measurements are called expired measurements.
 Below is a summary of our assumptions.
\end_layout

\begin_layout Enumerate
We assume that the system is observable.
\end_layout

\begin_layout Enumerate
We assume that the process and measurement noises are represented by a white-noi
se, zero-mean, Gaussian distribution and that their covariances are known.
\end_layout

\begin_layout Enumerate
We assume that all measurements are independent.
\end_layout

\begin_layout Enumerate
We assume that the expected number of false measurements from each measurement
 source per sensor scan is modeled using a Poisson distribution with spatial
 parameter 
\begin_inset Formula $\lambda$
\end_inset

, and that the false measurements are uniformly distributed in the LSR.
\end_layout

\begin_layout Enumerate
We assume that every measurement given to R-RANSAC is expressed in the current
 global frame.
 
\end_layout

\begin_layout Enumerate
If the global frame moves, a transformation is provided to R-RANSAC in order
 to transform the measurements and models to the current global frame.
\end_layout

\begin_layout Section
Modular Paradigm
\begin_inset CommandInset label
LatexCommand label
name "sec:Modular-Paradigm"

\end_inset


\end_layout

\begin_layout Standard
The paradigm for R-RANSAC is designed to be very modular.
 In this section we will present the data structures used and modular framework.
 R-RANSAC can be broken down into three main parts: data management, track
 initialization, and track management.
\end_layout

\begin_layout Subsection
Data Structures
\end_layout

\begin_layout Standard
In R-RANSAC, we use three different data structures: the data tree, clusters,
 and consensus sets.
 The structure of the data tree and clusters is a list of R*-Trees 
\begin_inset CommandInset citation
LatexCommand cite
key "Daszykowski2009"
literal "true"

\end_inset

.
 Each R*-Tree contains measurements obtained at a unique time.
 This allows us to easily remove and add measurements that have the same
 time stamp while being able to search the data structures quickly.
 The data tree contains all of the measurements within the time window that
 are not in a cluster or a consensus set.
 A cluster, 
\begin_inset Formula $\mathcal{C}$
\end_inset

, contains neighboring measurements as described in 
\begin_inset CommandInset citation
LatexCommand cite
key "Yang2017"
literal "true"

\end_inset

.
 Let 
\begin_inset Formula $d_{C}:N\times N\to\mathbb{R}$
\end_inset

 be a metric 
\begin_inset CommandInset citation
LatexCommand cite
key "Moon2000"
literal "true"

\end_inset

 on the measurement space.
 A measurement 
\begin_inset Formula $y_{j}$
\end_inset

 is a neighboring measurement of 
\begin_inset Formula $y_{k}$
\end_inset

 if 
\begin_inset Formula $d_{C}\left(y_{j},y_{k}\right)<\tau_{CD}$
\end_inset

 with 
\begin_inset Formula $\tau_{CD}$
\end_inset

 being a user defined parameter.
 A consensus set, 
\begin_inset Formula $\mathcal{CS}^{i}$
\end_inset

, is a list that contains all of the measurements within the time window
 that were associated with the 
\begin_inset Formula $i^{th}$
\end_inset

 track.
 A track, 
\begin_inset Formula $\mathcal{T}$
\end_inset

, is a model of a target consisting of the state estimate 
\begin_inset Formula $\hat{x}$
\end_inset

; error covariance 
\begin_inset Formula $P$
\end_inset

; consensus set 
\begin_inset Formula $\mathcal{CS}$
\end_inset

; track likelihood, 
\begin_inset Formula $TL$
\end_inset

; and label, 
\begin_inset Formula $L$
\end_inset

 , i.e.
 the tuple 
\begin_inset Formula $\mathcal{T}=\left(\hat{x},P,\mathcal{CS},TL,L\right)$
\end_inset

.
 The track likelihood is a measurement of how 
\begin_inset Quotes eld
\end_inset

good
\begin_inset Quotes erd
\end_inset

 a track is.
 Previously, this was based on the inlier ratio and track lifetime, see
\begin_inset CommandInset citation
LatexCommand cite
key "Niedfeldt2017"
literal "true"

\end_inset

; however, we will present a more probabilistic approach in section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Track-Likelihood"

\end_inset

.
\end_layout

\begin_layout Subsection
Data Management
\end_layout

\begin_layout Standard
Data management occurs after a sensor scan provides new measurements 
\begin_inset Formula $\Psi_{k}$
\end_inset

 and a new transformation 
\begin_inset Formula $T$
\end_inset

.
 First, expired measurements are removed from the data structures and models
 are propagated forward in time.
 If a transformation was provided, all of the measurements (not including
 the new measurements since they should already be expressed in the current
 global frame) and tracks are transformed to the current global frame, i.e.
 their state estimate and error covariance are transformed to the current
 global frame.
 
\end_layout

\begin_layout Standard
The new measurements are checked to see if they should be associated to
 a track and used to update the track's state estimate and likelihood.
 The data association and track update could be implemented using any single
 scan tracker.
 Our data association method is described in subsection 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Data-Association"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 Unassociated new measurements are then checked to see if they belong to
 an existing cluster using the metric 
\begin_inset Formula $d_{C}$
\end_inset

.
 Those that don't belong to a cluster are then used to seed possible new
 clusters.
\end_layout

\begin_layout Standard
New clusters are created by taking an unassociated new measurement and finding
 neighboring measurements from either the list of unassociated new measurements
 or the data tree.
 For every measurement added to the cluster, the process is repeated by
 finding neighboring measurements to the measurement just added to the cluster.
\end_layout

\begin_layout Standard
If the possible cluster has at least 
\begin_inset Formula $\tau_{CM}$
\end_inset

 measurements, then the cluster is kept, and the associated measurements
 are removed from the data tree.
 The remaining unassociated measurements are placed on the data tree creating
 a new element in the list.
\end_layout

\begin_layout Subsection
Track Initialization and Track Management
\end_layout

\begin_layout Standard
Track initialization and track management occurs at times specified by the
 user.
 The track initialization phase performs RANSAC, see section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:RANSAC"

\end_inset

, on each cluster to try to generate new tracks.
 If RANSAC generates a new track, the new track's state estimate 
\begin_inset Formula $\hat{x}$
\end_inset

 is filtered and the track's likelihood is initialized using the measurements
 in the consensus set.
 The measurements in the consensus set are removed from the respective cluster.
 Since measurements are taken from a cluster in order to create a new track,
 we must verify that the remaining measurements in the cluster still form
 a valid cluster, i.e.
 the cluster has at least 
\begin_inset Formula $\tau_{CM}$
\end_inset

 measurements.
 If it does, the cluster is kept.
 If it doesn't, then we check the time stamp of the measurements.
 If the measurements are old (i.e.
 near being expired), then we remove them; otherwise, we place them back
 on the data tree.
 
\end_layout

\begin_layout Standard
The last phase of R-RANSAC is track management which consists of merging
 and pruning tracks, promoting and demoting tracks, and assigning new good
 tracks a unique label.
 Some tracks will begin to coalesce as they are propagated and updated.
 If these tracks are deemed similar, they are merged together using the
 track-to-track fusion method discussed in section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Track-to-Track-fusion"

\end_inset

.
 Since R-RANSAC stores up to 
\begin_inset Formula $M$
\end_inset

 Tracks, if there are more than 
\begin_inset Formula $M$
\end_inset

 tracks we remove the tracks with the lowest likelihood.
 If a track's likelihood is above the threshold 
\begin_inset Formula $\tau_{\rho}$
\end_inset

 then it is promoted to a good track; otherwise, it is a poor track.
 Good tracks receive a unique numerical label to identify it , 
\begin_inset CommandInset citation
LatexCommand cite
key "Ingersoll2015a"
literal "true"

\end_inset

.
 At the end of these phases, a list of good tracks is published to the user.
 For a summary, see algorithm 
\begin_inset CommandInset ref
LatexCommand ref
reference "alg:rransac"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{algorithmic}[1]
\end_layout

\begin_layout Plain Layout


\backslash
Require{Parameters $M$, $T_W$, $
\backslash
ell$, $
\backslash
tau_E$, $
\backslash
tau_I$, $
\backslash
tau_{CD}$, $
\backslash
tau_{CM}$, $
\backslash
tau_S$, $
\backslash
tau_{
\backslash
rho}$, $
\backslash
tau_{
\backslash
alpha}$, $P_D$ and $
\backslash
lambda$.}
\end_layout

\begin_layout Plain Layout


\backslash
For{each sensor scan}
\end_layout

\begin_layout Plain Layout


\backslash
State{Remove expired measurements}
\end_layout

\begin_layout Plain Layout


\backslash
State{Propagate tracks}
\end_layout

\begin_layout Plain Layout

	
\backslash
If{Transform $T$ provided}
\end_layout

\begin_layout Plain Layout

	
\backslash
State{Transform measurements and tracks}
\end_layout

\begin_layout Plain Layout

	
\backslash
EndIf
\end_layout

\begin_layout Plain Layout


\backslash
State{Associate new measurements to tracks}
\end_layout

\begin_layout Plain Layout


\backslash
State
\backslash
multiline{Update track's state estimate and likelihood using associated
 measurements}
\end_layout

\begin_layout Plain Layout


\backslash
State
\backslash
multiline{Associate unassociated measurements to clusters using metric $d_C$}
\end_layout

\begin_layout Plain Layout

	
\backslash
For{ $y
\backslash
in 
\backslash
{
\backslash
text{ unassociated measurements}
\backslash
}$ }
\end_layout

\begin_layout Plain Layout

	
\backslash
State
\backslash
multiline{Try generating possible new clusters $C^p$ from $y$ using unassociated
 measurements and data tree}
\end_layout

\begin_layout Plain Layout

		
\backslash
If{$
\backslash
mid C^p 
\backslash
mid 
\backslash
geq 
\backslash
tau_{CM}$}
\end_layout

\begin_layout Plain Layout

		
\backslash
State{Let $C^p$ be a new cluster}
\end_layout

\begin_layout Plain Layout

		
\backslash
State
\backslash
multiline{Remove measurements in $C^p$ from data tree}
\end_layout

\begin_layout Plain Layout

		
\backslash
EndIf
\end_layout

\begin_layout Plain Layout

	
\backslash
EndFor
\end_layout

\begin_layout Plain Layout


\backslash
State{Add remaining measurements to data tree}
\end_layout

\begin_layout Plain Layout

	
\backslash
If{specified by user}
\end_layout

\begin_layout Plain Layout

		
\backslash
State
\backslash
multiline{Perform RANSAC on each cluster}
\end_layout

\begin_layout Plain Layout

		
\backslash
State{Manage clusters}
\end_layout

\begin_layout Plain Layout

		
\backslash
State{Merge and prune tracks}
\end_layout

\begin_layout Plain Layout

		
\backslash
State{Promote and demote tracks}
\end_layout

\begin_layout Plain Layout

		
\backslash
State{Assign new good tracks a unique ID}
\end_layout

\begin_layout Plain Layout

		
\backslash
State{Publish good tracks}
\end_layout

\begin_layout Plain Layout

	
\backslash
EndIf
\end_layout

\begin_layout Plain Layout


\backslash
EndFor
\end_layout

\begin_layout Plain Layout


\backslash
end{algorithmic}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
R-RANSAC
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "alg:rransac"

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Section
Probabilistic Data Association Filter 
\begin_inset CommandInset label
LatexCommand label
name "sec:Lie-Group-Probability"

\end_inset


\end_layout

\begin_layout Standard
As mentioned in the introduction, there are a variety of ways to propagate
 the models, associate measurements, and update the models with the associated
 measurements.
 For our implementation, we have chosen to use the Probabilistic Data Associatio
n Filter (PDAF) even though we are tracking multiple targets
\begin_inset CommandInset citation
LatexCommand cite
key "Bar-Shalom2009"
literal "true"

\end_inset

.
 Because of the modular design of R-RANSAC we could implement it with a
 JPDAF, but we decided that the little increase in tracking accuracy is
 not worth the large increase in computation as discussed in 
\begin_inset CommandInset citation
LatexCommand cite
key "Ingersoll2015a"
literal "false"

\end_inset

.
 In this section we present the PDAF in a Lie group setting focusing only
 on the parts we believe need further discussion.
 For some additional background on presenting Lie groups in a probabilistic
 frame work we refer the reader to 
\begin_inset CommandInset citation
LatexCommand cite
key "Bourmaud2013a,Bourmaud2014"
literal "true"

\end_inset

.
 We also follow some of the derivation, convention, notation and terminology
 from 
\begin_inset CommandInset citation
LatexCommand cite
key "Reid2001,Reid2001a,Thrun2006"
literal "true"

\end_inset

 but adapted for the Lie group setting.
 
\end_layout

\begin_layout Standard
We present the PDAF for one target, but it is trivially extended to the
 case of multiple targets.
 Also, the PDAF is orignally designed to work with a single measurement
 source, but we extend it to work with multiple measurement sources.
 To facilitate this, we establish additional notation.
 Let 
\begin_inset Formula $\mathcal{S}=\left\{ 1,\ldots,N_{s}\right\} $
\end_inset

 be the indexing set of sources with 
\begin_inset Formula $N_{s}$
\end_inset

 being the number of sources, and 
\begin_inset Formula $Y_{m}^{s}$
\end_inset

 being the set of measurements associated to the model at time 
\begin_inset Formula $m$
\end_inset

 produced by source 
\begin_inset Formula $s\in\mathcal{S}$
\end_inset

.
 It is possible that 
\begin_inset Formula $Y_{m}^{s}=\emptyset$
\end_inset

 if a source didn't produce any measurements.
 We assume that each source produces at most one measurement originated
 from a target with probability of detection 
\begin_inset Formula $P_{D}^{s}$
\end_inset

.
 Also, the source produces clutter (noisy measurements) uniformly in the
 local surveillance region, where the number of clutter measurements per
 scan is modeled with a Poisson distribution with spatial density 
\begin_inset Formula $\lambda^{s}$
\end_inset

.
 The spatial density 
\begin_inset Formula $\lambda^{s}$
\end_inset

 is the expected number of clutter measurements per sensor scan divided
 by the volume of the local surveillance region.
 Lastly, let 
\begin_inset Formula $y_{m}^{s,j}\in Y_{m}^{s}$
\end_inset

 denote the 
\begin_inset Formula $j^{th}$
\end_inset

 measurement in 
\begin_inset Formula $Y_{m}^{s}$
\end_inset

 assuming that 
\begin_inset Formula $Y_{m}^{s}\neq\emptyset$
\end_inset

.
 
\end_layout

\begin_layout Subsection
Propagation
\end_layout

\begin_layout Standard
In this section we present the model propagation step used in the PDAF adapted
 to Lie groups.
 When working with Lie groups, uncertainty is modeled in the Cartesian space
 isomorphic to the Lie algebra since Gaussian distributions are defined
 in Cartesian space.
 To demonstrate this, we denote the state estimate at time 
\begin_inset Formula $m$
\end_inset

 as 
\begin_inset Formula $\hat{x}_{m}\in G\times E$
\end_inset

 and the true state as 
\begin_inset Formula $x_{m}\in G\times E$
\end_inset

.
 Let 
\begin_inset Formula $\delta x_{m}\in E^{*}$
\end_inset

 denote a local perturbation around 
\begin_inset Formula $\hat{x}_{m}$
\end_inset

 that is a zero-mean, Gaussian, random variable with error covariance 
\begin_inset Formula $P_{m}$
\end_inset

 such that 
\begin_inset Formula 
\[
x_{m}=\hat{x}_{m}\oplus\delta x_{m}.
\]

\end_inset


\begin_inset Formula $\delta x_{m}$
\end_inset

 is the error of the estimate or mean 
\begin_inset Formula $\hat{x}_{m}$
\end_inset

.
 When representing the probability of a state 
\begin_inset Formula $x_{m}$
\end_inset

, we represent it using the error that's in the Cartesian space.
 For example, the probability of the prior distribution, or the belief distribut
ion, 
\begin_inset Formula $p\left(x_{m}\right)$
\end_inset

, is 
\begin_inset Formula 
\begin{align*}
p\left(x_{m}\right) & =\eta\exp\left(-\frac{1}{2}\left(x_{m}\ominus\hat{x}_{m}\right)^{\top}P_{m}^{-1}\left(x_{m}\ominus\hat{x}_{m}\right)\right)\\
 & =\eta\exp\left(-\frac{1}{2}\delta x_{m}^{\top}P_{m}^{-1}\delta x\right),
\end{align*}

\end_inset

where 
\begin_inset Formula $\eta$
\end_inset

 is a normalizing coefficient corresponding to the Gaussian distribution.
 We will use 
\begin_inset Formula $\eta$
\end_inset

 to denote any normalizing coefficient.
 
\end_layout

\begin_layout Standard
The state of the model is propagated according to the system model which
 is 
\begin_inset Formula 
\[
x_{m}=f\left(x_{m^{-}},w_{m},\delta_{m}\right).
\]

\end_inset

The process noise 
\begin_inset Formula $w_{m}$
\end_inset

, and the previous state 
\begin_inset Formula $x_{m^{-}}$
\end_inset

 are both random variables, and we are interested in 
\begin_inset Formula $p\left(x_{m}\right)$
\end_inset

 assuming we know 
\begin_inset Formula $p\left(x_{m^{-}}\right)$
\end_inset

.
 According to the total probability theorem discussed in 
\begin_inset CommandInset citation
LatexCommand cite
key "Thrun2006"
literal "false"

\end_inset

,
\begin_inset Formula 
\[
p\left(x_{m}\right)=\int_{\delta x_{m^{-}}}p\left(x_{m}\mid x_{m^{-}}\right)p\left(x_{m^{-}}\right)d\delta x_{m^{-}},
\]

\end_inset

where 
\begin_inset Formula $p\left(x_{m}\mid x_{m^{-}}\right)$
\end_inset

 is the state transition probability.
 We assume that 
\begin_inset Formula $p\left(x_{m^{-}}\right)$
\end_inset

 and 
\begin_inset Formula $p\left(w_{m}\right)$
\end_inset

 are Gaussian distributions; however, if the state transistion function
 
\begin_inset Formula $f$
\end_inset

 is not linear in either of the terms, then 
\begin_inset Formula $p\left(x_{m}\right)$
\end_inset

 will not be Gaussian.
 We can approximate 
\begin_inset Formula $p\left(x_{m}\right)$
\end_inset

 as Gaussian by linearizing the state transition function around the mean
 of 
\begin_inset Formula $x_{m^{-}}$
\end_inset

 and 
\begin_inset Formula $w_{m}$
\end_inset

.
 Doing so yields 
\begin_inset Formula 
\begin{align*}
p\left(x_{m}\right) & \approx\eta\int\exp\left(-\frac{1}{2}\left(x_{m}\ominus f_{\hat{x}_{m^{-}}}+F_{m}\delta x_{m}\right)^{\top}\right.\\
 & \left.\bar{Q}_{m}^{-1}\left(x_{m}\ominus f_{\hat{x}_{m^{-}}}+F_{m}\delta x_{m}\right)\right)\\
 & \exp\left(-\frac{1}{2}\delta x_{m}^{\top}P_{m}^{-1}\delta x\right)d\delta x_{m^{-}}
\end{align*}

\end_inset

with 
\begin_inset Formula 
\begin{align*}
\bar{Q}_{m} & =G_{m}QG_{m}^{\top}\\
f_{\hat{x}_{m^{-}}} & =f\left(\hat{x}_{m^{-}},0,\delta_{m}\right)
\end{align*}

\end_inset


\begin_inset Formula 
\begin{align*}
F_{m} & =\left.\frac{\partial x_{m}\ominus f\left(x_{m^{-}},w_{m},\delta_{m}\right)}{\partial x_{m^{-}}}\right|_{\begin{array}{c}
x_{m^{-}}=\hat{x}_{m^{-}}\\
w_{m}=0
\end{array}}\\
 & =\begin{bmatrix}\mathbf{Ad}_{\text{Exp}\left(\delta_{m}\hat{u}_{m^{-}}\right)^{-1}} & J_{r}\left(\delta_{m}\hat{u}_{m^{-}}\right)\delta_{m}\\
0 & I
\end{bmatrix},
\end{align*}

\end_inset


\begin_inset Formula 
\begin{align*}
G_{m} & =\left.\frac{\partial x_{m}\ominus f\left(x_{m^{-}},w_{m},\delta_{m}\right)}{\partial w_{m}}\right|_{\begin{array}{c}
x_{m^{-}}=\hat{x}_{m^{-}}\\
w_{m}=0
\end{array}}\\
 & =\begin{bmatrix}J_{r}\left(\delta_{m}\hat{u}_{m^{-}}\right)\delta_{m} & J_{r}\left(\delta_{m}\hat{u}_{m^{-}}\right)\frac{\delta_{m}^{2}}{2}\\
0 & I\delta_{m}
\end{bmatrix}.
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
Now that we have a linearized version of 
\begin_inset Formula $p\left(x_{m}\right)$
\end_inset

, we can pull terms that are not dependent on 
\begin_inset Formula $\delta x_{m}$
\end_inset

 out of the integral and simplify the expression using a procedure similar
 to the one described in 
\begin_inset CommandInset citation
LatexCommand cite
key "Thrun2006"
literal "false"

\end_inset

.
 Doing so yields
\begin_inset Formula 
\begin{align*}
p\left(x_{m}\right) & \approx\eta\exp\left(-\frac{1}{2}\left(x_{m}\ominus f_{\hat{x}_{m^{-}}}\right)^{\top}P_{m}^{-1}\left(x_{m}\ominus f_{\hat{x}_{m^{-}}}\right)\right)
\end{align*}

\end_inset

with
\begin_inset Formula 
\[
P_{m}=F_{m}P_{m^{-}}F_{m}^{\top}+G_{m}QG_{m}^{\top}.
\]

\end_inset

Thus the new state estimate and error covariance are 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{subequations}
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "eq:JPDAF_propagation"

\end_inset

 
\begin_inset Formula 
\begin{align}
\hat{\bar{x}}_{m} & =f\left(\hat{x}_{m^{-}},0,\delta_{m}\right)\\
\bar{P}_{m} & =F_{m}P_{m^{-}}F_{m}^{\top}+G_{m}QG_{m}^{\top},
\end{align}

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{subequations}
\end_layout

\end_inset

 where the 
\begin_inset Formula $\bar{}$
\end_inset

 notation indicates that measurements have not been incorporated into the
 state and covariance estiamte.
 
\end_layout

\begin_layout Standard
After propagating the model, it is transformed using the provided transformation
 from the user before associating new measurements.
 This is because new measurements are in the current global frame, and so
 the models must also be in the current global frame for proper data association.
 
\end_layout

\begin_layout Subsection
Data Association 
\begin_inset CommandInset label
LatexCommand label
name "subsec:Data-Association"

\end_inset


\end_layout

\begin_layout Standard
The PDAF uses a validation region to indicate if a measurement should be
 associated with a model.
 The validation region is a volume around a track's current state estimate.
 Measurements that are within the validation region are associated to the
 model and are used to update the model.
 We will use the validation region described in 
\begin_inset CommandInset citation
LatexCommand cite
key "Bar-Shalom2011,Bar-Shalom1988"
literal "true"

\end_inset

.
 
\end_layout

\begin_layout Standard
The volume is determined by the probability of a measurement 
\begin_inset Formula $y_{m}^{s,j}$
\end_inset

 which is defined as 
\begin_inset Formula 
\[
p\left(y_{m}^{s,j}\right)=\int_{\delta\bar{x}_{m}}p\left(y_{m}^{s,j}\mid x_{m}\right)\bar{p}\left(x_{m}\right)d\delta\bar{x}_{m}.
\]

\end_inset


\end_layout

\begin_layout Standard
For readability, we will droip the superscripts on 
\begin_inset Formula $y_{m}^{s,j}$
\end_inset

.
 In order to solve the integral, we linearize the measurement probability
 
\begin_inset Formula $p\left(y_{m}\mid x_{m}\right)$
\end_inset

 about 
\begin_inset Formula $\hat{\bar{x}}_{m}$
\end_inset

 and the measurement noise.
 This serves two purposes: first it ensures the 
\begin_inset Formula $p\left(y_{m}\right)$
\end_inset

 stays Gaussian and second it exposes 
\begin_inset Formula $\delta x_{m}$
\end_inset

 which is the integrating term.
 Doing so yields 
\begin_inset Formula 
\begin{align*}
p\left(y_{m}\right) & \approx\eta\int_{\delta x_{m}}\exp\left(-\frac{1}{2}\left(y_{m}\ominus\hat{y}_{m}+H_{m}^{s}\delta\bar{x}_{m}\right)^{\top}\right.\\
 & \left.\left(\bar{R}^{s}\right)^{-1}\left(y_{m}\ominus\hat{y}_{m}+H_{m}^{s}\delta\bar{x}_{m}\right)\right)\\
 & \exp\left(-\frac{1}{2}\bar{x}_{m}^{\top}\bar{P}_{m}^{-1}\delta\bar{x}_{m}\right)d\delta\bar{x}_{m}
\end{align*}

\end_inset

with 
\begin_inset Formula 
\begin{align*}
\bar{R}^{s} & =\left(V_{m}R^{s}V_{m}^{\top}\right),\\
\hat{y}_{m} & =h\left(\hat{\bar{x}}_{m},0\right)
\end{align*}

\end_inset


\begin_inset Formula 
\begin{align}
H_{m}^{s} & =\left.\frac{\partial y_{m}\ominus h\left(x_{m},v_{m}\right)}{\partial x_{m}}\right|_{\begin{array}{c}
x_{m}=\hat{x}_{m},\\
v_{m}=0
\end{array}}\nonumber \\
 & =\left.\frac{\partial\log\left(e\right)}{\partial e}\frac{\partial e}{\partial h^{-1}\left(x_{m},v_{m}\right)}\frac{\partial h\left(x_{m},v_{m}\right)}{\partial x_{m}}\right|_{\begin{array}{c}
x_{m}=\hat{x}_{m},\\
v_{m}=0
\end{array}}\label{eq:ObservationJacobianState}\\
 & =J_{r}^{-1}\left(\hat{e}\right)\mathbf{Ad}_{y_{m}^{-1}}\left.\frac{\partial h\left(x_{m},v_{m}\right)}{\partial x_{m}}\right|_{\begin{array}{c}
x_{m}=\hat{x}_{m},\\
v_{m}=0
\end{array}},\nonumber 
\end{align}

\end_inset


\begin_inset Formula 
\begin{align}
V_{m}^{s} & =\left.\frac{\partial y_{m}\ominus h\left(x_{m},v_{m}\right)}{\partial v_{m}}\right|_{\begin{array}{c}
x_{m}=\hat{x}_{m},\\
v_{m}=0
\end{array}}\label{eq:ObservationJacobianNoise}\\
 & =J_{r}^{-1}\left(\hat{e}\right)\mathbf{Ad}_{y_{m}^{-1}}\left.\frac{\partial h\left(x_{m},v_{m}\right)}{\partial v_{m}}\right|_{\begin{array}{c}
x_{m}=\hat{x}_{m},\\
v_{m}=0
\end{array}},\nonumber 
\end{align}

\end_inset

and 
\begin_inset Formula 
\[
e=h\left(\hat{\bar{x}}_{m},0\right)^{-1}y_{m}.
\]

\end_inset

The superscript on 
\begin_inset Formula $H_{m}^{s}$
\end_inset

, 
\begin_inset Formula $V_{m}^{s}$
\end_inset

 and 
\begin_inset Formula $R^{s}$
\end_inset

 indicate that these terms are for the 
\begin_inset Formula $s^{th}$
\end_inset

 measurement source.
 
\end_layout

\begin_layout Standard
By rearranging the terms in the linearized 
\begin_inset Formula $p\left(y_{m}\right)$
\end_inset

 we get 
\begin_inset Formula 
\begin{align*}
p\left(y_{m}\right) & \approx\eta\exp\left(-\frac{1}{2}\left(y_{m}\ominus\hat{y}_{m}\right)^{\top}\right.\\
 & \left.\left(S^{s}\right)^{-1}\left(y_{m}\ominus\hat{y}_{m}\right)\right)\\
 & \int_{\delta x_{m}}\exp\left(-\frac{1}{2}l\left(\delta\bar{x}_{m}\right)^{\top}\left(S^{s}\right)^{-1}l\left(\delta\bar{x}_{m}\right)\right)d\delta\bar{x}_{m}
\end{align*}

\end_inset

with
\begin_inset Formula 
\begin{align*}
l\left(\delta\bar{x}_{m}\right) & =\left(\delta\bar{x}_{m}+S^{s}H_{m}^{s}\left(\bar{R}^{s}\right)^{-1}y_{m}\ominus\hat{y}_{m}\right)
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
and the innovation covariance
\begin_inset Formula 
\begin{equation}
S^{s}=\left(V_{m}^{s}R^{s}\left(V_{m}^{s}\right)^{\top}+H_{m}^{s}P\left(H_{m}^{s}\right)^{\top}\right).\label{eq:innovation_cov}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
Note that we were able to pull a term outside of the exponential, and the
 term inside of the exponential is a Gaussian distribution which integrates
 to a constant regardless of 
\begin_inset Formula $\delta\bar{x}_{m}$
\end_inset

.
 Therefore, we can absorb the constant integral into 
\begin_inset Formula $\eta$
\end_inset

 to get 
\begin_inset Formula 
\begin{align}
p\left(y_{m}\right) & \approx\eta\exp\left(-\frac{1}{2}\left(y_{m}\ominus\hat{y}_{m}\right)^{\top}\right.\nonumber \\
 & \left.\left(S^{s}\right)^{-1}\left(y_{m}\ominus\hat{y}_{m}\right)\right).\label{eq:probability_y}
\end{align}

\end_inset

We don't want to associate every measurement to the model, only the measurements
 with a high probability.
 This is done by using a gating technique as follows.
 Let 
\begin_inset Formula $p\left(z_{m}^{s,j}\right)$
\end_inset

 be the standardized Gaussian probability of 
\begin_inset Formula $p\left(y_{m}^{s,j}\right)$
\end_inset

 where 
\begin_inset Formula $z_{m}$
\end_inset

 (we drop the superscripts) is defined as 
\begin_inset Formula 
\[
z_{m}=\left(S^{s}\right)^{-\frac{1}{2}}y_{m}\ominus\hat{y}_{m}.
\]

\end_inset

 Let 
\begin_inset Formula $d_{V}:N\times N\to\mathbb{R}$
\end_inset

 be a metric defined as 
\begin_inset Formula 
\begin{align}
d_{V}\left(y_{m},\hat{y}_{m}\right) & =\left(y_{m}\ominus\hat{y}_{m}\right)^{\top}\left(S^{s}\right)^{-1}\left(y_{m}\ominus\hat{y}_{m}\right)\label{eq:validation_region_metric}\\
 & =z_{m}^{\top}z_{m}.\nonumber 
\end{align}

\end_inset

Note that the metric 
\begin_inset Formula $d_{V}$
\end_inset

 is simply the sum of the square of 
\begin_inset Formula $n$
\end_inset

 standard Gaussian distributions.
 Thus, the values of the metric 
\begin_inset Formula $d_{V}$
\end_inset

 form a chi-square distribution.
\end_layout

\begin_layout Standard
The validation region is the set 
\begin_inset Formula 
\[
\nu\left(\hat{y}_{m},\gamma\right)=\left\{ y_{m}\in Y_{m}\,:\,d\left(y_{m},\hat{y}_{m}\right)\leq\gamma\right\} ,
\]

\end_inset

where 
\begin_inset Formula $Y_{m}$
\end_inset

 is the set of measurements received at time 
\begin_inset Formula $m$
\end_inset

 and the parameter 
\begin_inset Formula $\gamma$
\end_inset

 is called the gate threshold.
 The gate probability 
\begin_inset Formula $P_{G}$
\end_inset

 is the probability that a measurement produced by a target is within the
 validation region.
 This probability is defined as 
\begin_inset Formula $p\left(d_{V}\left(y_{m},\hat{y}_{m}\right)\leq\gamma\right)$
\end_inset

, thus 
\begin_inset Formula $P_{G}$
\end_inset

 is the value of the chi-square cumulative distribution function (CDF) with
 parameter 
\begin_inset Formula $\gamma$
\end_inset

.
 We can thus calculate 
\begin_inset Formula $\gamma$
\end_inset

 for a specific 
\begin_inset Formula $P_{G}$
\end_inset

.
\end_layout

\begin_layout Standard
The volume of the validation region, 
\begin_inset Formula $V_{vol}^{s}$
\end_inset

, is defined as 
\begin_inset Formula 
\begin{equation}
V_{vol}^{s}=c_{n}\gamma^{n/2}\left|S^{s}\right|^{1/2},\label{eq:volume_validation_region}
\end{equation}

\end_inset

where 
\begin_inset Formula $c_{n}$
\end_inset

 is the volume of the unit hypersphere of dimension 
\begin_inset Formula $n$
\end_inset

 (dimension of the measurement space) calculated as 
\begin_inset Formula 
\[
c_{n}=\frac{\pi^{n/2}}{\Gamma\left(n/2+1\right)}
\]

\end_inset

and 
\begin_inset Formula $\Gamma$
\end_inset

 is the gamma function.
 Since the validation region depends on the measurement noise covariance,
 there will be a different validation region for each measurement source.
 Also, the number of expected measurements in the validation region is 
\begin_inset Formula $\lambda^{k}V_{vol}^{k}$
\end_inset

 for each source.
\end_layout

\begin_layout Subsection
Measurement Weight
\end_layout

\begin_layout Standard
The PDAF assumes that a measurement source produces at most one measurement
 originated from the target and that all other measurements are noise.
 Thus, the PDAF assigns a weight to each measurement indicating how likely
 the measurement originated from the target.
 These weights are calculated for each measurement source.
 Let 
\begin_inset Formula $\beta^{s,j}$
\end_inset

denote the weight assigned to measurement 
\begin_inset Formula $y_{m}^{s,j}$
\end_inset

.
 The weight is calculate as
\begin_inset Formula 
\[
\beta^{s,j}=\frac{\mathcal{L}\left(y_{m}^{s,j}\right)}{1-P_{D}P_{G}+\sum_{y\in Y_{m}^{s}}\mathcal{L}\left(y\right)},
\]

\end_inset

with 
\begin_inset Formula 
\[
\mathcal{L}\left(y_{m}^{s,j}\right)=\frac{P\left(y_{m}^{s,j}\right)P_{D}^{s}}{\lambda^{s}}
\]

\end_inset

and 
\begin_inset Formula $P\left(y_{m}^{s,j}\right)$
\end_inset

 being defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:probability_y"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 The null weight 
\begin_inset Formula $\beta^{s,0}$
\end_inset

 is the probability that none of the associated measurements from 
\begin_inset Formula $Y_{m}^{s}$
\end_inset

 originated from the target and is calculated as 
\begin_inset Formula 
\[
\beta^{k,0}=\frac{1-P_{D}^{s}P_{G}}{1-P_{D}^{s}P_{G}+\sum_{y\in Y_{m}^{s}}\mathcal{L}\left(y\right)}.
\]

\end_inset

Note that 
\begin_inset Formula $\sum_{i=0}^{\left|Y_{m}^{s}\right|}\beta^{s,i}=1$
\end_inset

.
\end_layout

\begin_layout Subsection
Update
\begin_inset CommandInset label
LatexCommand label
name "subsec:Single-Souorce-Update"

\end_inset


\end_layout

\begin_layout Standard
The PDAF originally assumes only one measurement source.
 In the case of multiple measurement sources, we apply the update step for
 each source and fuse the results together using the centralized measurement
 fusion discussed in subsection 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Centralized-Measurement-Fusion"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 For each 
\begin_inset Formula $Y_{m}^{s}\neq\emptyset$
\end_inset

 we perform the PDAF update step 
\begin_inset CommandInset citation
LatexCommand cite
key "Bar-Shalom2011"
literal "false"

\end_inset

.
\end_layout

\begin_layout Standard
The innovation term 
\begin_inset Formula $\nu_{m}^{s,j}$
\end_inset

 is 
\begin_inset Formula 
\[
\nu_{m}^{s,j}=y_{m}^{s,j}\ominus h\left(\hat{\bar{x}}_{m},0\right),
\]

\end_inset

and the combined innovation term is 
\begin_inset Formula 
\begin{equation}
\nu_{m}^{s}=\sum_{j=1}^{\left|Y_{m}^{s}\right|}\beta^{s,j}\nu_{m}^{s,j}.\label{eq:JPDAF_combined_innvo}
\end{equation}

\end_inset

Using the combined innovation term, the state update for the 
\begin_inset Formula $s^{th}$
\end_inset

 source is 
\begin_inset Formula 
\[
\hat{x}_{m}^{s}=\hat{\bar{x}}_{m}\oplus W_{m}^{s}\nu_{m}^{s},
\]

\end_inset

where 
\begin_inset Formula $W_{m}^{s}$
\end_inset

 is the gain defined as 
\begin_inset Formula 
\[
W_{m}^{s}=\bar{P}_{m}\left(H_{m}^{s}\right)^{\top}\left(S_{m}^{s}\right)^{-1}.
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $\bar{P}_{m}$
\end_inset

 is the error covariance before update defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:JPDAF_propagation"
plural "false"
caps "false"
noprefix "false"

\end_inset

, 
\begin_inset Formula $H_{m}^{s}$
\end_inset

 is defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:ObservationJacobianState"
plural "false"
caps "false"
noprefix "false"

\end_inset

, and 
\begin_inset Formula $S_{m}^{s}$
\end_inset

 is the innovation covariance defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:innovation_cov"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
The covariance update is 
\begin_inset Formula 
\begin{equation}
P_{m}^{s}=\beta^{s,0}\bar{P}_{m}+\left(1-\beta^{s,0}\right)\breve{P}_{m}^{s}+\tilde{P}_{m}^{s},\label{eq:JPDAF_cov_update}
\end{equation}

\end_inset

where the covariance of the state updated with the correct measurement is
 
\begin_inset Formula 
\[
\breve{P}^{s}=\bar{P}_{m}-W_{m}^{s}S_{m}^{s}\left(W_{m}^{s}\right)^{\top},
\]

\end_inset

and the spread of the innovations term 
\begin_inset Formula 
\[
\tilde{P}_{m}^{s}=W_{m}^{s}\left[\sum_{i=1}^{\left|Y_{m}^{s}\right|}\beta^{s,i}\nu_{m}^{s,i}\left(\nu_{m}^{s,i}\right)^{\top}-\nu_{m}^{s}\left(\nu_{m}^{s}\right)^{\top}\right]\left(W_{m}^{s}\right)^{\top}.
\]

\end_inset


\end_layout

\begin_layout Standard
We now have several updated states and error covariance; one for each source
 that produced associated measurements.
 We show how to fuse them together in the next subsection.
 Also, once the measurements are used to update the model, they are added
 to the model's consensus set.
 
\end_layout

\begin_layout Subsection
Centralized Measurement Fusion 
\begin_inset CommandInset label
LatexCommand label
name "subsec:Centralized-Measurement-Fusion"

\end_inset


\end_layout

\begin_layout Standard
We use the centralized measurement fusion algorithm described in 
\begin_inset CommandInset citation
LatexCommand cite
key "Bar-Shalom2011"
literal "true"

\end_inset

 and 
\begin_inset CommandInset citation
LatexCommand cite
key "Millard2017"
literal "true"

\end_inset

 to fuse together the updated states and error covariance.
 We briefly review this method here only to adapt it to the Lie group setting
 and for the specific case of the JPDAF.
 Let 
\begin_inset Formula $\bar{\mathcal{S}}_{m}\subseteq\mathcal{S}_{m}$
\end_inset

 be the indexinig set to sourced that produced associated measurements.
 Then covariance fusion is 
\begin_inset Formula 
\[
P_{m}^{-1}=\bar{P}_{m}^{-1}+\sum_{s\in\bar{\mathcal{S}}_{m}}\left(\left(P_{m}^{s}\right)^{-1}-\bar{P}_{m}^{-1}\right),
\]

\end_inset

and the state update is 
\begin_inset Formula 
\[
\hat{x}_{m}=\hat{\bar{x}}_{m}\oplus\left(\bar{P}_{m}\sum_{s\in\mathcal{\bar{S}}_{m}}\left(H_{m}^{s}\right)^{\top}\left(S_{m}^{s}\right)^{-1}\nu_{m}^{s}\right),
\]

\end_inset

with 
\begin_inset Formula $P_{m}^{s}$
\end_inset

 being defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:JPDAF_cov_update"
plural "false"
caps "false"
noprefix "false"

\end_inset

 and 
\begin_inset Formula $\nu_{m}^{s}$
\end_inset

 is defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:JPDAF_combined_innvo"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 
\end_layout

\begin_layout Section
Track Likelihood
\begin_inset CommandInset label
LatexCommand label
name "sec:Track-Likelihood"

\end_inset


\end_layout

\begin_layout Standard
The track likelihood is a measure of how well a track represents an actual
 target.
 In 
\begin_inset CommandInset citation
LatexCommand cite
key "Niedfeldt2013,Niedfeldt,Ingersoll2015,Niedfeldt2017"
literal "false"

\end_inset

, the track's inlier ratio and lifetime were used to indicate the track's
 likelihood which are add-hoc techniques.
 This section presents a theoretically justified approach using a binary
 Bayes filter.
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $\theta_{m}^{s}$
\end_inset

 denote the number of validated measurements from the 
\begin_inset Formula $s^{th}$
\end_inset

 measurement source at time 
\begin_inset Formula $m$
\end_inset

, 
\begin_inset Formula $\theta_{m:k}^{s}=\cup_{i=m}^{k}\left\{ \theta_{i}^{s}\right\} $
\end_inset

, 
\begin_inset Formula $\theta_{m}=\cup_{s\in\mathcal{S}_{m}}\theta_{m}^{s}$
\end_inset

 and 
\begin_inset Formula $\theta_{m:k}=\cup_{j=m}^{k}\theta_{m}$
\end_inset

 where 
\begin_inset Formula $m<k$
\end_inset

.
 Let 
\begin_inset Formula $z$
\end_inset

 be a Bernoulli random variable that is true when the track represents an
 actual target and false when the track does not represent a target.
 For notation purposes we will use 
\begin_inset Formula $\neg z$
\end_inset

 to denote that 
\begin_inset Formula $z$
\end_inset

 is false.
\end_layout

\begin_layout Standard
We are interested in calculating the probability 
\begin_inset Formula $p\left(z\mid\theta_{m:k}\right)$
\end_inset

 which is the probability that the track represents an actual target conditioned
 on the number of validated measurements from time 
\begin_inset Formula $m$
\end_inset

 to 
\begin_inset Formula $k$
\end_inset

.
\end_layout

\begin_layout Theorem
Let 
\begin_inset Formula $P_{D}^{s}$
\end_inset

 denote the probability that the 
\begin_inset Formula $s^{th}$
\end_inset

 measurement source produces a true measurement of the target during the
 sensor scan, and let 
\begin_inset Formula $P_{G}$
\end_inset

 denote the probability that the measurement is validated (associated).
 Furthermore, let 
\begin_inset Formula $\lambda^{s}$
\end_inset

 denote the spatial density of the 
\begin_inset Formula $s^{th}$
\end_inset

 source, and let 
\begin_inset Formula $V_{m,vol}^{s}$
\end_inset

 denote the volume of the validation region associated with the 
\begin_inset Formula $s^{th}$
\end_inset

 source at time 
\begin_inset Formula $m$
\end_inset

 defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:volume_validation_region"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 Then the probability that the track represents an actual target conditioned
 on the number of validated measurements between times 
\begin_inset Formula $m$
\end_inset

 and 
\begin_inset Formula $k$
\end_inset

 is given by 
\begin_inset Formula 
\begin{equation}
p\left(z\mid\theta_{m:k}\right)=1-\frac{1}{1+10^{l_{k}}},\label{eq:track_likelihood}
\end{equation}

\end_inset

where 
\begin_inset Formula $\ell_{k}$
\end_inset

 satisfies
\begin_inset Formula 
\[
\ell_{j}=\ell_{j^{-}}+\sum_{s=1}^{N_{s}}\log_{10}\left(1+P_{G}P_{D}^{s}\left(\frac{\theta_{j}^{s}}{\lambda^{s}V_{j,vol}^{s}}-1\right)\right)
\]

\end_inset

for 
\begin_inset Formula $j=m,\ldots,k$
\end_inset

 and whree 
\begin_inset Formula $\ell_{m^{-}}=0$
\end_inset

.
\end_layout

\begin_layout Proof
Bayes rule gives us 
\begin_inset Formula 
\begin{align*}
p\left(z\mid\theta_{m:k}\right) & =\frac{p\left(\theta_{k}\mid z\right)p\left(z\mid\theta_{m:k^{-}}\right)}{p\left(\theta_{k}\mid\theta_{m:k^{-}}\right)},
\end{align*}

\end_inset


\begin_inset Formula 
\[
p\left(\neg z\mid\theta_{m:k}\right)=\frac{p\left(\theta_{k}\mid\neg z\right)p\left(\neg z\mid\theta_{m:k^{-}}\right)}{p\left(\theta_{k}\mid\theta_{m:k^{-}}\right)}.
\]

\end_inset

Let 
\begin_inset Formula 
\[
\ell_{k}\triangleq\log_{10}\left(\frac{p\left(z\mid\theta_{m:k}\right)}{p\left(\neg z\mid\theta_{m:k}\right)}\right)
\]

\end_inset

denote the log ratio of the probabilities, and note that the relationship
 
\begin_inset Formula $p\left(z\mid\theta_{m:k}\right)+p\left(\neg z\mid\theta_{m:k}\right)=1$
\end_inset

 gives equation 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:track_likelihood"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 Furthermore, we have that 
\begin_inset Formula 
\begin{align*}
\ell_{k} & =\log\left(\frac{p\left(\theta_{k}\mid z\right)p\left(z\mid\theta_{m:k^{-}}\right)}{p\left(\theta_{k}\mid\neg z\right)p\left(\neg z\mid\theta_{m:k^{-}}\right)}\right)\\
 & =\log\left(\frac{p\left(\theta_{m:k^{-}}\mid z\right)}{p\left(\theta_{m:k^{-}}\mid\neg z\right)}\right)+\log\left(\frac{p\left(\theta_{k}\mid z\right)}{p\left(\theta_{k}\mid\neg z\right)}\right)\\
 & =\ell_{k^{-}}+\sum_{s=0}^{N_{s}}\log\left(\frac{p\left(\theta_{k}^{s}\mid z\right)}{p\left(\theta_{k}^{s}\mid\neg z\right)}\right).
\end{align*}

\end_inset


\end_layout

\begin_layout Proof
The probability that a true measurement was received and validated is 
\begin_inset Formula $P_{D}^{s}P_{G}$
\end_inset

.
 The expected number of false measurements within a validation region at
 time 
\begin_inset Formula $m$
\end_inset

 is 
\begin_inset Formula $\lambda^{s}V_{m,vol}^{s}$
\end_inset

.
 We assume that a measurement source can only produce at most one true measureme
nt during a sensor scan.
 Therefore, we have the two possibilities for 
\begin_inset Formula $p\left(\theta_{k}^{s}\mid z\right)$
\end_inset

: that all 
\begin_inset Formula $\theta_{k}^{s}$
\end_inset

 measurements are false or all but one are false.
 Thus 
\begin_inset Formula 
\begin{multline*}
p\left(\theta_{k}^{s}\mid z\right)=P_{G}P_{D}^{s}\exp\left(\lambda^{s}V_{vol}^{s}\right)\frac{\left(\lambda^{s}V_{vol}^{s}\right)^{\left(\theta_{k}^{s}-1\right)}}{\left(\theta_{k}^{s}-1\right)!}\\
+\left(1-P_{G}^{s}P_{D}^{s}\right)\exp\left(\lambda^{s}V_{vol}^{s}\right)\frac{\left(\lambda^{s}V_{vol}^{s}\right)^{\theta_{k}^{s}}}{\left(\theta_{k}^{s}\right)!}.
\end{multline*}

\end_inset

There is only one possibility for 
\begin_inset Formula $p\left(\theta_{k}^{s}\mid\neg z\right)$
\end_inset

, that is the probability of all of the measurements being false 
\begin_inset Formula 
\[
p\left(\theta_{k}^{s}\mid\neg z\right)=\exp\left(\lambda^{s}V_{vol}^{s}\right)\frac{\left(\lambda^{s}V_{vol}^{s}\right)^{\theta_{k}^{s}}}{\left(\theta_{k}^{s}\right)!}.
\]

\end_inset

Taking the ratio of the two gives
\begin_inset Formula 
\[
\frac{p\left(\theta_{k}^{s}\mid z\right)}{p\left(\theta_{k}^{s}\mid\neg z\right)}=1+P_{G}^{s}P_{D}^{s}\left(\frac{\theta_{k}^{s}}{\lambda^{s}V_{vol}^{s}}-1\right).
\]

\end_inset


\end_layout

\begin_layout Standard
If a track is outside the local surveillance region (LSR) of the 
\begin_inset Formula $s^{th}$
\end_inset

 source, then 
\begin_inset Formula $P_{D}^{s}$
\end_inset

 should be zero and 
\begin_inset Formula $p\left(z\mid\theta_{m:k}\right)$
\end_inset

 will not be affected.
 In the case that the track leaves the global surveillance region (GSR),
 we need a way to kill the track in order to make room for other tracks
 to be initialized.
 Thus, we assume that a track that has not received a measurement within
 
\begin_inset Formula $\tau_{\alpha}$
\end_inset

 seconds is no longer in the GSR and will be pruned.
 A track is considered a good track if the 
\begin_inset Formula $p\left(z\mid\theta_{m:k}\right)>\tau_{\rho}$
\end_inset

; otherwise, it is considered a poor track.
 A good track receives a unique indentifiable label.
 The parameters 
\begin_inset Formula $\lambda^{s}$
\end_inset

 and 
\begin_inset Formula $P_{D}^{s}$
\end_inset

 can be easily estimated and 
\begin_inset Formula $P_{G}^{s}$
\end_inset

 is defined by the user.
\end_layout

\begin_layout Section
Track to Track Fusion
\begin_inset CommandInset label
LatexCommand label
name "sec:Track-to-Track-fusion"

\end_inset


\end_layout

\begin_layout Standard
As tracks are propagated and updated they can begin to coalesce in which
 case we need to merge/fuse them.
 In order to optimally fuse them, we would need to calculate the cross covarianc
e between two tracks which is computationally complex and time expensive,
 or in our case unknown.
 Fortunately, the covariance intersection (CI) method can be used to fuse
 two tracks together without calculating the cross covariance 
\begin_inset CommandInset citation
LatexCommand cite
key "Deng2012"
literal "true"

\end_inset

.
 We use the variation of the CI method presented in 
\begin_inset CommandInset citation
LatexCommand cite
key "Tian2010"
literal "true"

\end_inset

 called the sampled covariance intersection (SCI) method.
 In order to see if two tracks need to be fused together, we use a track
 association method prescribed in 
\begin_inset CommandInset citation
LatexCommand cite
key "Bar-Shalom2011"
literal "true"

\end_inset

.
 In this section we will briefly present the track association and fusion
 methods adapted to the Lie group setting.
 
\end_layout

\begin_layout Subsection
Track Association
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $\hat{x}^{i}$
\end_inset

 denote the state estimate of the 
\begin_inset Formula $i^{th}$
\end_inset

 track and 
\begin_inset Formula $P^{i}$
\end_inset

 be the corresponding error covariance.
 The estimation error between two tracks is denoted 
\begin_inset Formula $\Delta^{ij}$
\end_inset

 and defined as 
\begin_inset Formula 
\[
\Delta^{ij}=\hat{x}^{i}\ominus\hat{x}^{j}.
\]

\end_inset

Assuming that the two tracks are independent, the covariance of the estimation
 error is 
\begin_inset Formula 
\[
T^{ij}=P^{i}+P^{j}.
\]

\end_inset

We next define a metric 
\begin_inset Formula $d_{T}:\left(G\times\mathfrak{g}\right)\times\left(G\times\mathfrak{g}\right)\to\mathbb{R}$
\end_inset

 to be
\begin_inset Formula 
\[
d_{T}\left(\hat{x}^{i},\hat{x}^{j}\right)=\left(\Delta^{ij}\right)^{\top}\left(T^{ij}\right)^{-1}\Delta^{ij}.
\]

\end_inset

If 
\begin_inset Formula $d_{T}\left(\cdot,\cdot\right)<\tau_{S}$
\end_inset

 where 
\begin_inset Formula $\tau_{S}\in\mathbb{R}$
\end_inset

, then the two tracks are deemed to be the same and should be merged.
\end_layout

\begin_layout Subsection
Track Fusion
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $\hat{x}^{1},\hat{x}^{2},\cdots,\hat{x}^{n}$
\end_inset

 denote the state estimates of the tracks that need to be fused together
 and 
\begin_inset Formula $P^{i}$
\end_inset

 be their corresponding error covariance.
 The fused estimate in SCI is calculated as if the tracks to be fused are
 independent; therefore,
\begin_inset Formula 
\begin{align*}
P^{-1} & =\sum_{i=1}^{n}\left(P^{i}\right)^{-1}\\
\hat{x}_{SCI} & =P\left(\sum_{i=1}^{n}\left(P^{i}\right)^{-1}\hat{x}^{i}\right).
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
For Lie group settings, the state update is 
\begin_inset Formula 
\[
\hat{x}_{SCI}=\hat{x}^{1}\oplus\left(P\sum_{i=2}^{n}\left(\left(P^{i}\right)^{-1}\left(\hat{x}^{i}\ominus\hat{x}^{1}\right)\right)\right),
\]

\end_inset


\end_layout

\begin_layout Standard
The error covariance 
\begin_inset Formula $P^{-1}$
\end_inset

 is overly optimistic, so we must adjust the size as follows:
\end_layout

\begin_layout Itemize
Generate 
\begin_inset Formula $N$
\end_inset

 (about 100 for a good distribution) random samples 
\begin_inset Formula $x^{j}$
\end_inset

, 
\begin_inset Formula $j=1,2,\ldots,N$
\end_inset

 from 
\begin_inset Formula $x\sim\mathcal{N}\left(0,P\right)$
\end_inset


\end_layout

\begin_layout Itemize
Find
\begin_inset Formula 
\[
r_{\text{max}}=\max_{j=1,\ldots,N}\frac{\left(x^{j}\right)^{\top}P^{-1}x^{j}}{\underset{i=1,\ldots,N}{\max}\left\{ \left(x^{j}\right)^{\top}\left(P^{i}\right)^{-1}x^{j}\right\} }
\]

\end_inset

and
\begin_inset Formula 
\[
r_{\text{min}}=\min_{j=1,\ldots,N}\frac{\left(x^{j}\right)^{\top}P^{-1}x^{j}}{\underset{i=1,\ldots,N}{\max}\left\{ \left(x^{j}\right)^{\top}\left(P^{i}\right)^{-1}x^{j}\right\} }
\]

\end_inset


\end_layout

\begin_layout Itemize
Then set
\begin_inset Formula 
\[
P_{SCI}=\frac{P}{ur_{\text{min}}+\left(1-u\right)r_{\text{max}}}
\]

\end_inset

where 
\begin_inset Formula $u\in\left[0,1\right]$
\end_inset

 is used to adjust the performance of the SCI algorithm.
 When 
\begin_inset Formula $u=1$
\end_inset

, the fused covariance is conservative and when 
\begin_inset Formula $u=0$
\end_inset

, the fused covariance is optimistic.
 The authors of 
\begin_inset CommandInset citation
LatexCommand cite
key "Tian2010"
literal "true"

\end_inset

 received good results by setting 
\begin_inset Formula $u=0.5$
\end_inset

.
\end_layout

\begin_layout Standard
The fused track will have the state estimate 
\begin_inset Formula $\hat{x}_{SCI}$
\end_inset

 with error covariance 
\begin_inset Formula $P_{SCI}$
\end_inset

.
\end_layout

\begin_layout Standard
In addition, when tracks are fused, we merge their consensus sets together,
 give the merged track the highest model likelihood out of the tracks merged,
 and the label pertaining to the track that was first created out of the
 merged track.
 We note that it would be more correct to keep a history of the information
 needed to calculate the model's likelihood so that when tracks are merged
 we could recompute the model likelihood; however, such a task can require
 a lot of memory and computation depending on the amount of time merged
 models have existed.
 
\end_layout

\begin_layout Section
RANSAC
\begin_inset CommandInset label
LatexCommand label
name "sec:RANSAC"

\end_inset


\end_layout

\begin_layout Standard
RANSAC is a regression algorithm that estimates the parameters of a model
 while mitigating the effect of gross outliers 
\begin_inset CommandInset citation
LatexCommand cite
key "Fischler1981"
literal "true"

\end_inset

.
 There have been many developments and adaptations to the RANSAC algorithm
 
\begin_inset CommandInset citation
LatexCommand cite
key "Choi2009"
literal "true"

\end_inset

.
 RANSAC is used to initialize new targets.
 A target that is not initialized (not being tracked by R-RANSAC) is producing
 measurements captured by the measurement sources.
 Provided that the measurements of the un-initialized target are not in
 the validation region of any initialized target, its measurements are not
 associated with any existing initialized target; thus, they are given to
 the data tree.
 The measurements produced by the un-initialized target are neighboring
 and will eventually form a cluster 
\begin_inset CommandInset citation
LatexCommand cite
key "Yang2017"
literal "true"

\end_inset

.
 
\end_layout

\begin_layout Standard
RANSAC uses the measurements in the cluster to try to initialize a new target
 by first generating many track hypotheses.
 A track hypothesis is a current hypothetical state 
\begin_inset Formula $x_{k}^{h}$
\end_inset

 estimated from a random subset of measurements from the cluster.
 We discuss the generation of track hypotheses in subsection 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Generating-Track-Hypotheses"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 Each track hypothesis is scored as discussed in subsection 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Scoring"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 The track hypothesis that has the highest score provided that the score
 meets a minimum threshold is initialized into a new track as we will discuss
 in subsection 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Track-Initialization"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 In the case that there are multiple clusters, RANSAC is performed on each
 cluster.
 If a track is initialized, the measurements used to initialize the track
 are removed from the cluster.
\end_layout

\begin_layout Subsection
Generating Track Hypotheses
\begin_inset CommandInset label
LatexCommand label
name "subsec:Generating-Track-Hypotheses"

\end_inset


\end_layout

\begin_layout Standard
To create a track hypothesis 
\begin_inset Formula $x_{k}^{h}$
\end_inset

, we take a minimum subset of measurements 
\begin_inset Formula $Y^{c}$
\end_inset

 from the cluster where one measurement is from the current time step, and
 the other measurements are randomly sampled such that the system is observable.
 Using 
\begin_inset Formula $Y^{c}$
\end_inset

 we seek to solve the optimizaiton problem 
\begin_inset Formula 
\[
\underset{x_{k}}{\text{max}}p\left(Y^{c}\mid x_{k}^{h}\right),
\]

\end_inset

which is a maximum likelihood estimation problem that seeks to maximize
 the probability of the measurements 
\begin_inset Formula $Y^{c}$
\end_inset

 conditioned on 
\begin_inset Formula $x_{k}^{h}$
\end_inset

 by adjusting 
\begin_inset Formula $x_{k}^{h}$
\end_inset

.
 This optimization problem is equivalent to minimizing the log maximum likelihoo
d estimation (LMLE) problem 
\begin_inset Formula 
\begin{equation}
\underset{x_{k}}{\text{min}}-\log\left(p\left(Y^{c}\mid x_{k}\right)\right),\label{eq:OptimizationProblem}
\end{equation}

\end_inset

where we dropped the superscript 
\begin_inset Formula $h$
\end_inset

.
 Under the assumption that measurements are independent, they are also condition
aly independent which allows us to write the optimization problem 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:OptimizationProblem"
plural "false"
caps "false"
noprefix "false"

\end_inset

 as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\underset{x_{k}}{\text{min}}-\sum_{m=0}^{k}\sum_{y_{m}\in Y_{m}^{c}}\log\left(p\left(y_{m}\mid x_{k}\right)\right),
\]

\end_inset

where 
\begin_inset Formula $Y_{m}^{c}\subseteq Y^{c}$
\end_inset

 contians the measurements observed at time 
\begin_inset Formula $m$
\end_inset

 that are being used in the optimization scheme.
\end_layout

\begin_layout Standard
In order to solve the optimization problem, we need to invert the system
 model defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:system-model"
plural "false"
caps "false"
noprefix "false"

\end_inset

 so that we can estimate a previous state 
\begin_inset Formula $x_{m}$
\end_inset

 given the current state 
\begin_inset Formula $x_{k}$
\end_inset

.
 Ignoring the noise terms, we can propagate the pose of the system 
\begin_inset Formula $g_{m}$
\end_inset

 to 
\begin_inset Formula $g_{k}$
\end_inset

 by 
\begin_inset Formula 
\[
g_{k}=g_{m}\exp\left(\delta_{m:k}u\right).
\]

\end_inset

Solving for 
\begin_inset Formula $g_{m}$
\end_inset

 yields 
\begin_inset Formula 
\begin{align*}
g_{m} & =\exp^{-1}\left(\delta_{m:k}u\right)g_{k}\\
 & =\exp\left(-\delta_{m:k}u\right)g_{k}\\
 & =\exp\left(\delta_{k:m}u\right)g_{k}.
\end{align*}

\end_inset

Thus, the inverse of the system model 
\begin_inset Formula $f^{-1}\left(x_{k},w_{k},\delta_{k:m}\right)$
\end_inset

 is defined as 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{subequations}
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "eq:model_inverse"

\end_inset

 
\begin_inset Formula 
\begin{align}
g_{m} & =g_{k}\oplus\left(\delta_{k:m}u_{k}+\delta_{k:m}w_{k}^{g}+\frac{\delta_{k:m}^{2}}{2}w_{k}^{u}\right)\\
u_{m} & =u_{k}+\delta_{k:m}w_{k}^{u}.
\end{align}

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{subequations}
\end_layout

\end_inset

 and the estimated output at time 
\begin_inset Formula $m$
\end_inset

 is 
\begin_inset Formula 
\begin{equation}
\hat{y}_{m}=h\left(f^{-1},v_{m}\right),\label{eq:inverse_estimated_meas}
\end{equation}

\end_inset

where 
\begin_inset Formula $f^{-1}$
\end_inset

 denotes 
\begin_inset Formula $f^{-1}\left(x_{k},w_{k},\delta_{k:m}\right)$
\end_inset

.
 
\end_layout

\begin_layout Standard
Now that we can invert the model, we can calculate the probability 
\begin_inset Formula $p\left(y_{m}\mid x_{k}\right),$
\end_inset

 which is, according to the total probability theorm,
\begin_inset Formula 
\[
p\left(y_{m}\mid x_{k}\right)=\int_{\delta x_{m}}p\left(y_{m}\mid x_{m}\right)p\left(x_{m}\mid x_{k}\right)d_{\delta x_{m}}.
\]

\end_inset


\end_layout

\begin_layout Standard
We approximate this integral by linearizing 
\begin_inset Formula $p\left(y_{m}\mid x_{m}\right)$
\end_inset

 and 
\begin_inset Formula $p\left(x_{m}\mid x_{k}\right)$
\end_inset

 using a first order Taylor series;
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
p\left(x_{m}\mid x_{k}\right) & \approx\eta\exp\left(-\frac{1}{2}\left(\hat{x}_{m}\ominus f_{0}^{-1}+F_{k:m}^{-1}\delta x_{m}\right)^{\top}\right.\\
 & \left.\bar{Q}_{k:m}^{-1}\left(x_{m}\ominus f^{-1}+F_{k:m}^{-1}\delta x_{m}\right)\right)
\end{align*}

\end_inset


\begin_inset Formula 
\begin{align*}
p\left(y_{m}^{j}\mid x_{m}\right) & \approx\eta\exp\left(-\frac{1}{2}\left(y_{m}\ominus h\left(\hat{x}_{m},0\right)+H_{m}\delta x_{m}\right)^{\top}\right.\\
 & \left.\bar{R}_{m}^{-1}\left(y_{m}\ominus h\left(\hat{x}_{m},0\right)+H_{m}\delta x_{m}\right)\right)
\end{align*}

\end_inset

where 
\begin_inset Formula $f_{0}^{-1}=f^{-1}\left(x_{k},0,\delta_{k:m}\right)$
\end_inset

,
\begin_inset Formula 
\[
F_{k:m}^{-1}=\left.\frac{\partial x_{m}\ominus f^{-1}\left(x_{k},w_{k},\delta_{k:m}\right)}{\partial x_{m}}\right|_{\begin{array}{c}
x_{m}=\hat{x}_{m}\\
w_{k}=0
\end{array}},
\]

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{subequations}
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "eq:InverseTransitionFunctionJacobianNoise"

\end_inset


\begin_inset Formula 
\begin{align*}
G_{k:m} & =\left.\frac{\partial x_{m}\ominus f^{-1}\left(x_{k},w_{m},\delta_{k:m}\right)}{\partial w_{m}}\right|_{\begin{array}{c}
x_{m}=\hat{x}_{m}\\
w_{k}=0
\end{array}}\\
 & =\left.\frac{\partial\log\left(e\right)}{\partial e}\frac{\partial e}{\partial\left(f^{-1}\right)^{-1}}\frac{\partial\left(f^{-1}\right)^{-1}}{\partial f^{-1}}\frac{\partial f^{-1}}{\partial w_{m}}\right|_{\begin{array}{c}
x_{m}=\hat{x}_{m}\\
w_{k}=0
\end{array}}\\
 & =\left.J_{r}^{-1}\left(e\right)\text{Ad}\left(x_{m}\right)\left(-\text{Ad}\left(f^{-1}\right)\right)\frac{\partial f^{-1}}{\partial w_{m}}\right|_{\begin{array}{c}
x_{m}=\hat{x}_{m}\\
w_{k}=0
\end{array}}\\
 & =\left.\frac{\partial f^{-1}}{\partial w_{m}}\right|_{x_{m}=\hat{x}_{m},w_{m}=0}\\
 & =\begin{bmatrix}J_{r}\left(\delta_{k:m}u_{k}\right)\delta_{k:m} & J_{r}\left(\delta_{k:m}u_{k}\right)\frac{\delta_{k:m}^{2}}{2}\\
0 & I\delta_{k:m}
\end{bmatrix},
\end{align*}

\end_inset


\begin_inset Formula 
\begin{align}
e & =x_{m}\ominus f^{-1}\left(x_{k},w_{k},\delta_{k:m}\right),\nonumber \\
\bar{Q}_{k:m} & =G_{k:m}QG_{k:m}^{\top},\label{eq:inverse_prop_cov}\\
\bar{R}_{m} & =V_{m}RV_{m}^{\top},\label{eq:meas_cov}
\end{align}

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{subequations}
\end_layout

\end_inset


\begin_inset Formula $V_{m}$
\end_inset

 is defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:ObservationJacobianNoise"
plural "false"
caps "false"
noprefix "false"

\end_inset

, 
\begin_inset Formula $H_{m}$
\end_inset

 is defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:ObservationJacobianState"
plural "false"
caps "false"
noprefix "false"

\end_inset

 and 
\begin_inset Formula $\eta$
\end_inset

 is a normalizing coefficient which we overload.
 Note that we have left off the superscripts on 
\begin_inset Formula $V_{m}$
\end_inset

, 
\begin_inset Formula $H_{m}$
\end_inset

, and 
\begin_inset Formula $\bar{R}_{m}$
\end_inset

 indicating which measurement source they correspond to.
 
\end_layout

\begin_layout Standard
The above linearization serves two purposes: first, it keeps the integral
 a Gaussian distribution and it exposes the random variable 
\begin_inset Formula $\delta x_{m}$
\end_inset

 which we wish to integrate over.
\end_layout

\begin_layout Standard
We can choose 
\begin_inset Formula $\hat{x}_{m}$
\end_inset

 to be 
\begin_inset Formula $f^{-1}\left(x_{k},0,\delta_{k:m}\right)$
\end_inset

, since 
\begin_inset Formula $f^{-1}\left(x_{k},0,\delta_{k:m}\right)$
\end_inset

 is the mean of the linearized probability 
\begin_inset Formula $p\left(x_{m}\mid x_{k}\right)$
\end_inset

 and thus the most likely value.
 This allows us to simplify the linearized probability 
\begin_inset Formula $p\left(x_{m}\mid x_{k}\right)$
\end_inset

 to 
\begin_inset Formula 
\[
p\left(x_{m}\mid x_{k}\right)\approx\eta\exp\left(-\frac{1}{2}\delta x_{m}^{\top}\left(G_{k:m}QG_{k:m}^{\top}\right)^{-1}\delta x_{m}\right)
\]

\end_inset

since 
\begin_inset Formula $\hat{x}_{m}\ominus f^{-1}\left(x_{k},0,\delta_{k:m}\right)=0$
\end_inset

 and 
\begin_inset Formula $F_{k:m}^{-1}=I$
\end_inset

.
 
\end_layout

\begin_layout Standard
Multiplying the two linearized probabilities together yields 
\begin_inset Formula 
\begin{align*}
p\left(y_{m}\mid x_{m}\right)p\left(x_{m}\mid x_{k}\right)\approx & \eta\int_{\delta x_{m}}\exp\left(-L_{m}\right)d\delta x_{m}
\end{align*}

\end_inset

with 
\begin_inset Formula 
\begin{align*}
L_{m} & =\frac{1}{2}\delta x_{m}^{\top}\bar{Q}_{k:m}^{-1}\delta x_{m}+\frac{1}{2}\left(y_{m}\ominus h\left(\hat{x}_{m},0\right)+H_{m}\delta x_{m}\right)^{\top}\\
 & \bar{R}_{m}^{-1}\left(y_{m}\ominus h\left(\hat{x}_{m},0\right)+H_{m}\delta x_{m}\right).
\end{align*}

\end_inset

In order to solve the integral, we decompose 
\begin_inset Formula $L_{m}$
\end_inset

 into two functions 
\begin_inset Formula $L_{m}\left(x_{k},\delta x_{m}\right)+L_{m}\left(x_{k}\right)$
\end_inset

 where the first function depends on 
\begin_inset Formula $x_{k}$
\end_inset

 and 
\begin_inset Formula $\delta x_{m}$
\end_inset

 and the latter function only depends on 
\begin_inset Formula $x_{k}$
\end_inset

.
 This will allow us to move the latter function out of the integral so that
 we have 
\begin_inset Formula 
\begin{align*}
\int_{\delta x_{m}}\exp\left(-L_{m}\right)d\delta x_{m} & =\eta\exp\left(-L_{m}\left(x_{k}\right)\right)\\
 & \int\exp\left(-L_{m}\left(x_{k},\delta x_{m}\right)\right)d\delta x_{m}
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
By constructing 
\begin_inset Formula $L_{m}\left(x_{k},\delta x_{m}\right)$
\end_inset

 to be quadratic in 
\begin_inset Formula $\delta x_{m}$
\end_inset

 so that 
\begin_inset Formula $\exp\left(-L_{m}\left(x_{k},\delta x_{m}\right)\right)$
\end_inset

 is a Gaussian distribution, the integral would be a constant, 
\begin_inset Formula $c$
\end_inset

,
\begin_inset Formula 
\[
\int\exp\left(-L_{m}\left(x_{k},\delta x_{m}\right)\right)d\delta x_{m}=c,
\]

\end_inset

regardles of 
\begin_inset Formula $\delta x_{m}$
\end_inset

.
 This allows us to absorb the constant integral into 
\begin_inset Formula $\eta$
\end_inset

 such that 
\begin_inset Formula 
\[
p\left(y_{m}\mid x_{m}\right)p\left(x_{m}\mid x_{k}\right)\approx\eta\exp\left(-L_{m}\left(x_{k}\right)\right).
\]

\end_inset


\end_layout

\begin_layout Standard
To construct 
\begin_inset Formula $L_{m}\left(x_{k},\delta x_{m}\right)$
\end_inset

, we take the first and second derivative of 
\begin_inset Formula $L_{m}$
\end_inset

 w.r.t.
 
\begin_inset Formula $\delta x_{m}$
\end_inset

 to get
\begin_inset Formula 
\begin{align*}
\frac{\partial L_{m}}{\delta x_{m}} & =\delta x_{m}^{\top}\bar{Q}_{k:m}^{-1}\\
 & +y_{m}\ominus h\left(\hat{x}_{m},0\right)^{\top}\bar{R}_{m}^{-1}H_{m}+\delta x_{m}^{\top}H_{m}^{\top}\bar{R}^{-1}H_{m}\\
\frac{\partial^{2}L_{m}}{\delta x_{m}^{2}} & =H_{m}^{\top}\bar{R}_{m}^{-1}H_{m}+\bar{Q}_{k:m}^{-1}\\
 & =\Psi^{-1}
\end{align*}

\end_inset

Setting the first derivative to zero and solving for 
\begin_inset Formula $\delta x_{m}$
\end_inset

 gives us
\begin_inset Formula 
\begin{align*}
\delta x_{m}^{\top}\Psi^{-1} & =-y_{m}\ominus h\left(\hat{x}_{m},0\right)^{\top}\bar{R}_{m}^{-1}H_{m}\\
\delta x_{m} & =-\Psi\left(H_{m}^{\top}\bar{R}_{m}^{-1}y_{m}\ominus h\left(\hat{x}_{m},0\right)\right).
\end{align*}

\end_inset

We can now define the quadratic function 
\begin_inset Formula $L_{m}\left(x_{k},\delta x_{m}\right)$
\end_inset

 as 
\begin_inset Formula 
\begin{align*}
L_{m}\left(x_{k},\delta x_{m}\right) & =\frac{1}{2}\left(\delta x_{m}+\Psi\left(H_{m}^{\top}\bar{R}_{m}^{-1}y_{m}\ominus h\left(\hat{x}_{m},0\right)\right)\right)^{\top}\\
 & \Psi^{-1}\left(\delta x_{m}+\Psi\left(H_{m}^{\top}\bar{R}_{m}^{-1}y_{m}\ominus h\left(\hat{x}_{m},0\right)\right)\right)
\end{align*}

\end_inset

and solve for 
\begin_inset Formula $L_{m}\left(x_{k}\right)=L_{m}-L_{m}\left(x_{k},x_{m}\right)$
\end_inset


\begin_inset Formula 
\begin{align*}
L_{m}\left(x_{k}\right) & =\frac{1}{2}\delta x_{m}^{\top}\bar{Q}^{-1}\delta x_{m}\\
 & +\frac{1}{2}\left(y_{m}\ominus h\left(\hat{x}_{m},0\right)+H_{m}\delta x_{m}\right)^{\top}\\
 & \bar{R}_{m}^{-1}\left(y_{m}\ominus h\left(\hat{x}_{m},0\right)+H_{m}\delta x_{m}\right)\\
 & -\frac{1}{2}\left(\delta x_{m}+\Psi\left(H_{m}^{\top}\bar{R}_{m}^{-1}y_{m}\ominus h\left(\hat{x}_{m},0\right)\right)\right)^{\top}\\
 & \Psi^{-1}\left(\delta x_{m}+\Psi\left(H_{m}^{\top}\bar{R}_{m}^{-1}y_{m}\ominus h\left(\hat{x}_{m},0\right)\right)\right).
\end{align*}

\end_inset

With algebraic manipulation, using the Inversion Lemma in 
\begin_inset CommandInset citation
LatexCommand cite
key "Thrun2006"
literal "false"

\end_inset

 and substituting in 
\begin_inset Formula $f_{0}^{-1}$
\end_inset

 for 
\begin_inset Formula $\hat{x}_{m}$
\end_inset

 we get
\begin_inset Formula 
\begin{align*}
L_{m}\left(x_{k}\right) & =\frac{1}{2}y_{m}\ominus h\left(f_{0}^{-1},0\right)^{\top}\\
 & S_{k:m}^{-1}y_{m}\ominus h\left(f_{0}^{-1},0\right),
\end{align*}

\end_inset

where 
\begin_inset Formula 
\begin{equation}
S_{k:m}=\bar{R}_{m}+H_{m}\bar{Q}_{k:m}H_{m}^{\top}.\label{eq:inverse_innov_cov}
\end{equation}

\end_inset

Since 
\begin_inset Formula $L_{m}$
\end_inset

 is independent of 
\begin_inset Formula $\delta x_{m}$
\end_inset

, 
\begin_inset Formula 
\begin{align*}
p\left(y_{m}^{j}\mid x_{k}\right) & =\int_{x_{m}}p\left(y_{m}\mid x_{m}\right)p\left(x_{m}\mid x_{k}\right)d_{x_{m}}\\
 & \approx\eta\exp\left(-L_{m}\left(x_{k}\right)\right).
\end{align*}

\end_inset

and the approximated LMLE is 
\begin_inset Formula 
\[
\underset{x_{k}}{\text{min}}\sum_{m=0}^{k}\sum_{j=1}^{N_{m}}L_{m}^{j}\left(x_{k}\right),
\]

\end_inset

where 
\begin_inset Formula $N_{m}$
\end_inset

 is the number of measurements at time step 
\begin_inset Formula $m$
\end_inset

.
 To calculate another track hypothesis 
\begin_inset Formula $x_{k}^{h}$
\end_inset

, we would repeat the optimization scheme with a different random subset.
 
\end_layout

\begin_layout Standard
There are many methods that can be used to solve the optimization problem.
 If the system is linear, the optimization problem reduces to the one described
 in 
\begin_inset CommandInset citation
LatexCommand cite
key "Niedfeldt2014a"
literal "true"

\end_inset

.
 If the system is non-linear, the optimization problem can be solved using
 the Gauss-newton method or some other optimization method.
 
\end_layout

\begin_layout Subsection
Track Hypothesis Scoring
\begin_inset CommandInset label
LatexCommand label
name "subsec:Scoring"

\end_inset


\end_layout

\begin_layout Standard
Once a track hypothesis is generated, we score it according to its inliers.
 Inliers are measurements that support the hypothetical track.
 To determine if a measurement is an inlier, we use a very similar idea
 as the validation region discussed in subsection 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Data-Association"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 The only difference is that we create the validation regions not only at
 the current time step but at previous ones also.
 We will ignore the derivation, since it is similar to subsection 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Data-Association"
plural "false"
caps "false"
noprefix "false"

\end_inset

, and present the definition.
 
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $S_{k:m}^{s}$
\end_inset

 be the innovation covariance of source 
\begin_inset Formula $s$
\end_inset

 defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:inverse_innov_cov"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 We defined a metric 
\begin_inset Formula $d_{I}:N\times N\to\mathbb{R}$
\end_inset

 on the measurement space 
\begin_inset Formula 
\[
d_{I}\left(y_{m},\hat{y}_{m}\right)=\left(y_{m}\ominus\hat{y}_{m}\right)^{\top}\left(S_{k:m}^{s}\right)^{-1}\left(y_{m}\ominus\hat{y}_{m}\right),
\]

\end_inset

where 
\begin_inset Formula $y_{m}$
\end_inset

 is a measurement, from time 
\begin_inset Formula $m$
\end_inset

, in the cluster from which the hypothetical track was generated, and 
\begin_inset Formula $\hat{y}_{m}$
\end_inset

 is the estimated measurement defined in 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:inverse_estimated_meas"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 The measurement 
\begin_inset Formula $y_{m}$
\end_inset

 is an inlier if 
\begin_inset Formula 
\[
d_{I}\left(y_{m}^{j},\hat{y}_{m}\right)<\tau_{I},
\]

\end_inset

where 
\begin_inset Formula $\tau_{I}$
\end_inset

 is an inlier threshold similar in function to the gate threshold discussed
 in subsection 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Data-Association"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 This similarity allows us to calcuated 
\begin_inset Formula $\tau_{I}$
\end_inset

 based on a probability 
\begin_inset Formula $P_{I}$
\end_inset

 which we call the probability of being an inlier.
 The score of a track hypothesis is the number of times a measurement source
 produced an inlier at a certain time step.
 This means that if a source produced multiple inliers at time 
\begin_inset Formula $m$
\end_inset

, the score would only increase by 
\begin_inset Formula $1$
\end_inset

 since we assume that at most only one of the measurements originated from
 the target.
\end_layout

\begin_layout Subsection
Track Initialization 
\begin_inset CommandInset label
LatexCommand label
name "subsec:Track-Initialization"

\end_inset


\end_layout

\begin_layout Standard
RANSAC generates up to 
\begin_inset Formula $\ell$
\end_inset

 hypothetical tracks.
 If the score of a hypothetical track reaches the threshold 
\begin_inset Formula $\tau_{RE}$
\end_inset

, then RANSAC terminates generating hypothetical tracks and initializes
 a track with that hypothetical track.
 Othewise, RANSAC uses the best hypotetical track (provided that the hypothetica
l track has a minimum score of 
\begin_inset Formula $\tau_{RM}$
\end_inset

) to initialize a new track.
 
\end_layout

\begin_layout Standard
To initialize a track, we propagate 
\begin_inset Formula $x_{k}^{h}$
\end_inset

 back in time to the oldest time step of an inlier measurement denoted 
\begin_inset Formula $x_{n}^{h}$
\end_inset

, and initialize the error covariance 
\begin_inset Formula $P_{n}$
\end_inset

.
 Using the PDAF, we propgate and update 
\begin_inset Formula $x_{n}^{h}$
\end_inset

 using it's inliers to procude a current estimate 
\begin_inset Formula $x_{k}$
\end_inset

 and error covariance 
\begin_inset Formula $P_{k}$
\end_inset

.
 This process is called filtering.
 The inliers are also used to calculate the model likelihood.
 Once the track is initialized, the inliers are added to the track's consensus
 set.
 
\end_layout

\begin_layout Section
LMLE Simplification 
\begin_inset CommandInset label
LatexCommand label
name "sec:LMLE-Simplification"

\end_inset


\end_layout

\begin_layout Standard
The optimization problem defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:OptimizationProblem"
plural "false"
caps "false"
noprefix "false"

\end_inset

 can be computationally expensive if the system is nonlinear.
 The purpose of the optimization problem is to generate a hypothetical track
 
\begin_inset Formula $x_{k}^{h}$
\end_inset

 which is later refined using its inlieries via filtering.
 So the hypothetical track produced by the LMLE doesn't have to be super
 refined; therefore, we can simplify the optimization process in different
 ways.
 
\end_layout

\begin_layout Standard
Let's assume that the pose of the system is measurable.
 In other words, your observation model 
\begin_inset Formula $h$
\end_inset

 is defined as 
\begin_inset Formula 
\[
h\left(x_{k},v_{k}\right)=g_{k}\exp\left(v_{k}\right),
\]

\end_inset

thus
\begin_inset Formula 
\[
y_{k}=g_{k}\exp\left(v_{k}\right).
\]

\end_inset


\end_layout

\begin_layout Standard
When generating a track hypothesis, we always use a measurement from the
 current time.
 We can use this measurement as the estimated pose 
\begin_inset Formula $g_{k}$
\end_inset

.
 All that remains is estimating the velocity term 
\begin_inset Formula $u_{k}$
\end_inset

 using one other measurement 
\begin_inset Formula $y_{m}$
\end_inset

 where 
\begin_inset Formula $m<k$
\end_inset

.
 Under the assumption that 
\begin_inset Formula $g_{k}$
\end_inset

 is the true current state, the measurement 
\begin_inset Formula $y_{m}$
\end_inset

 is 
\begin_inset Formula 
\[
y_{m}=g_{k}\exp\left(\delta_{k:m}u_{k}+\delta_{k:m}w_{k}^{g}+\frac{\delta_{k:m}^{2}}{2}w_{k}^{u}\right)\exp\left(v_{m}\right),
\]

\end_inset

which can be approximated as 
\begin_inset Formula 
\[
y_{m}\approx g_{k}\exp\left(\delta_{k:m}u_{k}+\delta_{k:m}w_{k}^{g}+\frac{\delta_{k:m}^{2}}{2}w_{k}^{u}+v_{m}\right)
\]

\end_inset

By calculating the error between the measurement and the current state we
 get 
\begin_inset Formula 
\begin{align*}
y_{m}\ominus g_{k} & =\log\left(g_{k}^{-1}y_{m}\right)\\
e_{k:m} & \approx\delta_{k:m}u_{k}+\delta_{k:m}w_{k}^{g}+\frac{\delta_{k:m}^{2}}{2}w_{k}^{u}+v_{m}.
\end{align*}

\end_inset

The expected value of 
\begin_inset Formula $e_{k:m}$
\end_inset

 is 
\begin_inset Formula 
\[
\text{E}\left[e_{k:m}\right]=\delta_{k:m}u_{k},
\]

\end_inset

and the covariance is 
\begin_inset Formula 
\begin{align*}
\text{cov}\left[e_{k:m}\right] & \approx\delta_{k:m}^{2}Q^{g}+\frac{\delta_{k:m}^{4}}{4}Q^{u}+R\\
 & =S_{k:m}
\end{align*}

\end_inset

where 
\begin_inset Formula 
\[
Q=\begin{bmatrix}Q^{g} & 0\\
0 & Q^{u}
\end{bmatrix}.
\]

\end_inset

We can simply estimate 
\begin_inset Formula $u_{k}$
\end_inset

 by letting 
\begin_inset Formula $u_{k}=e_{k:m}/\delta_{k:m}$
\end_inset

.
 We can enhance the estimate using multiple measurements.
 Let 
\begin_inset Formula $\chi$
\end_inset

 be an index set such that 
\begin_inset Formula $\cup_{m\in\chi}\left\{ y_{m}\right\} $
\end_inset

 is the set of measurements we will use to estimate 
\begin_inset Formula $u_{k}$
\end_inset

, then 
\begin_inset Formula 
\[
u_{k}=\left(\sum_{j\in\Lambda}\delta_{k:j}S_{k:j}^{-1}\right)^{-1}\left(\sum_{j\in\Lambda}S_{k:j}^{-1}e_{k:j}\right).
\]

\end_inset

We can simplify the estimation further by setting the covariance terms to
 identity which yields 
\begin_inset Formula 
\[
u_{k}=\frac{1}{\left|\chi\right|}\sum_{j\in\Lambda}e_{k:j}.
\]

\end_inset


\end_layout

\begin_layout Standard
Another possible simplification for any approach is by setting 
\begin_inset Formula $S_{k:m}^{s}$
\end_inset

 defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:inverse_innov_cov"
plural "false"
caps "false"
noprefix "false"

\end_inset

 to identity in the optimization problem 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:OptimizationProblem"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
We propose this simplification because computing the covariance 
\begin_inset Formula $S_{k:m}^{s}$
\end_inset

 can be computationally costly when it has to be done thousands of times
 whenever RANSAC is performed.
 
\end_layout

\begin_layout Standard
If you want the estimation to be as accurate as possible, we suggest you
 use the simplified approaches to seed the original optimization problem
 unless the system is linear since the original optimization problem is
 already simple.
 
\end_layout

\begin_layout Section
Examples 
\begin_inset CommandInset label
LatexCommand label
name "sec:Examples"

\end_inset


\end_layout

\begin_layout Standard
In this section we provide three examples of increasing complexity.
 The first example is to show how Lie group framework of R-RANSAC applies
 to Euclidean spaces of 
\begin_inset Formula $\mathbb{R}^{n}$
\end_inset

 with 
\begin_inset Formula $n\in\mathbb{N}$
\end_inset

.
 The second example applies R-RANSAC to tracking targets on an image plane,
 and the third example applies R-RANSAC to tracking UAVs using radar sensors.
 
\end_layout

\begin_layout Subsection
Euclidean Space 
\begin_inset Formula $\mathbb{R}^{n}$
\end_inset


\end_layout

\begin_layout Standard
This is a brief section to show how the Lie group theory applies to Euclidean
 spaces of 
\begin_inset Formula $\mathbb{R}^{n}$
\end_inset

, where 
\begin_inset Formula $n\in\mathbb{N}$
\end_inset

, equipped with the standard topology and the group operation of addition.
 Its corresponding Lie algebra is 
\begin_inset Formula $\mathbb{R}^{n}$
\end_inset

, and the adjoint, exponential, and left and right Jacobians are the identity
 map.
 The box plus/minus and o plus/minus mapping are trivially derived; for
 example
\begin_inset Formula 
\begin{align*}
g\oplus u & =g+u\\
g_{1}\ominus g_{2} & =g_{1}-g_{2}
\end{align*}

\end_inset

where 
\begin_inset Formula $g,g_{1},g_{2}\in G=\mathbb{R}^{2}$
\end_inset

 and 
\begin_inset Formula $u\in\mathfrak{g}=\mathbb{R}^{2}$
\end_inset

.
\end_layout

\begin_layout Standard
We can write the system model as 
\begin_inset Formula 
\begin{align*}
g_{k} & =g_{k^{-}}+\delta_{k}\left(u_{k^{-}}+w_{k}^{g}\right)+\frac{\delta_{k}^{2}}{2}w_{k}^{u}\\
u_{k} & =u_{k^{-}}+\delta_{k}w_{k}^{u}\\
y_{k} & =g_{k}+v_{k},
\end{align*}

\end_inset


\begin_inset Formula 
\begin{align*}
G_{k:m} & =\left.\frac{\partial x_{m}\ominus f^{-1}\left(x_{k},w_{m},\delta_{k:m}\right)}{\partial w_{m}}\right|_{x_{m}=\hat{x}_{m},w_{m}=0}\\
 & =\left.\frac{\partial\log\left(e\right)}{\partial e}\frac{\partial e}{\partial\left(f^{-1}\right)^{-1}}\frac{\partial\left(f^{-1}\right)^{-1}}{\partial f^{-1}}\frac{\partial f^{-1}}{\partial w_{m}}\right|_{x_{m}=\hat{x}_{m},w_{m}=0}\\
 & =\left.J_{r}^{-1}\left(e\right)\text{Ad}\left(x_{m}\right)\left(-\text{Ad}\left(f^{-1}\right)\right)\frac{\partial f^{-1}}{\partial w_{m}}\right|_{x_{m}=\hat{x}_{m},w_{m}=0}\\
 & =\left.I\frac{\partial f^{-1}}{\partial w_{m}}\right|_{x_{m}=\hat{x}_{m},w_{m}=0},\\
\frac{\partial f^{-1}}{\partial w_{m}} & =\begin{bmatrix}J_{r}\left(\delta_{k:m}u_{k}\right)\delta_{k:m} & J_{r}\left(\delta_{k:m}u_{k}\right)\frac{\delta_{k:m}^{2}}{2}\\
0 & I\delta_{k:m}
\end{bmatrix},\\
e & =x_{m}\ominus f^{-1}\left(x_{k},w_{k},\delta_{k:m}\right),
\end{align*}

\end_inset

We can write this in the familiar matrix notation as 
\begin_inset Formula 
\begin{align*}
x_{k} & =A_{k}x_{k^{-}}+B_{k}w_{k}\\
y_{k} & =Cx_{k}+v_{k}
\end{align*}

\end_inset

where 
\begin_inset Formula $x_{k}=\left[g_{k}^{\top},u_{k}^{\top}\right]^{\top}$
\end_inset

,
\begin_inset Formula 
\begin{align*}
A_{k}=\begin{bmatrix}I & \delta_{k}I\\
0 & I
\end{bmatrix}, & \thinspace & B_{k}=\begin{bmatrix}\delta_{k}I & \frac{\delta_{k}^{2}}{2}I\\
0 & \delta_{k}I
\end{bmatrix},
\end{align*}

\end_inset

and 
\begin_inset Formula 
\[
C=\begin{bmatrix}I_{2\times2} & 0_{2\times2}\end{bmatrix}.
\]

\end_inset

In this form, we can easily recognize it as an linear time-invariant system
 with near constant velocity.
\end_layout

\begin_layout Standard
The Jacobians are easily computed and are 
\begin_inset Formula $F_{k}=A_{k}$
\end_inset

, 
\begin_inset Formula $G_{k}=B_{k}$
\end_inset

 , 
\begin_inset Formula $H_{k}=C$
\end_inset

, 
\begin_inset Formula $F_{k:m}=CA_{k:m}$
\end_inset

, and 
\begin_inset Formula $G_{k:m}=CB_{k:m}$
\end_inset

.
 For linear systems, the LMLE simplifies to a least squares problem.
 This type of system used with R-RANSAC is thoroughly discussed in 
\begin_inset CommandInset citation
LatexCommand cite
key "Niedfeldt2014a"
literal "true"

\end_inset

.
\end_layout

\begin_layout Subsection
Constrained Problem for 
\begin_inset Formula $SE\left(2\right)$
\end_inset

: Tracking in the Image Plane 
\begin_inset CommandInset label
LatexCommand label
name "subsec:tracking_image_plane"

\end_inset

 
\end_layout

\begin_layout Standard
NOTE: THIS WOULD BE BETTER IF TRACKING WAS DONE IN THE VIRTUAL IMAGE PLANE
 SINCE THE VIP IS PARALLEL TO THE GROUND, THUS THE MOTION WOULD REALLY BE
 SE2
\end_layout

\begin_layout Standard
Suppose we have a camera mounted on a UAV tracking a moving target that
 is restricted to a planar surface.
 The global frame is the current image frame, and the measurements are point
 measurements, i.e.
 pixels.
 In this case, the LSR and the GSR are the same.
 The volume of the LSR is the total number of pixels.
 Since the UAV is moving, the global frame is also moving.
 This means that we must provide a transformation 
\begin_inset Formula $T$
\end_inset

 so that we can transform all measurements, state estimates and error covariance
s to the current global frame.
 We do this using the Homography 
\begin_inset CommandInset citation
LatexCommand cite
key "Ma"
literal "true"

\end_inset

 and the method described in 
\begin_inset CommandInset citation
LatexCommand cite
key "White2019"
literal "true"

\end_inset

.
\end_layout

\begin_layout Standard
The Lie group configuration of a target moving in the image plane is 
\begin_inset Formula $SE\left(2\right)$
\end_inset

, see appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:SE2"

\end_inset

 for the system function and important Jacobians.
 Let 
\begin_inset Formula $g_{k}\in SE\left(2\right)$
\end_inset

 and 
\begin_inset Formula $u_{k}\in\mathfrak{se}\left(2\right)$
\end_inset

.
 They can be written as 
\begin_inset Formula 
\begin{align*}
g_{k} & =\begin{bmatrix}R_{k} & t_{k}\\
0_{1\times2} & 1
\end{bmatrix}\\
u_{k} & =\begin{bmatrix}\omega_{k} & \rho_{k}\\
0_{1\times2} & 1
\end{bmatrix},
\end{align*}

\end_inset

where 
\begin_inset Formula $R_{k}\in SO\left(2\right)$
\end_inset

, 
\begin_inset Formula $\omega_{k}\in\mathfrak{se}\left(2\right)$
\end_inset

, and 
\begin_inset Formula $t_{k},\rho_{k}\in\mathbb{R}^{2}$
\end_inset

.
 The observation model is 
\begin_inset Formula 
\begin{align*}
y_{k} & =h\left(x_{k},v_{k}\right)\\
 & =t_{k}+v_{k},
\end{align*}

\end_inset

where 
\begin_inset Formula $y_{k}\in\mathbb{R}^{2}$
\end_inset

.
 The inverse observation model is 
\begin_inset Formula 
\begin{align*}
y_{m} & =h\left(f^{-1}\left(x_{k},\delta_{k:m},w_{k}\right),v_{k}\right)\\
 & =R_{k}J_{l}\left(\delta_{k:m}\left(\omega_{k}+w_{k}^{R}\right)+\frac{\delta_{k:m}^{2}w_{k}^{\omega}}{2}\right)\left(\delta_{k:m}\left(\rho_{k}+w_{k}^{\rho}\right)\right)\\
 & +t_{k}+w_{k}^{t}+v_{m},
\end{align*}

\end_inset

where 
\begin_inset Formula $w_{k}=\left[\left(w_{k}^{t}\right)^{\top},\left(w_{k}^{R}\right)^{\top},\left(w_{k}^{\rho}\right)^{\top},\left(w_{k}^{u}\right)^{\top}\right]^{\top}$
\end_inset

 and 
\begin_inset Formula $J_{l}$
\end_inset

 is the left Jacobian of 
\begin_inset Formula $SO\left(2\right)$
\end_inset

 defined in equation 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:se2_v"

\end_inset

.
 Based on the observation model, we have three Jacobians to compute: 
\begin_inset Formula $G_{k:m}$
\end_inset

, 
\begin_inset Formula $H_{k:m}$
\end_inset

 and 
\begin_inset Formula $V_{m}$
\end_inset

.
 
\begin_inset Formula 
\begin{align*}
H_{k:m}=\frac{\partial h\left(f^{-1},v_{k}\right)}{\partial x} & =\begin{bmatrix}H_{k:m}^{t} & H_{k:m}^{R} & H_{k:m}^{\rho} & H_{k:m}^{\omega}\end{bmatrix},
\end{align*}

\end_inset

where
\begin_inset Formula 
\begin{align*}
H_{k:m}^{t}=\frac{\partial h\left(f^{-1},v_{k}\right)}{\partial t_{k}} & =R_{k}\\
H_{k:m}^{R}=\frac{\partial h\left(f^{-1},v_{k}\right)}{\partial R} & =\delta_{k:m}R_{k}\left[1\right]_{\times}J_{l}\left(\delta_{k:m}\omega\right)\rho\\
H_{k:m}^{\rho}=\frac{\partial h\left(f^{-1},v_{k}\right)}{\partial\rho} & =\delta_{k:m}^{2}R_{k}J_{l}\left(\delta_{k:m}\omega\right)\\
H_{k:m}^{\omega}=\frac{\partial h\left(f^{-1},v_{k}\right)}{\partial\omega} & =\delta_{k:m}^{2}R_{k}J_{l}^{'}\left(\delta_{k:m}\omega\right)\rho
\end{align*}

\end_inset

and 
\begin_inset Formula 
\[
J_{l}^{'}\left(\omega\right)=\frac{\cos\left(\theta\right)\theta-\sin\left(\theta\right)}{\theta^{2}}I+\frac{\sin\left(\theta\right)\theta-\left(1-\cos\left(\theta\right)\right)}{\theta^{2}}\left[1\right]_{\times}.
\]

\end_inset

We quickly note that 
\begin_inset Formula 
\[
H_{k}=H_{k:k}=\begin{bmatrix}I & 0_{2\times4}\end{bmatrix}.
\]

\end_inset


\begin_inset Formula 
\[
G_{k:m}=\frac{\partial h\left(f^{-1},v_{k}\right)}{\partial w_{k}}=\begin{bmatrix}G_{k:m}^{t} & G_{k:m}^{R} & G_{k:m}^{\rho} & G_{k:m}^{\omega}\end{bmatrix},
\]

\end_inset

where 
\begin_inset Formula 
\begin{align*}
G_{k:m}^{t} & =\frac{\partial h\left(f^{-1},v_{k}\right)}{\partial w_{k}^{t}}=I\\
G_{k:m}^{R} & =\frac{\partial h\left(f^{-1},v_{k}\right)}{\partial w_{k}^{R}}=\delta_{k:m}^{2}R_{k}V^{'}\left(\delta_{k:m}\omega\right)\rho\\
G_{k:m}^{\rho} & =\frac{\partial h\left(f^{-1},v_{k}\right)}{\partial w_{k}^{\rho}}=\delta_{k:m}^{2}R_{k}V\left(\delta_{k:m}\omega\right)\\
G_{k:m}^{\omega} & =\frac{\partial h\left(f^{-1},v_{k}\right)}{\partial w_{k}^{\omega}}=\frac{\delta_{k:m}^{3}}{2}R_{k}V^{'}\left(\delta_{k:m}\omega\right)\rho.
\end{align*}

\end_inset

Lastly 
\begin_inset Formula $V_{m}=I$
\end_inset

.
\end_layout

\begin_layout Standard
Now that we have the Jacobians computed, we need to ensure that the system
 is observable.
 Since the system is nonlinear, the best we can do is ensure local observability.
 Given measurements from three different time steps, the observability matrix
 is 
\begin_inset Formula 
\[
\mathcal{O}=\begin{bmatrix}H_{k:m_{1}}\\
H_{k:m_{2}}\\
H_{k:m_{3}}
\end{bmatrix}.
\]

\end_inset

The observability matrix is not full rank.
 However, since we are interested in tracking the target we only need to
 be able to estimate the position of the target.
 To do this, we consider two configurations for a constant velocity system.
 In the first configuration the target has a circular trajectory.
 In this case we add the constraints that the target's heading is oriented
 along the body frame velocity, that 
\begin_inset Formula $\rho=\left[\rho_{x},0\right]^{\top}$
\end_inset

, 
\begin_inset Formula $\rho_{x}>0$
\end_inset

 and 
\begin_inset Formula $\omega\neq0$
\end_inset

.
 Using these constraints, the system is observable.
 In the second configuration the target is moving in a straight line.
 In this configuration we impose the same constraints as in the first configurat
ion except that 
\begin_inset Formula $\omega=0$
\end_inset

.
 Under these constraints the system is observable.
 We can identify which configuration the target is in by looking at three
 different measurements from different times.
 If the three measurement do not form a line, then the system has first
 constrains; otherwise, the latter.
\end_layout

\begin_layout Standard
To improve the LMLE used to estimate the current state, we can seed it as
 follows.
 Let 
\begin_inset Formula $y_{k}$
\end_inset

, 
\begin_inset Formula $y_{m}$
\end_inset

, and 
\begin_inset Formula $y_{n}$
\end_inset

 be three measurements taken at different times.
 Since we observe the position of the target, we can approximate the position
 of the target at time 
\begin_inset Formula $k$
\end_inset

, 
\begin_inset Formula $m$
\end_inset

, and 
\begin_inset Formula $n$
\end_inset

 as 
\begin_inset Formula $t_{k}=y_{k}$
\end_inset

, 
\begin_inset Formula $t_{m}=y_{m}$
\end_inset

 and 
\begin_inset Formula $t_{n}=y_{n}$
\end_inset

.
 Using these estimated positions, we can numerically approximate the derivative
 as 
\begin_inset Formula 
\begin{align*}
\dot{t}_{k} & =\frac{t_{m}-t_{k}}{\delta_{k:m}},\\
\dot{t}_{m} & =\frac{t_{n}-t_{m}}{\delta_{n:m}}
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
Using the constraint that the heading of the UAS is aligned with the translation
al velocity, we get that 
\begin_inset Formula 
\[
R=\frac{1}{\left\Vert \dot{t}_{k}\right\Vert }\begin{bmatrix}\dot{t}_{k_{x}} & -\dot{t}_{k_{y}}\\
\dot{t}_{k_{y}} & \dot{t}_{k_{x}}
\end{bmatrix}
\]

\end_inset

where 
\begin_inset Formula 
\[
\dot{t}_{k}=\begin{bmatrix}\dot{t}_{k_{x}}\\
\dot{t}_{k_{y}}
\end{bmatrix},
\]

\end_inset

and that 
\begin_inset Formula 
\[
\rho_{k}=\begin{bmatrix}\left\Vert \dot{t}_{k}\right\Vert \\
0
\end{bmatrix}.
\]

\end_inset

Note that 
\begin_inset Formula 
\[
\dot{t}_{m}=R_{k}\exp\left(\delta_{k:m}\dot{\theta}_{k}\right)\rho_{k},
\]

\end_inset

where 
\begin_inset Formula $\dot{\theta}_{k}$
\end_inset

 is the angular velocity.
 Let 
\begin_inset Formula 
\begin{align*}
z & =R_{k}^{\top}\dot{t}_{m}/\rho_{k}\\
 & =\left[z_{x},z_{y}\right]^{\top},
\end{align*}

\end_inset

then 
\begin_inset Formula 
\[
\dot{\theta}_{k}=\text{atan2}\left(z_{y},z_{x}\right)/\delta_{k:m}
\]

\end_inset

These estimates can then be used to seed the LMLE during the RANSAC step
 of the algorithm.
\end_layout

\begin_layout Standard

\series bold
Hardware Results
\end_layout

\begin_layout Subsection
Constrained Problem for SE
\begin_inset Formula $\left(3\right)$
\end_inset

: Tracking UAVs with Radar
\end_layout

\begin_layout Standard
In this example the objective is to track multiple fixed wing aircrafts
 (FWAs) that are in the GSR and whose configuration manifold is 
\begin_inset Formula $SE$
\end_inset


\begin_inset Formula $\left(3\right)$
\end_inset

.
 The FWA are observed via multiple fixed radar sensors with overlapping
 LSR which produce point measurements.
 See appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:SE3"

\end_inset

 for the FWAs' system function and important Jacobians.
 
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $g_{k}\in SE\left(3\right)$
\end_inset

 and 
\begin_inset Formula $u_{k}\in\mathfrak{se}\left(3\right)$
\end_inset

.
 These elements can be written as 
\begin_inset Formula 
\begin{align*}
g_{k} & =\begin{bmatrix}R_{k} & t_{k}\\
0_{1\times2} & 1
\end{bmatrix}\\
u_{k} & =\begin{bmatrix}\omega_{k} & \rho_{k}\\
0_{1\times2} & 1
\end{bmatrix},
\end{align*}

\end_inset

where 
\begin_inset Formula $R_{k}\in SO\left(3\right)$
\end_inset

, 
\begin_inset Formula $\omega_{k}\in\mathfrak{so}\left(3\right)$
\end_inset

, and 
\begin_inset Formula $t_{k},\rho_{k}\in\mathbb{R}^{3}$
\end_inset

.
 The observation model is 
\begin_inset Formula 
\begin{align*}
y_{k} & =h\left(x_{k},v_{k}\right)\\
 & =t_{k}+v_{k},
\end{align*}

\end_inset

where 
\begin_inset Formula $y_{k}\in\mathbb{R}^{3}$
\end_inset

.
 The inverse observation model is 
\begin_inset Formula 
\begin{align*}
y_{m} & =h\left(f^{-1}\left(x_{k},\delta_{k:m},w_{k}\right),v_{k}\right)\\
 & =R_{k}J_{l}\left(\delta_{k:m}\left(\omega_{k}+w_{k}^{R}\right)+\frac{\delta_{k:m}^{2}w_{k}^{\omega}}{2}\right)\left(\delta_{k:m}\rho_{k}+\delta_{k:m}w_{k}^{\rho}\right)\\
 & +t_{k}+w_{k}^{t}+v_{m},
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
where 
\begin_inset Formula $w_{k}=\left[\left(w_{k}^{t}\right)^{\top},\left(w_{k}^{R}\right)^{\top},\left(w_{k}^{\rho}\right)^{\top},\left(w_{k}^{u}\right)^{\top}\right]^{\top}$
\end_inset

 and 
\begin_inset Formula $J_{l}$
\end_inset

 is defined in equation 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:V_se3"

\end_inset

.
 Based on the observation model, we have three Jacobians to compute: 
\begin_inset Formula $G_{k:m}$
\end_inset

, 
\begin_inset Formula $H_{k:m}$
\end_inset

 and 
\begin_inset Formula $V_{m}$
\end_inset

.
 
\begin_inset Formula 
\begin{align*}
H_{k:m}=\frac{\partial h\left(f^{-1},v_{k}\right)}{\partial x} & =\begin{bmatrix}H_{k:m}^{t} & H_{k:m}^{R} & H_{k:m}^{\rho} & H_{k:m}^{\omega}\end{bmatrix},
\end{align*}

\end_inset

where
\begin_inset Formula 
\begin{align*}
H_{k:m}^{t}=\frac{\partial h\left(f^{-1},v_{k}\right)}{\partial t_{k}} & =R_{k}\\
H_{k:m}^{R}=\frac{\partial h\left(f^{-1},v_{k}\right)}{\partial R} & =\delta_{k:m}R_{k}\left[-J_{l}\left(\delta_{k:m}\omega\right)\rho\right]_{\times}\\
H_{k:m}^{\rho}=\frac{\partial h\left(f^{-1},v_{k}\right)}{\partial\rho} & =\delta_{k:m}^{2}R_{k}J_{l}\left(\delta_{k:m}\omega\right)\\
H_{k:m}^{\omega}=\frac{\partial h\left(f^{-1},v_{k}\right)}{\partial\omega} & =\delta_{k:m}^{2}R_{k}\partial J_{l}\left(\delta_{k:m}\omega,\delta_{k:m}\rho\right),
\end{align*}

\end_inset

and
\begin_inset Formula $\partial J_{l}\left(\delta_{k:m}\omega,\delta_{k:m}\rho\right)$
\end_inset

 is defined in Lemma 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:dJl"

\end_inset

.
 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
G_{k:m}=\frac{\partial h\left(f^{-1},v_{k}\right)}{\partial w_{k}}=\begin{bmatrix}G_{k:m}^{t} & G_{k:m}^{R} & G_{k:m}^{\rho} & G_{k:m}^{\omega}\end{bmatrix},
\]

\end_inset

where 
\begin_inset Formula 
\begin{align*}
G_{k:m}^{t} & =\frac{\partial h\left(f^{-1},v_{k}\right)}{\partial w_{k}^{t}}=I\\
G_{k:m}^{R} & =\frac{\partial h\left(f^{-1},v_{k}\right)}{\partial w_{k}^{R}}=\delta_{k:m}^{2}R_{k}\partial J_{l}\left(\delta_{k:m}\omega,\delta_{k:m}\rho\right)\\
G_{k:m}^{\rho} & =\frac{\partial h\left(f^{-1},v_{k}\right)}{\partial w_{k}^{\rho}}=\delta_{k:m}^{2}R_{k}J_{l}\left(\delta_{k:m}\omega\right)\\
G_{k:m}^{\omega} & =\frac{\partial h\left(f^{-1},v_{k}\right)}{\partial w_{k}^{\omega}}=\frac{\delta_{k:m}^{3}}{2}R_{k}\partial J_{l}\left(\delta_{k:m}\omega,\delta_{k:m}\rho\right).
\end{align*}

\end_inset

Lastly 
\begin_inset Formula $V_{m}=I$
\end_inset

.
\end_layout

\begin_layout Standard
Now that we have the Jacobians computed, we need to ensure that the system
 is observable.
 Since the system is nonlinear, the best we can do is ensure local observability.
 Given measurements from four different time steps, the observability matrix
 is 
\begin_inset Formula 
\[
\mathcal{O}=\begin{bmatrix}H_{k:m_{1}}\\
H_{k:m_{2}}\\
H_{k:m_{3}}\\
H_{k:m_{4}}
\end{bmatrix}.
\]

\end_inset

The observability matrix is not full rank.
 However, under certain constraints, the system is observable.
 Since we are interested in tracking the target we only need to be able
 to estimate the position of the target.
 To do this, we consider two configurations for a constant velocity system.
 In the first configuration the target has a circular or spiral trajectory.
 In this case we add the constraints that the target's heading is oriented
 along the body frame velocity, that 
\begin_inset Formula $\rho=\left[\rho_{x},0\right]^{\top}$
\end_inset

, 
\begin_inset Formula $\rho_{x}>0$
\end_inset

 and 
\begin_inset Formula $\omega\neq0$
\end_inset

.
 Using these constraints, the system is observable.
 In the second configuration the target is moving in a straight line.
 In this configuration we impose the same constraints as in the first configurat
ion except that 
\begin_inset Formula $\omega=0$
\end_inset

 and the roll in attitude (using roll, pitch, yaw) is zero.
 Under these constraints the system is observable.
 We can identify which configuration the target is in by looking at three
 different measurements from different times.
 If the three measurement do not form a line, then the system is in the
 first configuration; otherwise, the latter.
\end_layout

\begin_layout Standard
Since the system is nonlinear, the LMLE can take a while to converge.
 We can speed up the LMLE by seeding it.
 To do this, we will use the Euler angles (roll 
\begin_inset Formula $\phi$
\end_inset

, pitch 
\begin_inset Formula $\theta$
\end_inset

, yaw 
\begin_inset Formula $\psi$
\end_inset

) as local coordinates and align the pitch and yaw angles with the translational
 velocities.
 The map from Euler angles configured in an NED frame to 
\begin_inset Formula $SO\left(3\right)$
\end_inset

 is defined as 
\begin_inset Formula 
\begin{equation}
\mathcal{R}\left(\phi,\theta,\psi\right)=\begin{bmatrix}c_{\theta}c_{\psi} & s_{\phi}s_{\theta}c_{\psi}-c_{\phi}s_{\psi} & c_{\phi}s_{\theta}c_{\psi}+s_{\phi}s_{\psi}\\
c_{\theta}s_{\psi} & s_{\phi}s_{\theta}s_{\psi}+c_{\phi}c_{\psi} & c_{\phi}s_{\theta}s_{\psi}-s_{\phi}c_{\psi}\\
-s_{\theta} & s_{\phi}c_{\theta} & c_{\phi}c_{\theta}
\end{bmatrix}.\label{eq:euler_to_so3}
\end{equation}

\end_inset

Let 
\begin_inset Formula $t_{k},t_{m},t_{n}$
\end_inset

 denote measured positions at times 
\begin_inset Formula $n,m,k$
\end_inset

 with 
\begin_inset Formula $k$
\end_inset

 being the current time and 
\begin_inset Formula $n<m<k$
\end_inset

.
 The derivative of the position vector 
\begin_inset Formula $t$
\end_inset

 is related to 
\begin_inset Formula $\rho$
\end_inset

 through the rotation matrix 
\begin_inset Formula $R$
\end_inset

.
 This allows us to write the constraint
\begin_inset Formula 
\begin{align*}
\dot{t} & =R\rho\\
 & =\mathcal{R}\left(\phi,\theta,\psi\right)\rho.
\end{align*}

\end_inset

Letting 
\begin_inset Formula $\dot{t}_{k}=\left[\dot{t}_{k_{x}},\dot{t}_{k_{y}},\dot{t}_{k_{z}}\right]^{\top}$
\end_inset

, we get 
\begin_inset Formula 
\[
\begin{bmatrix}\dot{t}_{x}\\
\dot{t}_{y}\\
\dot{t}_{z}
\end{bmatrix}=\underbrace{\begin{bmatrix}c_{\theta}c_{\psi}\\
c_{\theta}s_{\psi}\\
-s_{\theta}
\end{bmatrix}}_{R_{k_{x}}}\rho_{x}.
\]

\end_inset

Since we receive position measurements, we can numerically estimate the
 positional derivatives 
\begin_inset Formula $\dot{t}_{k}=\frac{t_{m}-t_{k}}{\delta_{k:m}}$
\end_inset

 and 
\begin_inset Formula $\dot{t}_{m}=\frac{t_{n}-t_{m}}{\delta_{m:n}}$
\end_inset

.
 Using 
\begin_inset Formula $\dot{t}_{k}$
\end_inset

 we can estimate 
\begin_inset Formula $R_{k}$
\end_inset

 by solving for 
\begin_inset Formula $\phi_{k}$
\end_inset

,
\begin_inset Formula $\theta_{k}$
\end_inset

, 
\begin_inset Formula $\psi_{k}$
\end_inset

, and 
\begin_inset Formula $\rho_{k_{x}}$
\end_inset

 using the equations 
\begin_inset Formula 
\begin{align*}
\psi_{k} & =\text{atan2}\left(\dot{t}_{k_{y}},\left|\dot{t}_{k_{x}}\right|\right)\\
\theta_{k} & =\arctan\left(\frac{-\cos\left(\psi_{k}\right)\dot{t}_{k_{z}}}{\dot{t}_{k_{x}}}\right)\\
\phi_{k} & =0\\
\rho_{k_{x}} & =\left\Vert \dot{t}_{k}\right\Vert 
\end{align*}

\end_inset

We have set 
\begin_inset Formula $\phi_{k}=0$
\end_inset

 since we cannot easily estimate it unless we assume the FWA is making a
 coordinated turn as described in 
\begin_inset CommandInset citation
LatexCommand cite
key "Beard2008"
literal "true"

\end_inset

.
 In the absence of sideslip, a coordinated turn has the constraint
\begin_inset Formula 
\[
\dot{\psi}=\frac{g}{\left\Vert \dot{t}\right\Vert }\tan\left(\phi\right),
\]

\end_inset

where 
\begin_inset Formula $g$
\end_inset

 is the gravitational constant.
 Since we can estimate 
\begin_inset Formula $\psi$
\end_inset

 at two different time periods, we can numerically estimate its derivative
 
\begin_inset Formula $\dot{\psi}$
\end_inset

.
 Solving for 
\begin_inset Formula $\phi$
\end_inset

 we get 
\begin_inset Formula 
\[
\phi_{k}=\arctan\left(\frac{\frac{\psi_{k}-\psi_{m}}{\delta_{k:m}}\left\Vert \dot{t}_{k}\right\Vert }{g}\right).
\]

\end_inset

From the estimated Euler angles 
\begin_inset Formula $\phi_{k}$
\end_inset

, 
\begin_inset Formula $\theta_{k}$
\end_inset

 and 
\begin_inset Formula $\psi_{k}$
\end_inset

 we can construct the estimated rotation 
\begin_inset Formula $R_{k}$
\end_inset

 using equation 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:euler_to_so3"

\end_inset

.
\end_layout

\begin_layout Standard
Lastly we estimate 
\begin_inset Formula $\omega_{k}$
\end_inset

 using the constraint 
\begin_inset Formula 
\[
\dot{t}_{m}=R_{k}\exp\left(\delta_{k:m}\omega_{k}\right)\rho.
\]

\end_inset

Using a first order Taylor series approximation for the matrix exponential,
 we get 
\begin_inset Formula 
\[
\frac{R_{k}^{\top}\dot{t}_{m}}{\rho_{k_{x}}}=\begin{bmatrix}1\\
0\\
0
\end{bmatrix}+\begin{bmatrix}0\\
\omega_{k_{z}}\\
-\omega_{k_{y}}
\end{bmatrix}\delta_{k:m},
\]

\end_inset

From which we can estimate the angular rates 
\begin_inset Formula $\omega_{k_{z}}$
\end_inset

 and 
\begin_inset Formula $\omega_{k_{y}}$
\end_inset

, and we simply set 
\begin_inset Formula $\omega_{k_{x}}=0$
\end_inset

.
 These approximations are then used to seed the LMLE optimization problem.
\end_layout

\begin_layout Standard

\series bold
Hardware Results
\end_layout

\begin_layout Appendices

\end_layout

\begin_layout Section
SE
\begin_inset Formula $\left(2\right)$
\end_inset


\begin_inset CommandInset label
LatexCommand label
name "sec:SE2"

\end_inset


\end_layout

\begin_layout Standard
The special Euclidean group of two dimensions is a matrix Lie group and
 is the set 
\begin_inset Formula 
\[
SE\left(2\right)=\left\{ \left.\begin{bmatrix}R & t\\
0_{1\times2} & 1_{1\times1}
\end{bmatrix}\,\right|\,R\in SO\left(2\right)\text{ and }t\in\mathbb{R}^{2}\right\} 
\]

\end_inset

equipped with matrix multiplication.
 The Lie algebra is 
\begin_inset Formula 
\[
\mathfrak{se}\left(2\right)=\left\{ \left.\begin{bmatrix}\omega & \rho\\
0 & 0
\end{bmatrix}\,\right|\,\omega\in\mathfrak{s0}\left(2\right)\text{ and }\rho\in\mathbb{R}^{2}\right\} ,
\]

\end_inset

where 
\begin_inset Formula $\theta\in\mathbb{R},$
\end_inset


\begin_inset Formula $\omega=\left[\theta\right]_{\times}$
\end_inset

, and 
\begin_inset Formula $\left[\cdot\right]_{\times}$
\end_inset

 is the skew symmetric operator defined as 
\begin_inset Formula 
\[
\left[\theta\right]_{\times}=\begin{bmatrix}0 & -\theta\\
\theta & 0
\end{bmatrix},
\]

\end_inset

and 
\begin_inset Formula 
\[
\begin{bmatrix}\rho\\
\theta
\end{bmatrix}\in\mathbb{R}^{3}
\]

\end_inset

which is the Cartesian vector space.
 
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $g\in SE\left(2\right)$
\end_inset

 and 
\begin_inset Formula $u\in\mathfrak{se}\left(2\right)$
\end_inset

.
 Using an element of the Lie algebra, we can define the infinitesimal generator
 
\begin_inset Formula $\xi_{u}:G\to TG$
\end_inset

 as 
\begin_inset Formula 
\begin{align*}
\xi_{u}\left(g\right) & =gu\\
 & =\dot{g}.
\end{align*}

\end_inset

The discretized state transition function 
\begin_inset Formula $f:SE\left(2\right)\times\mathbb{R}^{2}\to SE\left(2\right)\times\mathbb{R}^{2}$
\end_inset

 is 
\begin_inset Formula 
\begin{align*}
g_{k} & =\text{\text{Exp}}\left(\delta_{k}\left(u_{k^{-}}+w_{k}^{g}\right)+\frac{\delta_{k}^{2}}{2}w_{k}^{u}\right)\\
u_{k} & =u_{k^{-}}+\delta_{k}w_{k}^{u}
\end{align*}

\end_inset


\end_layout

\begin_layout Subsection
Group Operations
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $g_{1},g_{2}\in SE\left(2\right)$
\end_inset

.
 The inversion and group multiplication is matrix inversion and matrix multiplic
ation as follows
\begin_inset Formula 
\begin{align*}
g_{1}^{-1} & =\begin{bmatrix}R_{1}^{\top} & -R_{1}^{\top}t_{1}\\
0 & 1
\end{bmatrix}\\
g_{1}g_{2} & =\begin{bmatrix}R_{1}R_{2} & R_{1}t_{2}+t_{1}\\
0 & 1
\end{bmatrix}.
\end{align*}

\end_inset

 
\end_layout

\begin_layout Subsection
Exponential Map
\end_layout

\begin_layout Standard
The exponential map is the matrix exponential and it's inverse is the matrix
 logarithm.
 The matrix exponential is a surjective function; however, by restricting
 the domain to 
\begin_inset Formula 
\[
U=\left\{ u\in\mathfrak{se}\left(2\right)\,\mid\,\left\Vert u\right\Vert <\pi\right\} ,
\]

\end_inset

it becomes a bijection.
 In this case, the exponential map and its inverse have a simplified form
 
\begin_inset Formula 
\begin{align*}
\text{\exp}\left(u\right) & =\begin{bmatrix}\exp\left(\omega\right) & J_{l}\left(\omega\right)\rho\\
0_{1\times2} & 1
\end{bmatrix}\\
\text{\log}\left(g\right) & =\begin{bmatrix}\log\left(R\right) & J_{l}^{-1}\left(\omega\right)t\\
0_{1\times2} & 0
\end{bmatrix}
\end{align*}

\end_inset

with
\begin_inset Formula 
\begin{align}
\theta & =\omega^{\vee}\\
\exp\left(\omega\right) & =\begin{bmatrix}\cos\left(\theta\right) & -\sin\left(\theta\right)\\
\sin\left(\theta\right) & \cos\left(\theta\right)
\end{bmatrix}\\
\log\left(R\right) & =\arctan\left(R_{21},R_{11}\right)\\
\omega & =\log\left(R\right)\\
J_{l}\left(\omega\right) & =\begin{cases}
I & \text{if }\theta=0\\
\frac{\sin\left(\theta\right)}{\theta}I+\frac{1-\cos\left(\theta\right)}{\theta}\left[1\right]_{\times} & \text{else}
\end{cases}\label{eq:se2_v}\\
J_{l}^{-1}\left(\omega\right) & =\begin{cases}
I & \text{if }\theta=0\\
\frac{\theta\sin\left(\theta\right)}{2\left(1-\cos\left(\theta\right)\right)}I-\frac{\theta}{2}\left[1\right]_{\times} & \text{else}
\end{cases}
\end{align}

\end_inset

and 
\begin_inset Formula $J_{l}$
\end_inset

 being the left Jacobian of 
\begin_inset Formula $SO\left(2\right)$
\end_inset


\end_layout

\begin_layout Subsection
Jacobians
\end_layout

\begin_layout Subsubsection
Adjoint
\end_layout

\begin_layout Standard
The group adjoint representation is
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\mathbf{Ad}_{g}=\begin{bmatrix}R & -\left[1\right]_{\times}t\\
0_{1\times2} & 1
\end{bmatrix}
\]

\end_inset

with inverse 
\begin_inset Formula 
\[
\mathbf{Ad}_{g}^{-1}=\begin{bmatrix}R^{\top} & R^{\top}\left[1\right]_{\times}t\\
0_{1\times2} & 1
\end{bmatrix}.
\]

\end_inset

The Lie algebra adjoint representation is 
\begin_inset Formula 
\[
\mathbf{ad}_{u}=\begin{bmatrix}\left[\omega\right]_{\times} & -\left[1\right]_{\times}\rho\\
0_{1\times2} & 0
\end{bmatrix}.
\]

\end_inset


\end_layout

\begin_layout Subsubsection
Left and Right Jacobians
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula 
\begin{align*}
W_{r}\left(\theta\right) & =\frac{\cos\left(\theta\right)-1}{\theta}\left[1\right]_{\times}+\frac{\sin\left(\theta\right)}{\theta}I\\
D_{r}\left(\theta\right) & =\frac{1-\cos\left(\theta\right)}{\theta^{2}}\left[1\right]_{\times}+\frac{\theta-\sin\left(\theta\right)}{\theta^{2}}I\\
W_{l}\left(\theta\right) & =\frac{1-\cos\left(\theta\right)}{\theta}\left[1\right]_{\times}+\frac{\sin\left(\theta\right)}{\theta}I\\
D_{l}\left(\theta\right) & =\frac{\cos\left(\theta\right)-1}{\theta^{2}}\left[1\right]_{\times}+\frac{\theta-\sin\left(\theta\right)}{\theta^{2}}I,
\end{align*}

\end_inset

then 
\begin_inset Formula 
\begin{align*}
J_{r}\left(u\right) & =\begin{bmatrix}W_{r}\left(\theta\right) & D_{r}\left(\theta\right)\rho\\
0 & 1
\end{bmatrix},\\
J_{l}\left(u\right) & =\begin{bmatrix}W_{l}\left(\theta\right) & D_{l}\left(\theta\right)\rho\\
0 & 1
\end{bmatrix}\\
J_{r}^{-1}\left(u\right) & =\begin{bmatrix}W_{r}^{-1}\left(\theta\right) & -W_{r}^{-1}\left(\theta\right)D_{r}\left(\theta\right)\rho\\
0 & 1
\end{bmatrix}\\
J_{l}^{-1}\left(u\right) & =\begin{bmatrix}W_{l}^{-1}\left(\theta\right) & -W_{l}^{-1}\left(\theta\right)D_{l}\left(\theta\right)\rho\\
0 & 1
\end{bmatrix}.
\end{align*}

\end_inset

If 
\begin_inset Formula $\theta=0$
\end_inset

, then the Jacobians and their inverses are the identity function.
\end_layout

\begin_layout Section
SE
\begin_inset Formula $\left(3\right)$
\end_inset


\begin_inset CommandInset label
LatexCommand label
name "sec:SE3"

\end_inset


\end_layout

\begin_layout Standard
The special Euclidean group of three dimensions is a matrix Lie group and
 is the set 
\begin_inset Formula 
\[
SE\left(3\right)=\left\{ \left.\begin{bmatrix}R & t\\
0_{1\times2} & 1_{1\times1}
\end{bmatrix}\,\right|\,R\in SO\left(3\right)\text{ and }t\in\mathbb{R}^{3}\right\} 
\]

\end_inset

equipped with matrix multiplication.
 The Lie algebra is 
\begin_inset Formula 
\[
\mathfrak{se}\left(3\right)=\left\{ \left.\begin{bmatrix}\omega & \rho\\
0 & 0
\end{bmatrix}\,\right|\,\omega\in\mathfrak{s0}\left(3\right)\text{ and }\rho\in\mathbb{R}^{3}\right\} ,
\]

\end_inset

where 
\begin_inset Formula $\omega=\left[\theta\right]_{\times}$
\end_inset

, 
\begin_inset Formula $\theta=\left[\theta_{1},\theta_{2},\theta_{3}\right]^{\top}\in\mathbb{R}^{3}$
\end_inset

 and 
\begin_inset Formula $\left[\cdot\right]_{\times}$
\end_inset

 is the skew symmetric operator defined as 
\begin_inset Formula 
\[
\left[\theta\right]_{\times}=\begin{bmatrix}0 & -\theta_{3} & \theta_{2}\\
\theta_{3} & 0 & -\theta_{1}\\
-\theta_{2} & \theta_{1} & 0
\end{bmatrix},
\]

\end_inset

and 
\begin_inset Formula 
\[
\begin{bmatrix}\rho\\
\theta
\end{bmatrix}\in\mathbb{R}^{6}
\]

\end_inset

which is the Cartesian vector space.
 
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $g\in SE\left(3\right)$
\end_inset

 and 
\begin_inset Formula $u\in\mathfrak{se}\left(3\right)$
\end_inset

.
 Using an element of the Lie algebra, we can define the infinitesimal generator
 
\begin_inset Formula $\xi_{u}:G\to TG$
\end_inset

 as 
\begin_inset Formula 
\begin{align*}
\xi_{u}\left(g\right) & =gu\\
 & =\dot{g}.
\end{align*}

\end_inset

The discretized state transition function 
\begin_inset Formula $f:SE\left(3\right)\times\mathbb{R}^{3}\to SE\left(3\right)\times\mathbb{R}^{3}$
\end_inset

 is 
\begin_inset Formula 
\begin{align*}
g_{k} & =\exp\left(\delta_{k}\left(u_{k^{-}}+w_{k}^{g}\right)+\frac{\delta_{k}^{2}}{2}w_{k}^{u}\right)\\
u_{k} & =u_{k^{-}}+\delta_{k}w_{k}^{u}
\end{align*}

\end_inset


\end_layout

\begin_layout Subsection
Group Operations
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $g_{1},g_{2}\in SE\left(3\right)$
\end_inset

.
 The inversion and group multiplication is matrix inversion and matrix multiplic
ation as follows
\begin_inset Formula 
\begin{align*}
g_{1}^{-1} & =\begin{bmatrix}R_{1}^{\top} & -R_{1}^{\top}t_{1}\\
0 & 1
\end{bmatrix}\\
g_{1}g_{2} & =\begin{bmatrix}R_{1}R_{2} & R_{1}t_{2}+t_{1}\\
0 & 1
\end{bmatrix}.
\end{align*}

\end_inset

 
\end_layout

\begin_layout Subsection
Exponential Map
\end_layout

\begin_layout Standard
The exponential map is the matrix exponential and it's inverse is the matrix
 logarithm.
 The matrix exponential is a surjective function; however, by restricting
 the domain to 
\begin_inset Formula 
\[
U=\left\{ u\in\mathfrak{se}\left(3\right)\,\mid\,\left\Vert u\right\Vert <\pi\right\} ,
\]

\end_inset

it becomes a bijection.
 In this case, the exponential map and its inverse have a simplified form
 
\begin_inset Formula 
\begin{align*}
\exp\left(u\right) & =\begin{bmatrix}\exp\left(\omega\right) & J_{l}\left(\omega\right)\rho\\
0 & 1
\end{bmatrix}\\
\text{\log}\left(g\right) & =\begin{bmatrix}J_{l}^{-1}\left(\omega\right)t\\
\log\left(R\right)
\end{bmatrix}
\end{align*}

\end_inset

with 
\begin_inset Formula $g=\exp\left(u\right)$
\end_inset

,
\begin_inset Formula 
\begin{align}
\phi & =\sqrt{\omega^{\top}\omega}\\
\exp\left(\omega\right) & =I+\frac{\sin\left(\phi\right)}{\phi}\omega+\frac{1-\cos\left(\phi\right)}{\phi^{2}}\omega^{2}\\
\phi & =\arccos\left(\frac{\text{trace}\left(R\right)-1}{2}\right)\\
\log\left(R\right) & =\begin{cases}
0_{2\times2} & \text{if }\phi=0\\
\frac{\phi}{2\sin\left(\phi\right)}\left(R-R^{\top}\right) & \text{else}
\end{cases}\\
J_{l}\left(\omega\right) & =\begin{cases}
I & \text{if }\phi=0\\
I+\frac{1-\cos\left(\phi\right)}{\phi^{2}}\omega+\frac{\phi-\sin\left(\phi\right)}{\phi^{3}}\omega^{2} & \text{else}
\end{cases}\label{eq:V_se3}\\
J_{l}^{-1}\left(\omega\right) & =\begin{cases}
I & \text{if }\theta=0\\
I-\frac{\omega}{2}+\left(\frac{1}{\phi^{2}}-\frac{\phi\sin\left(\phi\right)}{2\phi^{2}\left(1-\cos\left(\phi\right)\right)}\right)\omega^{2} & \text{else}
\end{cases}
\end{align}

\end_inset

where 
\begin_inset Formula $J_{l}$
\end_inset

 is the left Jacobian of 
\begin_inset Formula $SO\left(3\right)$
\end_inset

.
\end_layout

\begin_layout Subsection
Jacobians
\end_layout

\begin_layout Subsubsection
Adjoint
\end_layout

\begin_layout Standard
The group adjoint representation is
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\mathbf{Ad}_{g}=\begin{bmatrix}R & \left[t\right]_{\times}R\\
0_{3\times3} & R
\end{bmatrix}
\]

\end_inset

with inverse 
\begin_inset Formula 
\[
\mathbf{Ad}_{g}^{-1}=\begin{bmatrix}R^{\top} & -R^{\top}\left[t\right]_{\times}\\
0_{3\times3} & R^{\top}
\end{bmatrix}.
\]

\end_inset


\end_layout

\begin_layout Standard
The Lie algebra representation is 
\begin_inset Formula 
\[
\mathbf{ad}_{u}=\begin{bmatrix}\omega & \left[\rho\right]_{\times}\\
0_{3\times3} & \omega
\end{bmatrix}.
\]

\end_inset


\end_layout

\begin_layout Subsubsection
Left and Right Jacobians
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $u=\begin{bmatrix}\omega & \rho\\
0 & 0
\end{bmatrix}\in\mathfrak{se}\left(3\right)$
\end_inset

 and 
\begin_inset Formula 
\begin{align*}
\phi & =\sqrt{\omega^{\top}\omega}\\
a_{\phi} & =\frac{\cos\left(\phi\right)-1}{\phi^{2}}\\
b_{\phi} & =\frac{\phi-\sin\left(\phi\right)}{\phi^{3}}\\
c_{\phi} & =-\frac{1}{\phi^{3}}\sin\left(\phi\right)+2\left(\frac{1-\cos\left(\phi\right)}{\phi^{4}}\right)\\
d_{\phi} & =-\frac{2}{\phi^{4}}+\frac{3}{\phi^{5}}\sin\left(\phi\right)-\frac{1}{\phi^{4}}\cos\left(\phi\right)\\
q_{r}\left(\omega\right) & =\left(\left(\omega^{\vee}\right)^{\top}\rho\right)\left(d_{\phi}\omega^{2}+c_{\phi}\omega\right)\\
q_{l}\left(\omega\right) & =\left(\left(\omega^{\vee}\right)^{\top}\rho\right)\left(d_{\phi}\omega^{2}-c_{\phi}\omega\right)\\
B_{r}\left(u\right) & =q_{r}\left(\omega\right)+a_{\phi}\left[\rho\right]_{\times}+b_{\phi}\left(\omega\left[\rho\right]_{\times}+\left[\rho\right]_{\times}\omega\right)\\
B_{l}\left(u\right) & =q_{l}\left(\omega\right)-a_{\phi}\left[\rho\right]_{\times}+b_{\phi}\left(\omega\left[\rho\right]_{\times}+\left[\rho\right]_{\times}\omega\right)\\
J_{r}\left(\omega\right) & =I+\frac{\cos\left(\phi\right)-1}{\phi^{2}}\omega+\frac{\phi-\sin\left(\phi\right)}{\phi^{3}}\omega^{2}\\
J_{r}^{-1}\left(\omega\right) & =I+\frac{1}{2}\omega-\frac{\phi\cot\left(\frac{\phi}{2}\right)-2}{2\phi^{2}}\omega^{2}
\end{align*}

\end_inset

then 
\begin_inset Formula 
\begin{align*}
J_{r}\left(u\right) & =\begin{bmatrix}J_{r}\left(\omega\right) & B_{r}\left(u\right)\\
0 & J_{r}\left(\omega\right)
\end{bmatrix}\\
J_{l}\left(u\right) & =\begin{bmatrix}J_{l}\left(\omega\right) & B_{l}\left(u\right)\\
0 & J_{l}\left(\omega\right)
\end{bmatrix}\\
J_{r}^{-1}\left(u\right) & =\begin{bmatrix}J_{r}^{-1}\left(\omega\right) & -J_{r}^{-1}\left(\omega\right)B_{r}\left(u\right)J_{r}^{-1}\left(\omega\right)\\
0 & J_{r}^{-1}\left(\omega\right)
\end{bmatrix}\\
J_{l}^{-1}\left(u\right) & =\begin{bmatrix}J_{l}^{-1}\left(\omega\right) & -J_{l}^{-1}\left(\omega\right)B_{l}\left(u\right)J_{l}^{-1}\left(\omega\right)\\
0 & J_{l}^{-1}\left(\omega\right)
\end{bmatrix}.
\end{align*}

\end_inset


\end_layout

\begin_layout Section
Lemma
\end_layout

\begin_layout Lemma
\begin_inset CommandInset label
LatexCommand label
name "lem:dJl"

\end_inset

Let 
\begin_inset Formula $J_{l}\left(\omega\right)$
\end_inset

 denote the left Jacobian of 
\begin_inset Formula $SO\left(3\right)$
\end_inset

 and 
\begin_inset Formula $\rho\in\mathbb{R}^{3}$
\end_inset

.
 The derivative of 
\begin_inset Formula $J_{l}\left(\omega\right)p$
\end_inset

 with respect to 
\begin_inset Formula $\omega$
\end_inset

, denote 
\begin_inset Formula $\partial J_{l}\left(\omega,\rho\right)$
\end_inset

, is 
\begin_inset Formula 
\begin{align*}
\partial J_{l}\left(\omega,\rho\right) & =\left(\frac{1-\cos\left(\theta\right)}{\theta^{2}}\right)\left[-\rho\right]_{\times}\\
 & +\left(\frac{\theta-\sin\left(\theta\right)}{\theta^{3}}\right)\left(-2\omega\left[\rho\right]_{\times}+\left[\rho\right]_{\times}\omega_{\times}\right)\\
 & +\left(\frac{\sin\left(\theta\right)\theta+2\left(\cos\left(\theta\right)-1\right)}{\theta^{4}}\right)\omega\rho\left(\omega^{\vee}\right)^{\top}\\
 & +\left(\frac{3\sin\left(\theta\right)-\cos\left(\theta\right)\theta-2\theta}{\theta^{5}}\right)\omega^{2}\rho\left(\omega^{\vee}\right)^{\top}.
\end{align*}

\end_inset

where 
\begin_inset Formula $\omega\in\mathfrak{s0}\left(3\right)$
\end_inset

, and 
\begin_inset Formula $\theta=\sqrt{\left(\omega^{\vee}\right)^{\top}\omega^{\vee}}$
\end_inset

.
\end_layout

\begin_layout Proof
 
\begin_inset Formula $J_{l}\left(\omega\right)$
\end_inset

 is defined in equation 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:V_se3"

\end_inset

.
 It follows directly that 
\begin_inset Formula 
\[
\frac{\partial J_{l}\left(\omega\right)\rho}{\partial\omega}=\frac{\partial}{\partial\omega}\left(I+\frac{1-\cos\left(\theta\right)}{\theta^{2}}\omega+\frac{\theta-\sin\left(\theta\right)}{\theta^{3}}\omega^{2}\right)\rho.
\]

\end_inset

Using the product rule, we can break up the derivation into parts: 
\begin_inset Formula 
\[
\frac{\partial}{\partial\omega}\frac{1-\cos\left(\theta\right)}{\theta^{2}}=\frac{\sin\left(\theta\right)\theta+2\left(\cos\left(\theta\right)+1\right)}{\theta^{3}}\left(\omega^{\vee}\right)^{\top}
\]

\end_inset


\begin_inset Formula 
\[
\frac{\partial}{\partial\omega}\frac{\theta-\sin\left(\theta\right)}{\theta^{3}}=\frac{3\sin\left(\theta\right)-\cos\left(\theta\right)\theta-2\theta}{\theta^{5}}
\]

\end_inset


\begin_inset Formula 
\[
\frac{\partial}{\partial\omega}\omega\rho=\left[-\rho\right]_{\times}
\]

\end_inset

and 
\begin_inset Formula 
\[
\frac{\partial}{\partial\omega}\omega^{2}\rho=-2\omega\left[\rho\right]_{\times}+\left[\rho\right]_{\times}\omega_{\times}.
\]

\end_inset

Putting the pieces together, we get solution stated in the lemma.
\end_layout

\begin_layout Section
Terminology and Parameters
\end_layout

\begin_layout Standard
The terminology, parameters, and notation used is previous version of R-RANSAC
 have varied which has created confusion and inconsistencies.
 In this section, we hope to solidify certain terminology, parameters and
 notation that are suitable for expanding R-RANSAC to work with Lie Groups,
 and incorporating other improvements we have made to the general algorithm.
\end_layout

\begin_layout Subsection
Terminology
\end_layout

\begin_layout Standard
R-RANSAC has very specific terminology that we that will facilitate the
 discussion.
 
\end_layout

\begin_layout Itemize

\series bold
Phenomenon
\series default
: Something that produces an observable signal.
 In the case of target tracking, the phenomenon is referred to as a 
\series bold
target
\series default
, which is an object that exists in physical space.
\end_layout

\begin_layout Itemize

\series bold
Measurement Source
\series default
: A sensor equipped with an algorithm that captures information from the
 environment and produces meaningful measurements used to observe the target.
\end_layout

\begin_layout Itemize

\series bold
Surveillance Region
\series default
: The portion of the environment that is observable by the measurement sources.
 There is a local surveillance region (LSR) for each measurement source
 and a global surveillance region (GSR) that is a union of all the local
 surveillance regions.
 
\end_layout

\begin_layout Itemize

\series bold
Frame of reference
\series default
: Consists of an abstract coordinate system and the set of physical reference
 points that uniquely fix (locate and orient) the coordinate system and
 standardize measurements within that frame.
 We will often refer to a frame of reference as just 
\series bold
frame
\series default
.
\end_layout

\begin_layout Itemize

\series bold
Local Frame
\series default
: The frame that coincides with a local surveillance region.
\end_layout

\begin_layout Itemize

\series bold
Global Frame
\series default
: The frame that coincides with the global surveillance region.
 It is possible that the global frame is the same as a local frame.
\end_layout

\begin_layout Itemize

\series bold
Sensor Scan
\series default
: When a sensor observes its surveillance region and extracts meaningful
 data.
 For example, the sensor scan of a camera occurs when the camera produces
 a new image of its surveillance region.
\end_layout

\begin_layout Itemize

\series bold
False Measurement
\series default
: A measurement extracted from a sensor scan that does not correspond to
 a phenomenon of interest.
 For example, motion in a camera can generate false measurements due to
 parallax depending on the algorithm.
 Another example is just noisy sensors.
\end_layout

\begin_layout Itemize

\series bold
True Measurement
\series default
: A measurement extracted from a sensor scan that corresponds to a phenomenon
 of interest.
\end_layout

\begin_layout Itemize

\series bold
Model
\series default
: This is simply a model of the phenomenon.
 In regards to target tracking, a model is referred to as a 
\series bold
track
\series default
.
\end_layout

\begin_layout Itemize

\series bold
Model Hypothesis
\series default
: This is a hypothetical model of the phenomenon (i.e.
 a possible model) created by the RANSAC algorithm.
 A model hypothesis that meets certain criteria becomes a model.
 In regards to target tracking, a model hypothesis is referred to as a 
\series bold
track
\series default
 
\series bold
hypothesis
\series default
.
 We will often abbreviate the term and mention only 
\series bold
hypothesis
\series default
.
\end_layout

\begin_layout Itemize

\series bold
Model Likelihood
\series default
: The probability that a model represents an actual target.
\end_layout

\begin_layout Itemize

\series bold
Good
\series default
 
\series bold
Model
\series default
: A model that is deemed very likely to correctly describe a phenomenon,
 based on predefined criteria, becomes a good model.
 In regards to target tracking, a good model is referred to as a 
\series bold
good
\series default
 
\series bold
track
\series default
.
\end_layout

\begin_layout Itemize

\series bold
Poor
\series default
 
\series bold
Model
\series default
: A model that is not a good model.
 In regards to target tracking, a poor model is referred to as a 
\series bold
poor
\series default
 
\series bold
track
\series default
.
\end_layout

\begin_layout Itemize

\series bold
Time Window
\series default
: An interval of time extending into the past from the current time.
\end_layout

\begin_layout Itemize

\series bold
Expired
\series default
 
\series bold
Measurement
\series default
: A measurement that was observed in the past outside the time window.
\end_layout

\begin_layout Itemize

\series bold
Measurement
\series default
 
\series bold
Source
\series default
: An algorithm that takes sensor data and produces a measurement.
 We will often refer to a measurement source as just a source.
\end_layout

\begin_layout Subsection
Parameters
\end_layout

\begin_layout Standard
There are various parameters used throughout R-RANSAC.
 A parameter can either be a scalar or a tuple.
 In case the context doesn't make it clear, we will specify which one is
 a scalar and a tuple.
 
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent
\end_layout

\end_inset

 RANSAC parameters
\end_layout

\begin_layout Itemize
\begin_inset Formula $\ell$
\end_inset

 - max iterations
\end_layout

\begin_layout Itemize
\begin_inset Formula $\tau_{E}$
\end_inset

 - If the size of a consensus set is greater than 
\begin_inset Formula $\tau_{E}$
\end_inset

, than RANSAC will terminate early.
\end_layout

\begin_layout Itemize
\begin_inset Formula $\tau_{I}$
\end_inset

 - RANSAC inlier threshold
\end_layout

\begin_layout Itemize
\begin_inset Formula $\tau_{RM}$
\end_inset

 - The minimum size of a track hypothesis's consensus set in order for the
 hypothesis to become a track
\end_layout

\begin_layout Standard
Cluster parameters
\end_layout

\begin_layout Itemize
\begin_inset Formula $\tau_{CD}$
\end_inset

 - neighborhood distance threshold
\end_layout

\begin_layout Itemize
\begin_inset Formula $\tau_{CM}$
\end_inset

 - cluster minimum cardinality threshold
\end_layout

\begin_layout Standard
Model Management Parameters
\end_layout

\begin_layout Itemize
\begin_inset Formula $\tau_{S}$
\end_inset

 - Similarity merge threshold
\end_layout

\begin_layout Itemize
\begin_inset Formula $\tau_{\rho}$
\end_inset

 - Good track threshold
\end_layout

\begin_layout Itemize
\begin_inset Formula $\tau_{\alpha}$
\end_inset

- Missed detection threshold
\end_layout

\begin_layout Standard
PDAF
\end_layout

\begin_layout Itemize
\begin_inset Formula $P_{D}$
\end_inset

 - Probability of detection
\end_layout

\begin_layout Itemize
\begin_inset Formula $P_{G}$
\end_inset

 - Probability of being in the validation region
\end_layout

\begin_layout Itemize
\begin_inset Formula $\lambda$
\end_inset

 - The spacial density of false measurements in a local surveillance region
 per sensor scan
\end_layout

\begin_layout Standard
Other
\end_layout

\begin_layout Itemize
\begin_inset Formula $T_{W}$
\end_inset

 - Time window
\end_layout

\begin_layout Itemize
\begin_inset Formula $M$
\end_inset

 - The number of models
\end_layout

\begin_layout Section
Homography
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula 
\[
H=\begin{bmatrix}H_{1} & h_{2}\\
h_{3}^{\top} & h_{4}
\end{bmatrix},
\]

\end_inset

and 
\begin_inset Formula $\rho^{a}\in\mathbb{R}^{2}$
\end_inset

 denote a pixel location.
 Then
\begin_inset Formula 
\begin{eqnarray*}
\rho^{b} & = & g\left(H,\rho^{a}\right)
\end{eqnarray*}

\end_inset

where 
\begin_inset Formula 
\[
g\left(H,\rho^{a}\right)=\frac{H_{1}\rho^{a}+h_{2}}{h_{3}^{\top}\rho^{a}+h_{4}}.
\]

\end_inset


\begin_inset Formula 
\[
G\left(H,\rho^{a}\right)=\frac{\left(h_{3}^{\top}\rho^{a}+h_{4}\right)H_{1}-\left(H_{1}\rho^{a}+h_{2}\right)h_{3}^{\top}}{\left(h_{3}^{\top}\rho^{a}+h_{4}\right)^{2}}
\]

\end_inset


\begin_inset Formula 
\begin{align*}
\frac{\partial g}{\partial\rho} & =G\left(H,\rho\right)\\
\frac{\partial g}{\partial\dot{\rho}} & =0
\end{align*}

\end_inset


\begin_inset Formula 
\begin{align*}
M=\frac{\partial G\left(H,\rho^{a}\right)\dot{\rho}^{a}}{\partial\rho^{a}} & =\frac{-H_{1}\dot{\rho}^{a}h_{3}^{\top}}{\left(h_{3}^{\top}\rho^{a}+h_{4}\right)^{2}}-\frac{H_{1}h_{3}^{\top}\dot{\rho}^{a}}{\left(h_{3}^{\top}\rho^{a}+h_{4}\right)^{2}}+\frac{2\left(H_{1}\rho^{a}+h_{2}\right)h_{3}^{\top}\dot{\rho}^{a}h_{3}^{\top}}{\left(h_{3}^{\top}\rho^{a}+h_{4}\right)^{3}}\\
 & =\frac{2\left(H_{1}\rho^{a}+h_{2}\right)h_{3}^{\top}\dot{\rho}^{a}h_{3}^{\top}-H_{1}\dot{\rho}^{a}h_{3}^{\top}\eta-H_{1}h_{3}^{\top}\dot{\rho}^{a}\eta}{\eta^{3}}
\end{align*}

\end_inset

which can be simplified to 
\begin_inset Formula 
\[
M=-\frac{G\left(\dot{\rho}^{a}h_{3}^{\top}+Ih_{3}^{\top}\dot{\rho}^{a}\right)}{\eta}
\]

\end_inset


\begin_inset Formula 
\[
f\left(\rho^{a},\dot{\rho}^{a}\right)=\begin{bmatrix}g\left(H,\rho^{a}\right)\\
G\left(H,\rho^{a}\right)\dot{\rho}^{a}
\end{bmatrix}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\eta=\left(h_{3}^{\top}\rho^{a}+h_{4}\right)
\]

\end_inset

Covariance is transformed as 
\begin_inset Formula 
\begin{align*}
T & =\begin{bmatrix}G & 0\\
M & G
\end{bmatrix}\\
 & TCT^{\top}
\end{align*}

\end_inset

This has been tested
\end_layout

\begin_layout Standard
For 
\begin_inset Formula $SE\left(2\right)$
\end_inset

 the rotation matrix can be constructed as 
\begin_inset Formula 
\[
R^{a}=\frac{1}{\left\Vert \dot{\rho}^{a}\right\Vert }\begin{bmatrix}\dot{\rho}^{a}\cdot e_{1} & -\dot{\rho}^{a}\cdot e_{2}\\
\dot{\rho}^{a}\cdot e_{2} & \dot{\rho}^{a}\cdot e_{1}
\end{bmatrix}.
\]

\end_inset

To transform it using the Homography we get 
\begin_inset Formula 
\[
R_{t}=\frac{1}{\left\Vert G\dot{\rho}^{a}\right\Vert }\begin{bmatrix}e_{1}^{\top}G\dot{\rho}^{a} & -e_{2}^{\top}G\dot{\rho}^{a}\\
e_{2}^{\top}G\dot{\rho}^{a} & e_{1}^{\top}G\dot{\rho}^{a}
\end{bmatrix}
\]

\end_inset


\end_layout

\begin_layout Standard
Since we assume that the UAV has constant velocity in the body frame, the
 acceleration in the inertial frame is due to angular rotation, that is,
 
\begin_inset Formula 
\begin{align*}
\ddot{\rho}^{i} & =\left[\omega^{i}\right]_{\times}\dot{\rho}^{i}\\
\ddot{\rho}^{i} & =R_{b}^{i}\left[\omega^{b}\right]_{\times}\left(R_{b}^{i}\right)^{\top}\dot{\rho}^{i}\\
 & =R_{b}^{i}\left[\omega^{b}\right]_{\times}\left(R_{b}^{i}\right)^{\top}R_{b}^{i}\dot{\rho}^{b}\\
 & =R_{b}^{i}\left[\omega^{b}\right]_{\times}\dot{\rho}^{b}
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
Recall that 
\begin_inset Formula 
\[
\dot{\rho}^{n}=G\left(H,\rho^{c}\right)\dot{\rho}^{c},
\]

\end_inset

taking the derivative w.r.t.
 to time, holding 
\begin_inset Formula $H$
\end_inset

 constant and assuming constant velocity in the body frame we get that 
\begin_inset Formula 
\begin{align*}
\ddot{\rho}^{n} & =\left(\frac{\partial}{\partial\rho^{c}}G\left(H,\rho^{c}\right)\dot{\rho}^{c}\right)\frac{\partial\rho^{c}}{\partial t}+\frac{\partial}{\partial\dot{\rho}^{c}}\left(G\left(H,\rho^{c}\right)\dot{\rho}^{c}\right)\frac{\partial\dot{\rho}^{c}}{\partial t}\\
\left[\omega^{n}\right]_{\times}\dot{\rho}^{n} & =M\dot{\rho}^{c}+G\left(H,\rho^{c}\right)\left[\omega^{c}\right]_{\times}\dot{\rho}^{c}\\
\left[\omega^{n}\right]_{\times}G\left(H,\rho^{c}\right)\dot{\rho}^{c} & =\left(M+G\left(H,\rho^{c}\right)\left[\omega^{c}\right]_{\times}\right)\dot{\rho}^{c}\\
\theta^{n}\left[1\right]_{\times}G\left(H,\rho^{c}\right)\dot{\rho}^{c} & =\left(M+G\left(H,\rho^{c}\right)\left[\omega^{c}\right]_{\times}\right)\dot{\rho}^{c}\\
\\
\left(\dot{\rho}^{c}\right)^{\top}\left[\omega^{n}\right]_{\times}G\left(H,\rho^{c}\right)\dot{\rho}^{c} & =\left(\dot{\rho}^{c}\right)^{\top}\left(M+G\left(H,\rho^{c}\right)\left[\omega^{c}\right]_{\times}\right)\dot{\rho}^{c}\\
\left(\dot{\rho}^{c}\right)^{\top}\left[\omega^{n}\right]_{\times} & =\theta^{n}\left(\dot{\rho}^{c}\right)^{\top}\left[1\right]_{\times}\\
\theta^{n} & =\frac{\left(\dot{\rho}^{c}\right)^{\top}\left(M+G\left(H,\rho^{c}\right)\left[\omega^{c}\right]_{\times}\right)\dot{\rho}^{c}}{\left(\dot{\rho}^{c}\right)^{\top}\left[1\right]_{\times}G\left(H,\rho^{c}\right)\dot{\rho}^{c}}\\
\left(\left[\omega^{n}\right]_{\times}G\left(H,\rho^{c}\right)-\left(M+G\left(H,\rho^{c}\right)\left[\omega^{c}\right]_{\times}\right)\right)\dot{\rho}^{c} & =0_{2\times2}
\end{align*}

\end_inset

implies that 
\begin_inset Formula 
\[
\left[\omega^{n}\right]_{\times}=\left(M+G\left(H,\rho^{c}\right)\left[\omega^{c}\right]_{\times}\right)G\left(H,\rho^{c}\right)^{-1}
\]

\end_inset


\end_layout

\begin_layout Standard
Note that this is only valid in the virtual image frame.
 In other words 
\begin_inset Formula 
\[
H=R-\frac{tn^{\top}}{d}
\]

\end_inset

where 
\begin_inset Formula $R=R\left(\psi\right)$
\end_inset

 and 
\begin_inset Formula $n^{\top}=\left[0,0,1\right]$
\end_inset

.
 Note that this transformation can be simplified to 
\begin_inset Formula 
\[
\left[\omega^{n}\right]_{\times}=\left[\omega^{c}\right]_{\times}
\]

\end_inset


\end_layout

\begin_layout Subsection
Homography NVIP SE2
\end_layout

\begin_layout Standard
When working with a camera and tracking a target whose manifold configuration
 is 
\begin_inset Formula $SE\left(2\right)$
\end_inset

, tracking is done in the normalized virtual image frame (NVIF).
 In other words, the normalized virtual image plane is parallel to the ground
 and the virtual optical axis is pointing down to the Earth's core.
 Tracking has to be done in the NVIF, becuase when the UAS pitches or rolls,
 the circular trajectory of the target becomes an ellipse which doesn't
 follow the constraint that the target has constant velocity.
 
\end_layout

\begin_layout Standard
Tracking targets in the NVIF simplifies the homography to 
\begin_inset Formula 
\[
H=\begin{bmatrix}R\left(\psi\right) & -\pi_{e_{3}}P/d\\
0 & 1-e_{3}^{\top}P/d
\end{bmatrix}
\]

\end_inset

where 
\begin_inset Formula $R\left(\psi\right)$
\end_inset

 is the rotation of the UAS due to yaw, 
\begin_inset Formula $P$
\end_inset

 is the translation of the UAS, 
\begin_inset Formula $d$
\end_inset

 is the distance the UAS is from the tracking plane and 
\begin_inset Formula $\pi_{e_{3}}$
\end_inset

 is the projection onto the plane orthogonal to 
\begin_inset Formula $e_{3}$
\end_inset

.
 Using the decomposition of the homography
\begin_inset Formula 
\[
H=\begin{bmatrix}H_{1} & h_{2}\\
h_{3}^{\top} & h_{4}
\end{bmatrix},
\]

\end_inset

the position, rotation and velocity transformation is 
\begin_inset Formula 
\[
g\left(H,\rho^{c}\right)=\frac{H_{1}\rho^{c}+h_{2}}{h_{4}}
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
R & ^{n}=H_{1}R^{c}\\
\dot{\rho}^{n} & =\frac{\rho^{c}}{h_{4}}\\
\omega^{n} & =\omega^{c}.
\end{align*}

\end_inset

The covariance transformation is 
\begin_inset Formula 
\[
C^{n}=TC^{c}T^{\top}
\]

\end_inset

where 
\begin_inset Formula $C$
\end_inset

 is the covariance and 
\begin_inset Formula 
\[
T=\text{diag}\left(\frac{1}{h_{4}},\frac{1}{h_{4}},1,\frac{1}{h_{4}},\frac{1}{h_{4}},1\right).
\]

\end_inset


\end_layout

\begin_layout Standard
The 5th entry is really zero since we assume that the body velocity in the
 left and right direction is zero.
 
\end_layout

\begin_layout Section
PDAF with varying noise covariances
\end_layout

\begin_layout Standard
State update
\begin_inset Formula 
\[
x_{k}=x_{k^{-}}+\sum_{i}K_{k,i}\beta_{i}\nu_{i}
\]

\end_inset

where 
\begin_inset Formula $\nu_{i}$
\end_inset

 is the innovation term associated with the 
\begin_inset Formula $i^{th}$
\end_inset

 measurement and 
\begin_inset Formula 
\[
K_{k,i}=\bar{P}_{k}H_{k}^{\top}S_{k,i}^{-1}
\]

\end_inset

where 
\begin_inset Formula 
\[
S_{k,i}=\left(H_{k}\bar{P}_{k}H_{k}^{\top}+V_{k}R_{k,i}V_{k}^{\top}\right)
\]

\end_inset

and 
\begin_inset Formula $R_{k,i}$
\end_inset

 is the measurement noise associated with the 
\begin_inset Formula $i^{th}$
\end_inset

 measurement.
\end_layout

\begin_layout Standard
The covariance update is 
\begin_inset Formula 
\[
P_{k}=\bar{P}_{k}-\sum_{i}\beta_{i}K_{k,i}S_{k,i}K_{k,i}^{\top}+\sum_{i}\left(\beta_{i}K_{k,i}\nu_{i}\nu_{i}^{\top}-\nu\nu^{\top}K_{k,i}^{\top}\right)
\]

\end_inset

where 
\begin_inset Formula 
\[
\nu=\sum_{i}\beta_{i}\nu_{i}
\]

\end_inset


\end_layout

\begin_layout Section
Derivation of Jacobians
\end_layout

\begin_layout Standard
This section presents the derivation of Jacobians used in R-RANSAC.
 We use similar notation and procedure presenting in 
\begin_inset CommandInset citation
LatexCommand cite
key "Sola2018"
literal "false"

\end_inset

.
\end_layout

\begin_layout Lemma
Let 
\begin_inset Formula $f$
\end_inset

 be the state transition function defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:system-model"
plural "false"
caps "false"
noprefix "false"

\end_inset

, 
\begin_inset Formula $x_{k}$
\end_inset

 and 
\begin_inset Formula $x_{m}$
\end_inset

 be states at two different times with 
\begin_inset Formula $m<k$
\end_inset

, 
\begin_inset Formula $w_{k}$
\end_inset

 be process noise described in section 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Problem-Description"
plural "false"
caps "false"
noprefix "false"

\end_inset

, and 
\begin_inset Formula $\delta_{m:k}=k-m$
\end_inset

, then the partial derivative of 
\begin_inset Formula $f$
\end_inset

 w.r.t.
 
\begin_inset Formula $x_{m}$
\end_inset

 and 
\begin_inset Formula $w_{k}$
\end_inset

 evaluated at 
\begin_inset Formula $x_{m}=\hat{x}_{m}$
\end_inset

 and 
\begin_inset Formula $w_{k}=0$
\end_inset

 is
\begin_inset Formula 
\[
\left.\frac{\partial x_{k}\ominus f\left(x_{m},w_{k},\delta_{m:k}\right)}{\partial x_{m}}\right|_{\begin{array}{c}
x_{m}=\hat{x}_{m}\\
w_{k}=0
\end{array}}=F_{m:k}
\]

\end_inset

and 
\begin_inset Formula 
\[
\left.\frac{\partial x_{k}\ominus f\left(x_{m},w_{k},\delta_{m:k}\right)}{\partial w_{m}}\right|_{\begin{array}{c}
x_{m}=\hat{x}_{m}\\
w_{k}=0
\end{array}}=G_{m:k}
\]

\end_inset

where 
\begin_inset Formula 
\[
F_{m:k}=\begin{bmatrix}\mathbf{Ad}_{\text{Exp}\left(\delta_{m:k}\hat{u}_{m}\right)^{-1}} & J_{r}\left(\delta_{m:k}\hat{u}_{m}\right)\delta_{m:k}\\
0 & I
\end{bmatrix}
\]

\end_inset

and 
\begin_inset Formula 
\[
G_{m:k}=\begin{bmatrix}J_{r}\left(\delta_{m:k}\hat{u}_{m}\right)\delta_{m:k} & J_{r}\left(\delta_{m:k}\hat{u}_{m}\right)\frac{\delta_{m:k}^{2}}{2}\\
0 & I\delta_{m:k}
\end{bmatrix}
\]

\end_inset


\end_layout

\begin_layout Proof
We will first prove the statement regarding 
\begin_inset Formula $F_{m:k}$
\end_inset

 and then prove the statement regarding 
\begin_inset Formula $G_{m:k}$
\end_inset

.
 Expanding out the expression 
\begin_inset Formula $x_{k}\ominus f\left(x_{m},w_{k},\delta_{m:k}\right)$
\end_inset

 using equation 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:system-model"
plural "false"
caps "false"
noprefix "false"

\end_inset

 gives 
\begin_inset Formula 
\begin{align*}
g_{k}\ominus\left(g_{m}\exp\left(\delta_{m:k}\left(u_{m}+w_{m}^{g}+\delta_{m:k}w_{m}^{u}\right)\right)\right)\\
w_{k}-w_{m}-\delta_{m:k}w_{m}^{u}
\end{align*}

\end_inset

The derivative of the first term w.r.t.
 
\begin_inset Formula $g_{m}$
\end_inset

 is 
\begin_inset Formula 
\begin{align*}
 & \lim_{\alpha\to0}\frac{g_{k}\ominus\left(g_{m}\exp\left(\alpha\right)\exp\left(U\right)\right)-g_{k}\ominus\left(g_{m}\exp\left(U\right)\right)}{\alpha}\\
 & =\lim_{\alpha\to0}\frac{\log\left(\exp\left(-U\right)\exp\left(-\alpha\right)g_{m}^{-1}g_{k}\right)-0}{\alpha}\\
 & =\lim_{\alpha\to0}\frac{\log\left(\exp\left(-\mathbf{Ad}_{\exp\left(-U\right)}\alpha\right)\exp\left(-U\right)g_{m}^{-1}g_{k}\right)}{\alpha}\\
 & =\lim_{\alpha\to0}\frac{\log\left(\exp\left(-\mathbf{Ad}_{\exp\left(-U\right)}\alpha\right)\right)}{\alpha}\\
 & =\lim_{\alpha\to0}\frac{-\mathbf{Ad}_{\exp\left(-U\right)}\alpha}{\alpha}\\
 & =-\mathbf{Ad}_{\exp\left(-U\right)}
\end{align*}

\end_inset


\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\xout off
\uuline off
\uwave off
\noun off
\color none
-
\backslash
mathbf{Ad}_{
\backslash
exp
\backslash
left(-U
\backslash
right)}
\end_layout

\begin_layout Standard
\begin_inset CommandInset bibtex
LatexCommand bibtex
btprint "btPrintCited"
bibfiles "/home/mark/Documents/Mendeley/library"
options "plain"

\end_inset


\end_layout

\end_body
\end_document
