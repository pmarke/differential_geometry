#LyX 2.3 created this file. For more info see http://www.lyx.org/
\lyxformat 544
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass IEEEtran
\begin_preamble
\usepackage{algorithm,algpseudocode,tabularx}
\usepackage{cite}
\newcommand{\multiline}[1]{%
  \begin{tabularx}{\dimexpr\linewidth-\ALG@thistlm}[t]{@{}X@{}}
    #1
  \end{tabularx}
}
\end_preamble
\use_default_options true
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding auto
\fontencoding global
\font_roman "default" "default"
\font_sans "default" "default"
\font_typewriter "default" "default"
\font_math "auto" "auto"
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\use_microtype false
\use_dash_ligatures true
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize 10
\spacing single
\use_hyperref false
\papersize default
\use_geometry true
\use_package amsmath 2
\use_package amssymb 2
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 1
\use_minted 0
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 1in
\topmargin 1in
\rightmargin 1in
\bottommargin 1in
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\is_math_indent 0
\math_numbering_side default
\quotes_style english
\dynamic_quotes 0
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Title
Multiple Target Tracking on Lie Groups Using Recursive-RANSAC
\end_layout

\begin_layout Section
Introduction
\end_layout

\begin_layout Standard
Target tracking is challenging field of research since it deals with tracking
 a target whose internal forces are unknown.
 Some other challenges to target tracking are computational complexities,
 fitting a system model to the target, identifying the number of targets
 in a surveillance region, initializing tracks (target models) of targets,
 and determining if a track represents an actual target.
 The latter challenges are often removed, depending on the type of tracking
 algorithm, by assuming that the target type is known and thus the system
 model is known, the number of targets are known, and tracks are initialized.
 
\end_layout

\begin_layout Standard
There exists optimal algorithms for multiple target tracking (MTT) such
 as the multiple hypothesis tracking (MHT) .The MHT algorithm is a batch
 tracker that uses a hard data association technique.
 It is an optimal algorithm since it considers all possible measurement
 associations in order to create the hypotheses tree.
 While MHT is an optimal algorithm, it is not feasible unless appropriate
 techniques are used to limit the number of generated hypotheses: pruning,
 merging, sliding window, etc.
 When these techniques are used, the algorithm is suboptimal.
 Lastly, the algorithm is capable of initializing and pruning tracks.
 There are two variants of MHT: measurement-oriented (MO-MHT) 
\begin_inset CommandInset citation
LatexCommand cite
key "Reid1979"
literal "true"

\end_inset

 and track-oriented (TO-MHT) 
\begin_inset CommandInset citation
LatexCommand cite
key "Kurien1990"
literal "true"

\end_inset

.
 The TO-MHT is capable of real time tracking for moderately simple tracking
 scenarios.
 Because of these limitations, we rely on suboptimal tracking algorithms.
\end_layout

\begin_layout Standard
Some of these common suboptimal algorithms are the global nearest neighbor
 (GNN), the joint probabilistic data association filter (JPDAF), the probabilist
ic multi-hypothesis tracker (PHMT) and the probability hypothesis density
 (PHD).
 Each of these algorithms have variants that trade optimality for computational
 feasibility.
 There are also many other MTT algorithms which we will not discussed here
 but we refer the reader to 
\begin_inset CommandInset citation
LatexCommand cite
key "Pulford2005"
literal "true"

\end_inset

 for a survey of the more common algorithms.
 We briefly present some of these common algorithms in order to compare
 and contrast them.
 
\end_layout

\begin_layout Standard
The GNN is the simplest MTT method.
 It is a single-scan tracker that uses hard data association to assign measureme
nts to tracks based on distance without taking into account statistical
 information such as the innovation term 
\begin_inset CommandInset citation
LatexCommand cite
key "Bar-Shalom2011"
literal "true"

\end_inset

.
 The GNN filter is a computationally efficient algorithm, but its 
\begin_inset Quotes eld
\end_inset

greedy
\begin_inset Quotes erd
\end_inset

 data association causes track divergence and loss in clutter.
 This method requires an additional scheme to prune, initialize and merge
 tracks.
 
\end_layout

\begin_layout Standard
The JPDAF is an extension of the probabilistic data association filter (PDAF)
 to multiple target tracking.
 It is a single-scan tracker that uses a soft data association technique
 to weighs new measurements inside a track's validation region based upon
 the new measurement's joint data association probability 
\begin_inset CommandInset citation
LatexCommand cite
key "Bar-Shalom2009"
literal "true"

\end_inset

.
 The weights are used to update the tracks.
 Even though it is a single-scan tracker, calculating the joint probability
 of all possible data associations per scan makes it more computationally
 complex and demanding.
 In addition, this method requires an additional scheme to prune, initialize
 and merge tracks.
 
\end_layout

\begin_layout Standard
The PHMT is a soft data association algorithm that relaxes the criteria
 that a track can only produce at most one measurement per time step.
 It does this by using a combination of the maximum likelihood and expectation
 maximization algorithm 
\begin_inset CommandInset citation
LatexCommand cite
key "Dempster1977"
literal "true"

\end_inset

 to maximize the posterior probability of the tracks given a batch of measuremen
ts or a windowed batch of measurements.
 In the original form, it didn't have a method of track initialization or
 pruning, but later variants used the Hugh transform or the MHT as a front
 end to initialize tracks 
\begin_inset CommandInset citation
LatexCommand cite
key "Crousey2009"
literal "true"

\end_inset

.
 The PHMT performance is similar to that of the PDAF which is a single-scan
 tracker 
\begin_inset CommandInset citation
LatexCommand cite
key "Bar-Shalom2011"
literal "true"

\end_inset

.
 A variant of the PHMT operates on a windowed batch of data, and can be
 used as a single-scan tracker.
 Regardless of the variant of the PHMT, this method requires an additional
 scheme to prune and merge tracks.
 
\end_layout

\begin_layout Standard
The PHD ...
 Talk about it with references.
 
\end_layout

\begin_layout Standard
A recently new MTT algorithm is Recursive Random Sample Consensus (R-RANSAC).
 It has a modular paradigm that can be easily implemented in real time,
 and is capable of track initialization, pruning, and merging.
 Another novelty of the algorithm is that the surveillance region doesn't
 need to be fixed, but can change provided that a transformation is available
 to transform measurements and tracks from the previous surveillance to
 the current one.
\end_layout

\begin_layout Standard
R-RANSAC was first designed to estimate the parameters of multiple static
 signals 
\begin_inset CommandInset citation
LatexCommand cite
key "Niedfeldt2013"
literal "true"

\end_inset

, but it was quickly extended to track multiple dynamic targets 
\begin_inset CommandInset citation
LatexCommand cite
key "Niedfeldt"
literal "true"

\end_inset

.
 Since then, R-RANSAC has been improved, modified and changed in various
 literature 
\begin_inset CommandInset citation
LatexCommand cite
key "Niedfeldt2014b,Niedfeldt2014,Niedfeldt2016,Ingersoll2015,Ingersoll2015a,Defranco2015,Lusk2018,Niedfeldt2017,Wikle2017,Millard2017,Yang2017,Yang2018"
literal "true"

\end_inset

.
 All of these improvements seemed to have stemmed from 
\begin_inset CommandInset citation
LatexCommand cite
key "Niedfeldt"
literal "true"

\end_inset

, which resulted in many different variants of R-RANSAC.
 This paper aims at aggregating the best contributions while adding some
 of our own improvements.
 Our specific contributions include removing the constraint that measurements
 come at a fixed time interval, improving the criteria for determining if
 a track represents an actual target, allowing the measurement and process
 noise covariance to change at every time step, extending the theory of
 R-RANSAC to any Lie group, modifying the model merging method and give
 several example implementation.
\end_layout

\begin_layout Standard
The rest of the paper is outlined as follows...
\end_layout

\begin_layout Standard
\begin_inset Separator parbreak
\end_inset


\end_layout

\begin_layout Section
Lie Theory Review
\begin_inset CommandInset label
LatexCommand label
name "sec:Lie-Theory-Review"

\end_inset


\end_layout

\begin_layout Standard
Lie theory is an extensive topic which we cannot cover in this paper; thus,
 we required the reader to be familiar with Lie theory.
 For those unfamiliar with this material, we refer the interested reader
 primarily to 
\begin_inset CommandInset citation
LatexCommand cite
key "Sola2018"
literal "true"

\end_inset

.
 Solá offers a very gentle introduction to Lie theory that covers the majority
 of information needed to understand this paper.
 We also follow much of the notation prescribed by Solá and Hertzberg in
 
\begin_inset CommandInset citation
LatexCommand cite
key "Sola2018"
literal "true"

\end_inset

 and 
\begin_inset CommandInset citation
LatexCommand cite
key "Hertzberg2013"
literal "true"

\end_inset

.
 For those who are interested in a more rigorous treatment of Lie theory,
 we refer the reader to 
\begin_inset CommandInset citation
LatexCommand cite
key "Barfoot2019,Stillwell2008,Hall2003,Bullo2005a,Lee2013,Abraham1998"
literal "true"

\end_inset

.
\end_layout

\begin_layout Standard
The objective of this section is to provide a brief review and establish
 notation of the pertinent concepts of Lie theory.
 In this document we will focus on targets with a discrete system model
 and constant velocity, this is merely to simplify the presentation of the
 material.
 With no loss in generality, everything we present can be extended to targets
 with a continuous system model and constant acceleration by using a semidirect
 product group formed from a Lie group and its Lie algebra.
 A good discussion of the semidirect product group can be found in 
\begin_inset CommandInset citation
LatexCommand cite
key "Engo2003"
literal "true"

\end_inset

.
 If using a continuous system that requires numerical integration on the
 manifold, we refer the reader to 
\begin_inset CommandInset citation
LatexCommand cite
key "Munthe-Kaas1995,Munthe-Kaas1998,Munthe-Kaas1999"
literal "true"

\end_inset

 which describe the Runge-Kutta-Muthe-Kass numerical integration technique.
 
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $G$
\end_inset

 denote a Lie group and 
\begin_inset Formula $\mathfrak{g}$
\end_inset

 denote it's corresponding Lie algebra.
 The exponential function is a surjection that maps an element of the Lie
 algebra to an element of the Lie group, and the logarithmic map is the
 inverse of the exponential map.
 We denote these maps as
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{subequations}
\end_layout

\end_inset

 
\begin_inset Formula 
\begin{align*}
\exp:\mathfrak{g} & \to G\\
\log:G & \to\mathfrak{g}.
\end{align*}

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{subequations}
\end_layout

\end_inset

 The definition of these maps is dependent on the Lie group.
 For matrix Lie groups, the exponential and logarithm maps are defined as
 the matrix exponential and matrix logarithm.
 
\end_layout

\begin_layout Standard
The Lie algebra is isomorphic to the Euclidean space 
\begin_inset Formula $\mathbb{R}^{n}$
\end_inset

 where 
\begin_inset Formula $n$
\end_inset

 is the dimension of the Lie algebra.
 We will denote this Euclidean space as 
\begin_inset Formula $E$
\end_inset

.
 The Wedge function maps an element from the Euclidean space to the Lie
 algebra, and the Vee function is the inverse function which we denote as
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{subequations}
\end_layout

\end_inset

 
\begin_inset Formula 
\begin{align*}
\cdot^{\wedge}:E\to\mathfrak{g} & \quad\left(v\right)\mapsto v^{\wedge}\\
\cdot^{\vee}:\mathfrak{g}\to E & \quad\left(v^{\wedge}\right)^{\vee}\mapsto v.
\end{align*}

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{subequations}
\end_layout

\end_inset

The definitions of these maps are dependent on the Lie algebra.
 We will rely on context to distinguish between elements of 
\begin_inset Formula $E$
\end_inset

 and 
\begin_inset Formula $\mathfrak{g}$
\end_inset

.
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $\text{Exp}:E\to G$
\end_inset

 and its inverse be defined as the composite function 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{subequations}
\end_layout

\end_inset


\begin_inset Formula 
\begin{align*}
\text{Exp}\left(v\right) & =\exp\left(v^{\wedge}\right)\\
\text{Log}\left(g\right) & =\log\left(g\right)^{\vee}.
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{subequations}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Other functions of importance are the box-plus/minus and the o-plus/minus
 defined as 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{subequations}
\end_layout

\end_inset

 
\begin_inset Formula 
\begin{align*}
\boxplus:G\times\mathfrak{g}\to G & \quad\left(g,u\right)\mapsto g\bullet\exp\left(u\right)\\
\boxminus:G\times G\to\mathfrak{g} & \quad\left(g_{1},g_{2}\right)\mapsto\log\left(g_{2}^{-1}\bullet g_{1}\right)\\
\oplus:G\times E\to G & \quad\left(g,v\right)\mapsto g\bullet\text{Exp}\left(v\right)\\
\ominus:G\times G\to E & \quad\left(g_{1},g_{2}\right)\mapsto\text{Log}\left(g_{2}^{-1}\bullet g\right).
\end{align*}

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{subequations}
\end_layout

\end_inset

 where 
\begin_inset Formula $\bullet$
\end_inset

 denotes the group operator which we will omit in the future, and 
\begin_inset Formula $g_{2}^{-1}$
\end_inset

 is the inverse element of 
\begin_inset Formula $g_{2}$
\end_inset

.
 We have based the definition of these function on left trivializations
 (using vector fields that are left invariant) since we will present the
 material using the left trivialization.
 Note that we could easily use the right trivialization as well.
\end_layout

\begin_layout Standard
The adjoint of 
\begin_inset Formula $G$
\end_inset

 is a representation of 
\begin_inset Formula $G$
\end_inset

 that acts on 
\begin_inset Formula $\mathfrak{g}$
\end_inset

 and is denoted and generically defined as 
\begin_inset Formula 
\begin{align*}
Ad_{g}:\mathfrak{g} & \to\mathfrak{g};\quad\left(u\right)\mapsto gug^{-1}
\end{align*}

\end_inset

where 
\begin_inset Formula $g\in G$
\end_inset

.
 Since the adjoint is a linear function, we can find a matrix version that
 operates on the associated Euclidean space generically defined as 
\begin_inset Formula 
\[
\mathbf{Ad}_{g}:E\to E;\quad\left(v\right)\mapsto\mathbf{Ad}_{g}v
\]

\end_inset

where 
\begin_inset Formula $\mathbf{Ad}_{g}$
\end_inset

 is the matrix adjoint representation of 
\begin_inset Formula $G$
\end_inset

.
 A useful property of the adjoint is 
\begin_inset Formula 
\[
g\text{Exp}\left(v\right)=\text{Exp}\left(\mathbf{Ad}_{g}v\right)g.
\]

\end_inset


\end_layout

\begin_layout Standard
The adjoint of 
\begin_inset Formula $\mathfrak{g}$
\end_inset

 is a representation of 
\begin_inset Formula $\mathfrak{g}$
\end_inset

 that acts on 
\begin_inset Formula $\mathfrak{g}$
\end_inset

.
 It is also the Lie bracket 
\begin_inset Formula $\left[\cdot,\cdot\right]$
\end_inset

 which we will generically define as 
\begin_inset Formula 
\[
ad_{u}:\mathfrak{g}\to\mathfrak{g};\quad\left(v\right)\mapsto\left[u,v\right]
\]

\end_inset

where 
\begin_inset Formula $u\in\mathfrak{g}$
\end_inset

.
 Since the adjoint is a linear function, we can find a matrix version that
 operates on the associated Euclidean space generically defined as 
\begin_inset Formula 
\[
\mathbf{ad}_{u}:E\to E\quad\left(v\right)\mapsto\mathbf{ad}_{u}v
\]

\end_inset

where 
\begin_inset Formula $u\in\mathfrak{g}$
\end_inset

 and 
\begin_inset Formula $\mathbf{ad}_{u}$
\end_inset

 is the matrix adjoint representation of 
\begin_inset Formula $\mathfrak{g}$
\end_inset

.
 
\end_layout

\begin_layout Standard
As stated in 
\begin_inset CommandInset citation
LatexCommand cite
key "Iserles2000a"
literal "true"

\end_inset

, we can define the differential of the exponential mapping as the 'left
 trivialized' tangent of the exponential map or as the 'right trivialized'
 tangent of the exponential map.
 These differentials are also commonly called the right and left Jacobians.
 The right and left Jacobians 
\begin_inset Formula $J_{r},J_{l}:E\to GL\left(E\right)$
\end_inset

 are defined as
\begin_inset Formula 
\begin{align*}
J_{r}\left(v\right) & =\frac{^{r}\partial\text{Exp}\left(v\right)}{\partial v} &  & J_{l}\left(v\right)=\frac{^{l}\partial\text{Exp}\left(v\right)}{\partial v}.
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
Their inverses are defined as 
\begin_inset Formula 
\begin{align*}
J_{r}^{-1}\left(v\right) & =\frac{^{r}\partial\text{Log}\left(v\right)}{\partial v} &  & J_{l}^{-1}\left(v\right)=\frac{^{l}\partial\text{Log}\left(v\right)}{\partial v}.
\end{align*}

\end_inset

The right Jacobian has the property that for small 
\begin_inset Formula $\delta v\in E$
\end_inset

 and 
\begin_inset Formula $v\in E$
\end_inset

 
\begin_inset Formula 
\begin{align*}
\text{Exp}\left(\delta v+u\right) & \approx\text{Exp}\left(v\right)\text{Exp}\left(J_{r}\left(v\right)\delta v\right)\\
\text{Exp}\left(v\right)\text{Exp}\left(\delta v\right) & \approx\text{Exp}\left(v+J_{r}^{-1}\left(v\right)\delta v\right)\\
\text{Log}\left(\text{Exp}\left(v\right)\text{Exp}\left(\delta v\right)\right) & \approx v+J_{r}^{-1}\left(v\right)\delta v.
\end{align*}

\end_inset

The left Jacobian has the similar property that for small 
\begin_inset Formula $\delta v\in E$
\end_inset

 and 
\begin_inset Formula $v\in E$
\end_inset

 
\begin_inset Formula 
\begin{align*}
\text{Exp}\left(v+\delta v\right) & \approx\text{Exp}\left(J_{l}\left(v\right)\delta v\right)\text{Exp}\left(v\right)\\
\text{Exp}\left(\delta v\right)\text{Exp}\left(v\right) & \approx\text{Exp}\left(v+J_{l}^{-1}\left(v\right)\delta v\right)\\
\text{Log}\left(\text{Exp}\left(\delta v\right)\text{Exp}\left(v\right)\right) & \approx v+J_{l}^{-1}\left(v\right)\delta v.
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
The derivation of the left and right Jacobians stems from the Baker-Campbell-Hau
sdorff formula and can be studied in 
\begin_inset CommandInset citation
LatexCommand cite
key "Hall2003"
literal "true"

\end_inset

 and 
\begin_inset CommandInset citation
LatexCommand cite
key "Barfoot2019"
literal "true"

\end_inset

.
 Another useful property of the left and right Jacobians are 
\begin_inset Formula 
\begin{align*}
J_{r}\left(-v\right) & =J_{l}\left(v\right)\\
J_{l}\left(-v\right) & =J_{r}\left(v\right)
\end{align*}

\end_inset

which is discussed in 
\begin_inset CommandInset citation
LatexCommand cite
key "Sola2018"
literal "false"

\end_inset

.
\end_layout

\begin_layout Standard
We can from a new group from the direct product of the Lie group and the
 corresponding Euclidean space denoted 
\begin_inset Formula $x=\left(g,v\right)\in G\times E$
\end_inset

.
 It's group operator and inverse are defined as 
\begin_inset Formula 
\begin{align*}
x_{1}\bullet x_{2} & =\left(g_{1}g_{2},v_{1}+v_{2}\right),\\
x_{1}^{-1} & =\left(g_{1}^{-1},-v_{1}\right).
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
The Lie algebra and the corresponding Euclidean space of 
\begin_inset Formula $G\times E$
\end_inset

 are 
\begin_inset Formula $\mathfrak{g}\times E$
\end_inset

 and 
\begin_inset Formula $E\times E$
\end_inset

.
 The exponential and logarithmic maps are defined as 
\begin_inset Formula 
\begin{align*}
\text{Exp}\left(\left(a,b\right)\right) & =\left(\text{Exp}\left(a\right),b\right)\\
\text{Log}\left(\left(g,v\right)\right) & =\left(\text{Log}\left(g\right),v\right),
\end{align*}

\end_inset

where 
\begin_inset Formula $\left(a,b\right)\in E\times E$
\end_inset

 and 
\begin_inset Formula $\left(g,v\right)\in G\times E$
\end_inset

.
 
\end_layout

\begin_layout Standard
The adjoint of 
\begin_inset Formula $G\times E$
\end_inset

 is defined as 
\begin_inset Formula 
\[
Ad_{(g,v)}\left(a,b\right)=\left(\mathbf{Ad}_{g}a,\mathbf{ad}_{v}b\right),
\]

\end_inset

and the matrix form is 
\begin_inset Formula 
\[
\mathbf{Ad}_{\left(g,v\right)}=\begin{bmatrix}\mathbf{Ad}_{g} & 0\\
0 & \mathbf{ad}_{v}
\end{bmatrix}.
\]

\end_inset

Let 
\begin_inset Formula $\left(c,d\right)\in E\times E$
\end_inset

, the adjoint of 
\begin_inset Formula $E\times E$
\end_inset

 is defined as 
\begin_inset Formula 
\[
ad_{\left(a,b\right)}\left(c,d\right)=\left(\mathbf{ad}_{a}c,0\right),
\]

\end_inset

and the matrix form is 
\begin_inset Formula 
\[
\mathbf{ad}_{\left(a,c\right)}=\begin{bmatrix}\mathbf{ad}_{a} & 0\\
0 & 0
\end{bmatrix}.
\]

\end_inset


\end_layout

\begin_layout Standard
The right and left inverse Jacobians in matrix notation are 
\begin_inset Formula 
\begin{align*}
J_{r}^{-1}\left(a,c\right) & =\begin{bmatrix}J_{r}^{-1}\left(a\right) & 0\\
0 & I
\end{bmatrix}\\
J_{l}^{-1}\left(a,c\right) & =\begin{bmatrix}J_{r}^{-1}\left(a\right) & 0\\
0 & I
\end{bmatrix}
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
Lastly, let 
\begin_inset Formula $\left(g_{1},v_{1}\right),\left(g_{2},v_{2}\right)\in G\times E$
\end_inset

, the ominus operator is 
\begin_inset Formula 
\[
\left(g_{1},v_{1}\right)\ominus\left(g_{2},v_{2}\right)=\left(e,v_{1}-v_{2}\right),
\]

\end_inset

where 
\begin_inset Formula 
\[
e=\text{Log}\left(g_{2}^{-1}g_{1}\right).
\]

\end_inset


\end_layout

\begin_layout Standard
For more information about the direct product group see 
\begin_inset CommandInset citation
LatexCommand cite
key "Engo2003"
literal "false"

\end_inset

.
 Also note that we have overloaded the functions believing that the context
 will make it clear which function we are using.
 
\end_layout

\begin_layout Section
R-RANSAC Overview 
\begin_inset CommandInset label
LatexCommand label
name "sec:Problem-Description"

\end_inset


\end_layout

\begin_layout Standard
R-RANSAC is designed to track multiple dynamic targets moving in a global
 surveillance region (GSR).
 Targets are observed via sensors.
 Each sensor perceives a subset of the surveillance region called a local
 surveillance region (LSR) which has a local frame that the data is expressed
 in and a volume 
\begin_inset Formula $S_{vol}^{s}$
\end_inset

; the superscript 
\begin_inset Formula $s$
\end_inset

 is used to refer to the 
\begin_inset Formula $s^{th}$
\end_inset

 source.
 Measurements are extracted from the data using algorithms.
 We call the unique sensor and algorithm pair a measurement source or source
 for short.
 In the case that multiple sources have the same sensor, it is possible
 for duplication of information which, when incorporated into a state estimate
 of a target, would lead to overconfidence of the state estimate.
 We do not have a way to account for this except to assume it is minimal.
 
\end_layout

\begin_layout Standard
A sensor scan occurs when a source produces new measurements.
 Measurements from a source can be either false or true measurements.
 We assume that false measurements are uniformly distributed in the LSR,
 and that the number of false measurements from a source per sensor scan
 can be modeled using a Poisson distribution with parameter 
\begin_inset Formula $\Lambda$
\end_inset

 being the expected value.
 The expected number of false measurements per unit volume is called the
 spacial density and is denoted 
\begin_inset Formula $\lambda^{s}=\frac{\Lambda^{s}}{S_{vol}^{s}}$
\end_inset

.
 We also assume that a measurement source provides at most one true measurement
 per target every sensor scan with probability 
\begin_inset Formula $P_{D}^{s}$
\end_inset

, i.e.
 the probability of detection.
 Since the measurements come from a local surveillance region, they must
 be transformed into the global frame, in which R-RANSAC tracks targets,
 before being given to R-RANSAC.
\end_layout

\begin_layout Standard
R-RANSAC process the measurements in order to follow targets.
 The paradigm for R-RANSAC is designed to be very modular; however, our
 presentation will use specific components to properly protray our contributions.
 We have organized R-RANSAC into three main phase: data management, track
 initialization, and track management.
 The architecture of R-RANSAC is protrayed in figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:overview"
plural "false"
caps "false"
noprefix "false"

\end_inset

, and in the following subsections we go into more detail about each phase.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename images/Overview.pdf
	width 90col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:overview"

\end_inset

This figure provides an overview of R-RANSAC
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Data Management
\end_layout

\begin_layout Standard
Data management occurs after new measurements and a new transformation 
\begin_inset Formula $T$
\end_inset

 are received.
 First, expired measurements are removed from the clusters and tracks are
 propagated forward in time.
 An expired measurement is a measurement that was received at a time before
 the current time window 
\begin_inset Formula $T_{W}$
\end_inset

.
 This is to prevent a large storage of measurements.
 A track is a tuple containing the state estimate of the target, 
\begin_inset Formula $\hat{x}$
\end_inset

, corresponding error covariance, 
\begin_inset Formula $P$
\end_inset

, consensus set, 
\begin_inset Formula $\mathcal{CS}$
\end_inset

, track likelihood, 
\begin_inset Formula $ML$
\end_inset

, and label, 
\begin_inset Formula $L$
\end_inset

.
 In other words, a track is the tuple 
\begin_inset Formula $\mathcal{T}=\left(\hat{x},P,\mathcal{CS},TL,L\right)$
\end_inset

.
 A consensus set is the set of measurements associated to the track, the
 model likelihood is an indicator of how good the track represents a target,
 and the label is a unique numerical number used to identify good tracks.
\end_layout

\begin_layout Standard
If a transformation was provided, all of the measurements (not including
 the new measurements since they should already be expressed in the current
 global frame) and tracks are transformed to the current global frame, i.e.
 their state estimate and error covariance are transformed to the current
 global frame.
 The new measurements are then associated to either an existing track or
 a cluster.
 A cluster is a set of neighboring measurements that are not associated
 to a track as described in 
\begin_inset CommandInset citation
LatexCommand cite
key "Yang2017"
literal "false"

\end_inset

.
 This phase is dicussed in more detail in section 
\begin_inset Note Note
status open

\begin_layout Plain Layout
add reference
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Track Initialization
\end_layout

\begin_layout Standard
The track initialization phase performs RANSAC on each cluster that has
 at least has at least 
\begin_inset Formula $\tau_{CM}$
\end_inset

 measurements to try to generate new track.
 RANSAC tries to fit measurements from a cluster to the target's model.
 If enough measurements fit the model, then a new track is initialized.
 The measurements used to initialize tracks are removed from the respective
 cluster.
 This phase is discussed in more detail in section 
\begin_inset Note Note
status open

\begin_layout Plain Layout
add reference
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Track Management
\end_layout

\begin_layout Standard
The last phase of R-RANSAC is track management which consists of merging
 and pruning tracks, promoting and demoting tracks, and assigning new good
 tracks a unique label.
 Some tracks will begin to coalesce as they are propagated and updated.
 If these tracks are deemed similar, they are merged together using the
 track-to-track fusion method.
 Since R-RANSAC stores up to 
\begin_inset Formula $M$
\end_inset

 Tracks, if there are more than 
\begin_inset Formula $M$
\end_inset

 tracks we remove the tracks with the lowest track likelihood.
 If a track's likelihood is above the threshold 
\begin_inset Formula $\tau_{\rho}$
\end_inset

 then it is promoted to a good track; otherwise, it is a poor track.
 Good tracks receive a unique numerical label to identify it , 
\begin_inset CommandInset citation
LatexCommand cite
key "Ingersoll2015a"
literal "true"

\end_inset

.
 At the end of this phase, a list of good tracks is published to the user.
 This phase is discussed in more detail in section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Track-Management"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Subsection
Target Model
\end_layout

\begin_layout Standard
We assume that the target's configuration manifold is a Lie group and can
 be modeled using a discrete, dynamic, near constant velocity, time-invariant
 model of the form
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{subequations}
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "eq:system"

\end_inset

 
\begin_inset Formula 
\begin{align}
x_{m_{2}} & =f\left(x_{m_{1}},w_{m_{2}},\delta_{m_{1}:m_{2}}\right)\\
y_{m_{2}}^{s} & =h^{s}\left(x_{m_{2}},v_{m_{2}}\right),
\end{align}

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{subequations}
\end_layout

\end_inset

 where the subscripts 
\begin_inset Formula $m_{1}$
\end_inset

 and 
\begin_inset Formula $m_{2}$
\end_inset

 denote different times, 
\begin_inset Formula $\delta_{m_{2}:m_{1}}\in\mathbb{R}$
\end_inset

 is time interval from 
\begin_inset Formula $m_{1}$
\end_inset

 to 
\begin_inset Formula $m_{2}$
\end_inset

, 
\begin_inset Formula $x=\left(g,u\right)\in G\times E$
\end_inset

 is the state of the target, 
\begin_inset Formula $y^{s}\in N$
\end_inset

 is an observation from the 
\begin_inset Formula $s^{th}$
\end_inset

 source and 
\begin_inset Formula $N$
\end_inset

 is a lie group, 
\begin_inset Formula $w=\left(w^{g},w^{u}\right)\in E\times E$
\end_inset

 is process noise 
\begin_inset Formula $\mathcal{N}\left(0,Q\right)$
\end_inset

, 
\begin_inset Formula $v$
\end_inset

 is measurement noise 
\begin_inset Formula $\mathcal{N}\left(0,R\right)$
\end_inset

 and is an element of the Euclidean space corresponding to the Lie algebra
 of 
\begin_inset Formula $N$
\end_inset

, 
\begin_inset Formula $h^{s}:G\times E\to N$
\end_inset

 is an observation function corresponding to the 
\begin_inset Formula $s^{th}$
\end_inset

 source and 
\begin_inset Formula $f:G\times E\to G\times E$
\end_inset

 is the state transition function defined as 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{subequations}
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "eq:system-model"

\end_inset


\begin_inset Formula 
\begin{align}
 & f\left(x_{m_{1}},w_{m_{2}},\delta_{m_{1}:m_{2}}\right)=x_{m_{1}}\oplus\\
 & \left(\delta_{m_{1}:m_{2}}\left(u_{m_{1}}+w_{m_{1}}^{g}+\frac{\delta_{m_{1}:m_{2}}}{2}w_{m_{2}}^{u}\right)\right.\\
 & \left.,u_{m_{1}}+\delta_{m_{1}:m_{2}}w_{m_{2}}^{u}\right).
\end{align}

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{subequations}
\end_layout

\end_inset

 This form is similar to the one found in 
\begin_inset CommandInset citation
LatexCommand cite
key "Sjoberg2019"
literal "true"

\end_inset

 and is an exact solution provided that the Lie group is commutative.
 If the Lie group is not commutative, the exact solution is cumbersome if
 not impossible to derive, in which case we approxiate the solution.
 Note that by how we defined the model, the model works for forwards and
 backwards propagation, i.e.
 
\begin_inset Formula $m_{1}$
\end_inset

 can refer to a time before or after 
\begin_inset Formula $m_{2}$
\end_inset

.
 
\end_layout

\begin_layout Subsection
Summary of Assumptions
\end_layout

\begin_layout Standard
Below is a summary of our assumptions.
\end_layout

\begin_layout Enumerate
The system is observable.
\end_layout

\begin_layout Enumerate
The process and measurement noises are represented by a white-noise, zero-mean,
 Gaussian distribution and that their covariances are known.
\end_layout

\begin_layout Enumerate
All measurements are independent.
\end_layout

\begin_layout Enumerate
The expected number of false measurements from each measurement source per
 sensor scan is modeled using a Poisson distribution with spatial density
 parameter 
\begin_inset Formula $\lambda$
\end_inset

, and that the false measurements are uniformly distributed in the LSR.
\end_layout

\begin_layout Enumerate
Every measurement given to R-RANSAC is expressed in the current global frame.
 
\end_layout

\begin_layout Enumerate
If the global frame moves, a transformation is provided to R-RANSAC in order
 to transform the measurements and tracks to the current global frame.
\end_layout

\begin_layout Section
Data Management
\end_layout

\begin_layout Standard
In the data management phase: expired measurements are removed, the tracks
 are propagates, measurements and tracks are transformed, and tracks are
 updated using measurements associated to the tracks.
 As mentioned in the introduction, there are a variety of ways to propagate
 the tracks, associate measurements, and update the tracks.
 Due to the modularity of R-RANSAC, R-RANSAC could employ most of these
 methods.
 Some of these methods are compared in 
\begin_inset CommandInset citation
LatexCommand cite
key "Ingersoll2015a"
literal "false"

\end_inset

 which concluded that the PDAF is a good balance between optimalitiy and
 computation efficieny.
 In addition, the PDAF has all of the components necessary to present R-RANSAC
 in a Lie group setting.
 Therefore, in this section we will show how the PDAF can be used to propagate
 and update tracks and associate measurements in a Lie group setting focusing
 only on the parts we believe need further discussion.
 
\end_layout

\begin_layout Standard
The PDAF is a Baysian filter which requires modeling uncertainty on Lie
 groups.
 For some additional background on modeling uncertainty on Lie groups we
 refer the reader to 
\begin_inset CommandInset citation
LatexCommand cite
key "Bourmaud2014,Kim2017,Long2013,Bourmaud2013"
literal "true"

\end_inset

.
 When presenting parts of the PDAF we will follow some of the derivation,
 convention, notation and terminology from 
\begin_inset CommandInset citation
LatexCommand cite
key "Reid2001,Reid2001a,Thrun2006"
literal "true"

\end_inset

 but adapted for the Lie group setting.
 
\end_layout

\begin_layout Standard
To keep notation clean, we will present the PDAF for a single target, but
 it is trivially extended to the case of multiple targets.
 Also, the PDAF is orignally designed to work with a single measurement
 source, but we extend it to work with multiple measurement sources.
 To facilitate this, we establish additional notation.
 Let 
\begin_inset Formula $\mathcal{S}=\left\{ 1,\ldots,N_{s}\right\} $
\end_inset

 be the indexing set of sources with 
\begin_inset Formula $N_{s}$
\end_inset

 being the number of sources, and 
\begin_inset Formula $Y_{m}^{s}$
\end_inset

 being the set of measurements associated to the model at time 
\begin_inset Formula $m$
\end_inset

 produced by source 
\begin_inset Formula $s\in\mathcal{S}$
\end_inset

.
 It is possible that 
\begin_inset Formula $Y_{m}^{s}=\emptyset$
\end_inset

 if a source didn't produce any measurements.
 Lastly, let 
\begin_inset Formula $y_{m}^{s,j}\in Y_{m}^{s}$
\end_inset

 denote the 
\begin_inset Formula $j^{th}$
\end_inset

 measurement in 
\begin_inset Formula $Y_{m}^{s}$
\end_inset

 assuming that 
\begin_inset Formula $Y_{m}^{s}\neq\emptyset$
\end_inset

.
 
\end_layout

\begin_layout Subsection
Propagation
\end_layout

\begin_layout Standard
In state estimation, it is common to use a Gaussian distribution to represent
 uncertainty.
 When using Lie groups, the uncertainty is modeled in the Lie algebra.
 For example, given a random variable 
\begin_inset Formula $x=\left(g,u\right)$
\end_inset

, we can represent it as 
\begin_inset Formula $x=\hat{x}\oplus\delta x$
\end_inset

 where 
\begin_inset Formula $\hat{x}=\left(\hat{g},\hat{u}\right)\in G\times E$
\end_inset

 and 
\begin_inset Formula $\delta x=\left(\delta g,\delta u\right)\in E\times E$
\end_inset

.
 
\begin_inset Formula $\hat{x}$
\end_inset

 is not a random variable and can be considered as the mean of 
\begin_inset Formula $x$
\end_inset

, and 
\begin_inset Formula $\delta x$
\end_inset

 is a random variable with Gausian distribution 
\begin_inset Formula $\mathcal{N}\left(0,P\right)$
\end_inset

.
 Evaluating the expression for 
\begin_inset Formula $x$
\end_inset

 we get 
\begin_inset Formula $x=\left(\hat{g}\exp\left(\delta g\right),\hat{u}+\delta u\right)$
\end_inset

.
\end_layout

\begin_layout Standard
The probability of the prior distribution, also called the belief distribution,
 is denoted as 
\begin_inset Formula $p\left(x\right)$
\end_inset

 and is defined as
\begin_inset Formula 
\begin{align*}
p\left(x\right) & =\eta\exp\left(-\frac{1}{2}\left(x\ominus\hat{x}\right)^{\top}P^{-1}\left(x\ominus\hat{x}\right)\right)\\
 & =\eta\exp\left(-\frac{1}{2}\delta x^{\top}P^{-1}\delta x\right),
\end{align*}

\end_inset

where 
\begin_inset Formula $\eta$
\end_inset

 is a normalizing coefficient corresponding to the Gaussian distribution.
 We will use 
\begin_inset Formula $\eta$
\end_inset

 to denote any normalizing coefficient.
 
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $x_{k}$
\end_inset

 and 
\begin_inset Formula $x_{m}$
\end_inset

 denote the states at time 
\begin_inset Formula $k$
\end_inset

 and 
\begin_inset Formula $m$
\end_inset

.
 Assuming we know the probability of the state 
\begin_inset Formula $x_{m}$
\end_inset

, we need to propagate the random variable in time to calculate 
\begin_inset Formula $p\left(x_{k}\right)$
\end_inset

.
 According to the total probability theorem discussed in 
\begin_inset CommandInset citation
LatexCommand cite
key "Thrun2006"
literal "false"

\end_inset

,
\begin_inset Formula 
\[
p\left(x_{k}\right)=\int_{\delta x_{m}}p\left(x_{k}\mid x_{m}\right)p\left(x_{m}\right)d\delta x_{k},
\]

\end_inset

where 
\begin_inset Formula $p\left(x_{k}\mid x_{m}\right)$
\end_inset

 is the state transition probability.
 If the system model 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:system-model"
plural "false"
caps "false"
noprefix "false"

\end_inset

 in non linear in the state or noise terms, then 
\begin_inset Formula $p\left(x_{k}\mid x_{m}\right)$
\end_inset

 is not Gaussian; therefore, 
\begin_inset Formula $p\left(x_{m}\right)$
\end_inset

 is not Gaussian.
 A common approach is to linearize 
\begin_inset Formula $p\left(x_{k}\mid x_{m}\right)$
\end_inset

 using a first order Taylor series approximation to ensure that 
\begin_inset Formula $p\left(x_{m}\right)$
\end_inset

 is Gaussian.
 According to lemma 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:a_posterior"
plural "false"
caps "false"
noprefix "false"

\end_inset

, the Gaussian linearization of 
\begin_inset Formula $p\left(x_{k}\right)$
\end_inset

 is 
\begin_inset Formula 
\begin{align*}
p\left(x_{k}\right) & \approx\eta\exp\left(-\frac{1}{2}\delta x_{k}^{\top}P_{k}^{-1}\delta x_{k}\right)
\end{align*}

\end_inset

with 
\begin_inset Formula 
\begin{align*}
P_{k} & =F_{m:k}P_{m}F_{m:k}^{\top}+G_{m:k}QG_{m:k}^{\top}\\
\delta x_{k}^{\top} & =x_{k}\ominus f\left(\hat{x}_{m},0,\delta_{m:k}\right)
\end{align*}

\end_inset


\begin_inset Formula 
\begin{align*}
F_{m:k} & =\begin{bmatrix}\mathbf{Ad}_{\text{Exp}\left(\delta_{m:k}\hat{u}_{m}\right)^{-1}} & J_{r}\left(\delta_{m:k}\hat{u}_{m}\right)\delta_{m:k}\\
0 & I
\end{bmatrix}
\end{align*}

\end_inset


\begin_inset Formula 
\begin{align*}
G_{m:k} & =\begin{bmatrix}J_{r}\left(\delta_{m:k}\hat{u}_{m^{-}}\right)\delta_{m:k} & J_{r}\left(\delta_{m:k}\hat{u}_{m}\right)\frac{\delta_{m:k}^{2}}{2}\\
0 & I\delta_{m:k}
\end{bmatrix}
\end{align*}

\end_inset

The derivations of 
\begin_inset Formula $F_{m:k}$
\end_inset

 and 
\begin_inset Formula $G_{m:k}$
\end_inset

 are done in lemma 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:transition_func_jacobians"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
Thus the new state estimate and error covariance are 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{subequations}
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "eq:JPDAF_propagation"

\end_inset

 
\begin_inset Formula 
\begin{align}
\hat{x}_{k} & =f\left(\hat{x}_{m},0,\delta_{m:k}\right)\\
P_{k} & =F_{m:k}P_{m}F_{m:k}^{\top}+G_{m:k}QG_{m:k}^{\top},
\end{align}

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{subequations}
\end_layout

\end_inset

.
 Note that this propagation scheme can be used to propagate the track frowards
 or backwards in time.
\end_layout

\begin_layout Subsection
Transform Tracks and Measurements
\end_layout

\begin_layout Standard
After propagatin the track, all tracks and measurements not in the current
 global frame are transformed into the current global frame using the data
 provided in the transformation 
\begin_inset Formula $T$
\end_inset

.
 In order to transform a track, the state estimate and error covariance
 need to be transformed.
 Since the transformation is application dependent we cannot go into more
 details except by providing an example in section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Examples"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Subsection
Data Association 
\begin_inset CommandInset label
LatexCommand label
name "subsec:Data-Association"

\end_inset


\end_layout

\begin_layout Standard
The PDAF uses a validation region to indicate if a measurement should be
 associated with a track.
 The validation region is a volume around a track's current state estimate.
 Measurements that are within the validation region are associated to the
 track and used to update the track.
 We will use the validation region described in 
\begin_inset CommandInset citation
LatexCommand cite
key "Bar-Shalom2011,Bar-Shalom1988"
literal "true"

\end_inset

, and present it here adapted to the Lie group setting.
 
\end_layout

\begin_layout Standard
The volume is determined by the probability of a measurement 
\begin_inset Formula $y_{m}^{s,j}$
\end_inset

 from a target which is 
\begin_inset Formula 
\[
p\left(y_{m}^{s,j}\right)=\int_{\delta x_{m}}p\left(y_{m}^{s,j}\mid x_{m}\right)p\left(x_{m}\right)d\delta x_{m}.
\]

\end_inset


\end_layout

\begin_layout Standard
Using lemma 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:a_posterior"
plural "false"
caps "false"
noprefix "false"

\end_inset

, the Gaussian linearization of 
\begin_inset Formula $p\left(y_{m}^{s,j}\right)$
\end_inset

 is 
\begin_inset Formula 
\begin{align}
p\left(y_{m}^{s,j}\right) & \approx\eta\exp\left(-\frac{1}{2}\left(\delta y_{m}^{s,j}\right)^{\top}\left(S_{m}^{s}\right)^{-1}\delta y_{m}^{s,j}\right).\label{eq:probability_y}
\end{align}

\end_inset

with 
\begin_inset Formula 
\[
\delta y_{m}^{s,j}=y_{m}^{s,j}\ominus h^{s}\left(\hat{x}_{m},0\right)
\]

\end_inset


\begin_inset Formula 
\begin{align}
S_{m}^{s} & =V_{m}^{s}R^{s}\left(V_{m}^{s}\right)^{\top}+H_{m}^{s}P_{m}\left(H_{m}^{s}\right)^{\top},\label{eq:innovation_covariance}
\end{align}

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align}
H_{m}^{s} & =\left.\frac{\partial h^{s}\left(x_{m},v_{m}\right)}{\partial x_{m}}\right|_{\begin{array}{c}
x_{m}=\hat{x}_{m},\\
v_{m}=0
\end{array}}\label{eq:ObservationJacobianState}
\end{align}

\end_inset


\begin_inset Formula 
\begin{align}
V_{m}^{s} & =\left.\frac{\partial h^{s}\left(x_{m},v_{m}\right)}{\partial v_{m}}\right|_{\begin{array}{c}
x_{m}=\hat{x}_{m}.\\
v_{m}=0
\end{array}}\label{eq:ObservationJacobianNoise}
\end{align}

\end_inset


\end_layout

\begin_layout Standard
The derivatives of 
\begin_inset Formula $H_{m}^{s}$
\end_inset

 and 
\begin_inset Formula $V_{m}^{s}$
\end_inset

 are dependent on the source which is application dependent so we cannot
 provide them here; however, we do give an example in section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Examples"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
Using the probability that a measurement originated from a target, we associate
 only the measurements with a high probability using a gating technique
 as follows.
 Let 
\begin_inset Formula $d_{V}:N\times N\to\mathbb{R}$
\end_inset

 be a metric defined as 
\begin_inset Formula 
\begin{align}
d_{V}\left(y_{m},\hat{y}_{m}\right) & =\left(y_{m}\ominus\hat{y}_{m}\right)^{\top}\left(S_{m}^{s}\right)^{-1}\left(y_{m}\ominus\hat{y}_{m}\right)\label{eq:validation_region_metric}\\
 & =z_{m}^{\top}z_{m},\nonumber 
\end{align}

\end_inset

where we have dropped the superscripts for readability and 
\begin_inset Formula $p\left(z_{m}\right)$
\end_inset

 is the standard Gaussian probability of 
\begin_inset Formula $p\left(y_{m}\right)$
\end_inset

.
 The metric 
\begin_inset Formula $d_{V}$
\end_inset

 is simply the sum of the square of 
\begin_inset Formula $n$
\end_inset

 standard Gaussian distributions where 
\begin_inset Formula $n$
\end_inset

 is the dimension of 
\begin_inset Formula $y_{m}$
\end_inset

.
 Thus, the values of the metric 
\begin_inset Formula $d_{V}$
\end_inset

 form a chi-square distribution.
\end_layout

\begin_layout Standard
The validation region is the set 
\begin_inset Formula 
\[
\text{val}\left(\hat{y}_{m},\gamma\right)=\left\{ y_{m}\in Y_{m}\,:\,d\left(y_{m},\hat{y}_{m}\right)\leq\tau_{G}\right\} ,
\]

\end_inset

where 
\begin_inset Formula $Y_{m}$
\end_inset

 is the set of measurements received at time 
\begin_inset Formula $m$
\end_inset

 and the parameter 
\begin_inset Formula $\tau_{G}$
\end_inset

 is called the gate threshold.
 The gate probability 
\begin_inset Formula $P_{G}$
\end_inset

 is the probability that a measurement produced by a target is within the
 validation region.
 This probability is defined as 
\begin_inset Formula $p\left(d_{V}\left(y_{m},\hat{y}_{m}\right)\leq\tau_{G}\right)$
\end_inset

, thus 
\begin_inset Formula $P_{G}$
\end_inset

 is the value of the chi-square cumulative distribution function (CDF) with
 parameter 
\begin_inset Formula $\tau_{G}$
\end_inset

.
 Thus, given a specific 
\begin_inset Formula $P_{G}$
\end_inset

 we can calculate the corresponding 
\begin_inset Formula $\tau_{G}$
\end_inset

.
\end_layout

\begin_layout Standard
All measurements withing the validation region of a track are associated
 to the track and used to update it.
 In the case of multiple tracks, each measurement is tested to see if it's
 in the validation region of each track.
 This allows a measurement to possibly be associated with more than one
 track which is perfectly accounted for in the JPDAF but not the PDAF.
 
\end_layout

\begin_layout Standard
The calculation of the track likelihood, which will be discussed in subsection
 
\begin_inset Note Note
status open

\begin_layout Plain Layout
add rever
\end_layout

\end_inset

, requires knowing the volume of the validation region which is defined
 as
\begin_inset Formula 
\begin{equation}
V_{m,vol}^{s}=c_{n}\gamma^{n/2}\left|S_{m}^{s}\right|^{1/2},\label{eq:volume_validation_region}
\end{equation}

\end_inset

where 
\begin_inset Formula $c_{n}$
\end_inset

 is the volume of the unit hypersphere of dimension 
\begin_inset Formula $n$
\end_inset

 (dimension of the measurement space) calculated as 
\begin_inset Formula 
\[
c_{n}=\frac{\pi^{n/2}}{\Gamma\left(n/2+1\right)}
\]

\end_inset

and 
\begin_inset Formula $\Gamma$
\end_inset

 is the gamma function.
 Also, the number of expected noisy measurements in the validation region
 is 
\begin_inset Formula $\lambda^{s}V_{m,vol}^{s}$
\end_inset

 for each source.
\end_layout

\begin_layout Subsection
Track Update
\end_layout

\begin_layout Standard
During the track update step, the state estimate, error covariance and track
 likelihood are updated using the associated measurements.
 The PDAF assumes that a measurement source produces at most one measurement
 originated from the target and that all other measurements are noise.
 Thus, the PDAF assigns a weight to each measurement indicating how likely
 the measurement originated from the target.
 These weights are calculated for each measurement source.
 Using the weights, the state estimate and error covariance are updated
 using the PDAF update step with centralized measurement fusion to account
 for the different sources.
 This subsection is organized into four parts: calculating measurement weights,
 update state and error covariance, centralized measurement fusion, and
 update track likelihood.
 
\end_layout

\begin_layout Subsubsection
Calculating Measurement Weights
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $\beta^{s,j}$
\end_inset

denote the weight assigned to measurement 
\begin_inset Formula $y_{m}^{s,j}$
\end_inset

.
 The weight is calculate as
\begin_inset Formula 
\[
\beta^{s,j}=\frac{\mathcal{L}\left(y_{m}^{s,j}\right)}{1-P_{D}P_{G}+\sum_{y\in Y_{m}^{s}}\mathcal{L}\left(y\right)},
\]

\end_inset

with 
\begin_inset Formula 
\[
\mathcal{L}\left(y_{m}^{s,j}\right)=\frac{P\left(y_{m}^{s,j}\right)P_{D}^{s}}{\lambda^{s}}
\]

\end_inset

and 
\begin_inset Formula $P\left(y_{m}^{s,j}\right)$
\end_inset

 being defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:probability_y"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 The null weight 
\begin_inset Formula $\beta^{s,0}$
\end_inset

 is the probability that none of the associated measurements in 
\begin_inset Formula $Y_{m}^{s}$
\end_inset

 originated from the target and is calculated as 
\begin_inset Formula 
\[
\beta^{k,0}=\frac{1-P_{D}^{s}P_{G}}{1-P_{D}^{s}P_{G}+\sum_{y\in Y_{m}^{s}}\mathcal{L}\left(y\right)}.
\]

\end_inset

Note that 
\begin_inset Formula $\sum_{i=0}^{\left|Y_{m}^{s}\right|}\beta^{s,i}=1$
\end_inset

.
\end_layout

\begin_layout Subsubsection
Update State Estimate and Error Covariance
\begin_inset CommandInset label
LatexCommand label
name "subsec:Single-Source-Update"

\end_inset


\end_layout

\begin_layout Standard
The PDAF originally assumes only one measurement source.
 In the case of multiple measurement sources, we apply the update step for
 each source and fuse the results together using the centralized measurement
 fusion.
 For each 
\begin_inset Formula $Y_{m}^{s}\neq\emptyset$
\end_inset

 we perform the PDAF update step 
\begin_inset CommandInset citation
LatexCommand cite
key "Bar-Shalom2011"
literal "false"

\end_inset

.
\end_layout

\begin_layout Standard
The innovation term 
\begin_inset Formula $\nu_{m}^{s,j}$
\end_inset

 is 
\begin_inset Formula 
\[
\nu_{m}^{s,j}=y_{m}^{s,j}\ominus h\left(\hat{\bar{x}}_{m},0\right),
\]

\end_inset

and the combined innovation term is 
\begin_inset Formula 
\begin{equation}
\nu_{m}^{s}=\sum_{j=1}^{\left|Y_{m}^{s}\right|}\beta^{s,j}\nu_{m}^{s,j}.\label{eq:JPDAF_combined_innvo}
\end{equation}

\end_inset

Using the combined innovation term, the state update for the 
\begin_inset Formula $s^{th}$
\end_inset

 source is 
\begin_inset Formula 
\[
\hat{x}_{m}^{s}=\hat{\bar{x}}_{m}\oplus W_{m}^{s}\nu_{m}^{s},
\]

\end_inset

where 
\begin_inset Formula $\hat{\bar{x}}_{m}$
\end_inset

 is the state estimate before update and 
\begin_inset Formula $W_{m}^{s}$
\end_inset

 is the gain defined as 
\begin_inset Formula 
\[
W_{m}^{s}=\bar{P}_{m}\left(H_{m}^{s}\right)^{\top}\left(S_{m}^{s}\right)^{-1}.
\]

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula $\bar{P}_{m}$
\end_inset

 is used to denote the error covariance before the update step, 
\begin_inset Formula $H_{m}^{s}$
\end_inset

 is defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:ObservationJacobianState"
plural "false"
caps "false"
noprefix "false"

\end_inset

, and 
\begin_inset Formula $S_{m}^{s}$
\end_inset

 is the innovation covariance defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:innovation_covariance"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
The covariance update is 
\begin_inset Formula 
\begin{equation}
P_{m}^{s}=\beta^{s,0}\bar{P}_{m}+\left(1-\beta^{s,0}\right)\breve{P}_{m}^{s}+\tilde{P}_{m}^{s},\label{eq:JPDAF_cov_update}
\end{equation}

\end_inset

where the covariance of the state updated with the correct measurement is
 
\begin_inset Formula 
\[
\breve{P}^{s}=\bar{P}_{m}-W_{m}^{s}S_{m}^{s}\left(W_{m}^{s}\right)^{\top},
\]

\end_inset

and the spread of the innovations term 
\begin_inset Formula 
\[
\tilde{P}_{m}^{s}=W_{m}^{s}\left[\sum_{i=1}^{\left|Y_{m}^{s}\right|}\beta^{s,i}\nu_{m}^{s,i}\left(\nu_{m}^{s,i}\right)^{\top}-\nu_{m}^{s}\left(\nu_{m}^{s}\right)^{\top}\right]\left(W_{m}^{s}\right)^{\top}.
\]

\end_inset


\end_layout

\begin_layout Standard
We now have several updated states and error covariance; one for each source
 that produced associated measurements.
 They are fused together using the centralized measurement fusion.
 Also, once the measurements are used to update the track, they are added
 to the track's consensus set.
 
\end_layout

\begin_layout Subsubsection
Centralized Measurement Fusion 
\begin_inset CommandInset label
LatexCommand label
name "subsec:Centralized-Measurement-Fusion"

\end_inset


\end_layout

\begin_layout Standard
We use the centralized measurement fusion algorithm described in 
\begin_inset CommandInset citation
LatexCommand cite
key "Bar-Shalom2011"
literal "true"

\end_inset

 and 
\begin_inset CommandInset citation
LatexCommand cite
key "Millard2017"
literal "true"

\end_inset

 to fuse together the updated states and error covariances.
 We briefly review this method here only to adapt it to the Lie group setting
 and for the specific case of the PDAF.
 Let 
\begin_inset Formula $\bar{\mathcal{S}}_{m}\subseteq\mathcal{S}_{m}$
\end_inset

 be the indexing set of sources that produced associated measurements.
 Then covariance fusion is 
\begin_inset Formula 
\[
P_{m}^{-1}=\bar{P}_{m}^{-1}+\sum_{s\in\bar{\mathcal{S}}_{m}}\left(\left(P_{m}^{s}\right)^{-1}-\bar{P}_{m}^{-1}\right),
\]

\end_inset

and the state update is 
\begin_inset Formula 
\[
\hat{x}_{m}=\hat{\bar{x}}_{m}\oplus\left(\bar{P}_{m}\sum_{s\in\mathcal{\bar{S}}_{m}}\left(H_{m}^{s}\right)^{\top}\left(S_{m}^{s}\right)^{-1}\nu_{m}^{s}\right),
\]

\end_inset

with 
\begin_inset Formula $P_{m}^{s}$
\end_inset

 being defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:JPDAF_cov_update"
plural "false"
caps "false"
noprefix "false"

\end_inset

 and 
\begin_inset Formula $\nu_{m}^{s}$
\end_inset

 is defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:JPDAF_combined_innvo"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 
\end_layout

\begin_layout Subsubsection
Update Track Likelihood
\begin_inset CommandInset label
LatexCommand label
name "sec:Track-Likelihood"

\end_inset


\end_layout

\begin_layout Standard
The track likelihood is a measure of how well a track represents an actual
 target.
 In 
\begin_inset CommandInset citation
LatexCommand cite
key "Niedfeldt2013,Niedfeldt,Ingersoll2015,Niedfeldt2017"
literal "false"

\end_inset

, the track's inlier ratio and lifetime were used to indicate the track's
 likelihood which are add-hoc techniques.
 This section presents a theoretically justified approach using a binary
 Bayes filter.
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $\theta_{m}^{s}$
\end_inset

 denote the number of validated measurements from the 
\begin_inset Formula $s^{th}$
\end_inset

 measurement source at time 
\begin_inset Formula $m$
\end_inset

, 
\begin_inset Formula $\theta_{m:k}^{s}=\cup_{i=m}^{k}\left\{ \theta_{i}^{s}\right\} $
\end_inset

, 
\begin_inset Formula $\theta_{m}=\cup_{s\in\mathcal{S}_{m}}\theta_{m}^{s}$
\end_inset

 and 
\begin_inset Formula $\theta_{m:k}=\cup_{j=m}^{k}\theta_{m}$
\end_inset

 where 
\begin_inset Formula $m<k$
\end_inset

.
 Let 
\begin_inset Formula $z$
\end_inset

 be a Bernoulli random variable that is true when the track represents an
 actual target and false when the track does not represent a target.
 For notation purposes we will use 
\begin_inset Formula $\neg z$
\end_inset

 to denote that 
\begin_inset Formula $z$
\end_inset

 is false.
\end_layout

\begin_layout Standard
We are interested in calculating the probability 
\begin_inset Formula $p\left(z\mid\theta_{m:k}\right)$
\end_inset

 which is the probability that the track represents an actual target conditioned
 on the number of validated measurements from time 
\begin_inset Formula $m$
\end_inset

 to 
\begin_inset Formula $k$
\end_inset

.
\end_layout

\begin_layout Theorem
Let 
\begin_inset Formula $P_{D}^{s}$
\end_inset

 denote the probability that the 
\begin_inset Formula $s^{th}$
\end_inset

 measurement source produces a true measurement of the target during the
 sensor scan, and let 
\begin_inset Formula $P_{G}$
\end_inset

 denote the probability that the measurement is validated (associated).
 Furthermore, let 
\begin_inset Formula $\lambda^{s}$
\end_inset

 denote the spatial density of the 
\begin_inset Formula $s^{th}$
\end_inset

 source, and let 
\begin_inset Formula $V_{m,vol}^{s}$
\end_inset

 denote the volume of the validation region associated with the 
\begin_inset Formula $s^{th}$
\end_inset

 source at time 
\begin_inset Formula $m$
\end_inset

 defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:volume_validation_region"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 Then the probability that the track represents an actual target conditioned
 on the number of validated measurements between times 
\begin_inset Formula $m$
\end_inset

 and 
\begin_inset Formula $k$
\end_inset

 is given by 
\begin_inset Formula 
\begin{equation}
p\left(z\mid\theta_{m:k}\right)=1-\frac{1}{1+10^{l_{k}}},\label{eq:track_likelihood}
\end{equation}

\end_inset

where 
\begin_inset Formula $\ell_{k}$
\end_inset

 satisfies
\begin_inset Formula 
\[
\ell_{j}=\ell_{j^{-}}+\sum_{s=1}^{N_{s}}\log_{10}\left(1+P_{G}P_{D}^{s}\left(\frac{\theta_{j}^{s}}{\lambda^{s}V_{j,vol}^{s}}-1\right)\right)
\]

\end_inset

for 
\begin_inset Formula $j=m,\ldots,k$
\end_inset

 and whree 
\begin_inset Formula $\ell_{m^{-}}=0$
\end_inset

.
\end_layout

\begin_layout Proof
Bayes rule gives us 
\begin_inset Formula 
\begin{align*}
p\left(z\mid\theta_{m:k}\right) & =\frac{p\left(\theta_{k}\mid z\right)p\left(z\mid\theta_{m:k^{-}}\right)}{p\left(\theta_{k}\mid\theta_{m:k^{-}}\right)},
\end{align*}

\end_inset


\begin_inset Formula 
\[
p\left(\neg z\mid\theta_{m:k}\right)=\frac{p\left(\theta_{k}\mid\neg z\right)p\left(\neg z\mid\theta_{m:k^{-}}\right)}{p\left(\theta_{k}\mid\theta_{m:k^{-}}\right)}.
\]

\end_inset

Let 
\begin_inset Formula 
\[
\ell_{k}\triangleq\log_{10}\left(\frac{p\left(z\mid\theta_{m:k}\right)}{p\left(\neg z\mid\theta_{m:k}\right)}\right)
\]

\end_inset

denote the log ratio of the probabilities, and note that the relationship
 
\begin_inset Formula $p\left(z\mid\theta_{m:k}\right)+p\left(\neg z\mid\theta_{m:k}\right)=1$
\end_inset

 gives equation 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:track_likelihood"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 Furthermore, we have that 
\begin_inset Formula 
\begin{align*}
\ell_{k} & =\log\left(\frac{p\left(\theta_{k}\mid z\right)p\left(z\mid\theta_{m:k^{-}}\right)}{p\left(\theta_{k}\mid\neg z\right)p\left(\neg z\mid\theta_{m:k^{-}}\right)}\right)\\
 & =\log\left(\frac{p\left(\theta_{m:k^{-}}\mid z\right)}{p\left(\theta_{m:k^{-}}\mid\neg z\right)}\right)+\log\left(\frac{p\left(\theta_{k}\mid z\right)}{p\left(\theta_{k}\mid\neg z\right)}\right)\\
 & =\ell_{k^{-}}+\sum_{s=0}^{N_{s}}\log\left(\frac{p\left(\theta_{k}^{s}\mid z\right)}{p\left(\theta_{k}^{s}\mid\neg z\right)}\right).
\end{align*}

\end_inset


\end_layout

\begin_layout Proof
The probability that a true measurement was received and validated is 
\begin_inset Formula $P_{D}^{s}P_{G}$
\end_inset

.
 The expected number of false measurements within a validation region at
 time 
\begin_inset Formula $m$
\end_inset

 is 
\begin_inset Formula $\lambda^{s}V_{m,vol}^{s}$
\end_inset

.
 We assume that a measurement source can only produce at most one true measureme
nt during a sensor scan.
 Therefore, we have the two possibilities for 
\begin_inset Formula $p\left(\theta_{k}^{s}\mid z\right)$
\end_inset

: that all 
\begin_inset Formula $\theta_{k}^{s}$
\end_inset

 measurements are false or all but one are false.
 Thus 
\begin_inset Formula 
\begin{multline*}
p\left(\theta_{k}^{s}\mid z\right)=P_{G}P_{D}^{s}\exp\left(\lambda^{s}V_{vol}^{s}\right)\frac{\left(\lambda^{s}V_{vol}^{s}\right)^{\left(\theta_{k}^{s}-1\right)}}{\left(\theta_{k}^{s}-1\right)!}\\
+\left(1-P_{G}^{s}P_{D}^{s}\right)\exp\left(\lambda^{s}V_{vol}^{s}\right)\frac{\left(\lambda^{s}V_{vol}^{s}\right)^{\theta_{k}^{s}}}{\left(\theta_{k}^{s}\right)!}.
\end{multline*}

\end_inset

There is only one possibility for 
\begin_inset Formula $p\left(\theta_{k}^{s}\mid\neg z\right)$
\end_inset

, that is the probability of all of the measurements being false 
\begin_inset Formula 
\[
p\left(\theta_{k}^{s}\mid\neg z\right)=\exp\left(\lambda^{s}V_{vol}^{s}\right)\frac{\left(\lambda^{s}V_{vol}^{s}\right)^{\theta_{k}^{s}}}{\left(\theta_{k}^{s}\right)!}.
\]

\end_inset

Taking the ratio of the two gives
\begin_inset Formula 
\[
\frac{p\left(\theta_{k}^{s}\mid z\right)}{p\left(\theta_{k}^{s}\mid\neg z\right)}=1+P_{G}^{s}P_{D}^{s}\left(\frac{\theta_{k}^{s}}{\lambda^{s}V_{vol}^{s}}-1\right).
\]

\end_inset


\end_layout

\begin_layout Standard
If a track is outside the local surveillance region (LSR) of the 
\begin_inset Formula $s^{th}$
\end_inset

 source, then 
\begin_inset Formula $P_{D}^{s}$
\end_inset

 should be zero and 
\begin_inset Formula $p\left(z\mid\theta_{m:k}\right)$
\end_inset

 will not be affected.
 In the case that the track leaves the global surveillance region (GSR),
 we need a way to kill the track in order to make room for other tracks
 to be initialized.
 Thus, we assume that a track that has not received a measurement within
 
\begin_inset Formula $\tau_{\alpha}$
\end_inset

 seconds is no longer in the GSR and will be pruned.
 A track is considered a good track if the 
\begin_inset Formula $p\left(z\mid\theta_{m:k}\right)>\tau_{\rho}$
\end_inset

; otherwise, it is considered a poor track.
 A good track receives a unique indentifiable label.
 The parameters 
\begin_inset Formula $\lambda^{s}$
\end_inset

 and 
\begin_inset Formula $P_{D}^{s}$
\end_inset

 can be easily estimated and 
\begin_inset Formula $P_{G}^{s}$
\end_inset

 is defined by the user.
\end_layout

\begin_layout Section
Track Initialization
\end_layout

\begin_layout Standard
A target that is not initialized (not being tracked by R-RANSAC) is producing
 measurements captured by the measurement sources.
 Provided that the measurements of the un-initialized target are not in
 the validation region of any initialized target, its measurements are not
 associated with any existing initialized target; thus, they are associated
 with a cluster 
\begin_inset CommandInset citation
LatexCommand cite
key "Yang2017"
literal "true"

\end_inset

.
 After enough sensor scans, there will be enough measurements in the cluster
 to observe the target and initialize a new track.
 
\end_layout

\begin_layout Standard
This process is done using RANSAC.
 RANSAC is a regression algorithm that estimates the parameters of a model
 while mitigating the effect of gross outliers 
\begin_inset CommandInset citation
LatexCommand cite
key "Fischler1981"
literal "true"

\end_inset

.
 There have been many developments and adaptations to the RANSAC algorithm
 
\begin_inset CommandInset citation
LatexCommand cite
key "Choi2009"
literal "true"

\end_inset

.
 RANSAC is used to initialize new targets.
 
\end_layout

\begin_layout Standard
RANSAC uses the measurements in the cluster to try to initialize a new target
 by first generating many track hypotheses; discussed in subsection 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Generating-Track-Hypotheses"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 A track hypothesis is a current hypothetical state 
\begin_inset Formula $x_{k}^{h}$
\end_inset

, the subscript 
\begin_inset Formula $k$
\end_inset

 denotes the current time, estimated from a random subset of measurements
 from the cluster.
 Each track hypothesis is scored using a method discussed in subsection
 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Scoring"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 The track hypothesis that has the highest score, provided that the score
 meets a minimum threshold, is initialized into a new track using a filtering
 technique discribed in subsection 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Track-Filtering"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 In the case that there are multiple clusters, RANSAC is performed on each
 cluster.
 If a track is initialized, the measurements used to initialize the track
 are removed from the cluster.
 
\end_layout

\begin_layout Subsection
Generating Track Hypotheses
\begin_inset CommandInset label
LatexCommand label
name "subsec:Generating-Track-Hypotheses"

\end_inset


\end_layout

\begin_layout Standard
To create a track hypothesis 
\begin_inset Formula $x_{k}^{h}$
\end_inset

, we take a minimum subset of measurements from the cluster, denoted 
\begin_inset Formula $Y^{c}$
\end_inset

, where one measurement is from the current time step, and the other measurement
s are randomly sampled such that the system is observable.
 Using 
\begin_inset Formula $Y^{c}$
\end_inset

 we seek to solve the optimizaiton problem 
\begin_inset Formula 
\[
\underset{x_{k}}{\text{max}}p\left(Y^{c}\mid x_{k}^{h}\right),
\]

\end_inset

which is a maximum likelihood estimation problem that seeks to maximize
 the probability of the measurements 
\begin_inset Formula $Y^{c}$
\end_inset

 conditioned on 
\begin_inset Formula $x_{k}^{h}$
\end_inset

 by adjusting 
\begin_inset Formula $x_{k}^{h}$
\end_inset

.
 This optimization problem is equivalent to minimizing the log maximum likelihoo
d estimation (LMLE) problem 
\begin_inset Formula 
\begin{equation}
\underset{x_{k}}{\text{min}}-\log\left(p\left(Y^{c}\mid x_{k}\right)\right),\label{eq:OptimizationProblem}
\end{equation}

\end_inset

where we dropped the superscript 
\begin_inset Formula $h$
\end_inset

.
 Under the assumption that measurements are independent, they are also condition
aly independent which allows us to write the optimization problem 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:OptimizationProblem"
plural "false"
caps "false"
noprefix "false"

\end_inset

 as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\underset{x_{k}}{\text{min}}-\sum_{m=0}^{k}\sum_{y_{m}\in Y_{m}^{c}}\log\left(p\left(y_{m}\mid x_{k}\right)\right),
\]

\end_inset

where 
\begin_inset Formula $Y_{m}^{c}\subseteq Y^{c}$
\end_inset

 is a subset of 
\begin_inset Formula $Y^{c}$
\end_inset

 that only contians the measurements at time 
\begin_inset Formula $m$
\end_inset

.
\end_layout

\begin_layout Standard
Using lemma, 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:meas_inverse_prob"
plural "false"
caps "false"
noprefix "false"

\end_inset

, the Gaussian approximation of 
\begin_inset Formula $p\left(y_{m}\mid x_{k}\right)$
\end_inset

 is 
\begin_inset Formula 
\begin{align*}
p\left(y_{m}\mid x_{k}\right) & \approx\eta\exp\left(-L_{m}^{j}\left(x_{k}\right)\right),
\end{align*}

\end_inset

where
\begin_inset Formula 
\begin{align*}
L_{m}\left(x_{k}\right) & =\frac{1}{2}\left(\delta y_{k:m}^{j}\right)^{\top}S_{k:m}^{-1}\delta y_{k:m},
\end{align*}

\end_inset


\begin_inset Formula 
\[
\delta y_{m}=y_{m}\ominus h\left(f\left(x_{k},0,\delta_{k:m}\right),0\right)
\]

\end_inset

 and 
\begin_inset Formula $S_{k:m}$
\end_inset

 is the innovation covariance defined in equation 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:inverse_innovation_cov"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
Using the Gaussian approximation, the approximate LMLE is
\begin_inset Formula 
\[
\underset{x_{k}}{\text{min}}\sum_{m=0}^{k}\sum_{j=1}^{N_{m}}L_{m}^{j}\left(x_{k}\right),
\]

\end_inset

where 
\begin_inset Formula $N_{m}$
\end_inset

 is the number of measurements at time step 
\begin_inset Formula $m$
\end_inset

, and 
\begin_inset Formula $j$
\end_inset

 indicates the 
\begin_inset Formula $j^{th}$
\end_inset

 measurement at time 
\begin_inset Formula $m$
\end_inset

.
 To calculate another track hypothesis 
\begin_inset Formula $x_{k}^{h}$
\end_inset

, we would repeat the optimization scheme with a different random subset.
 This process is repeated 
\begin_inset Formula $\ell$
\end_inset

 times or until a hypothetica track reaches a score of 
\begin_inset Formula $\tau_{RE}$
\end_inset

.
\end_layout

\begin_layout Standard
There are many methods that can be used to solve the optimization problem.
 If the system is linear, the optimization problem reduces to the one described
 in 
\begin_inset CommandInset citation
LatexCommand cite
key "Niedfeldt2014a"
literal "true"

\end_inset

.
 If the system is non-linear, the optimization problem can be solved using
 the Gauss-newton method or some other optimization method.
 
\end_layout

\begin_layout Subsection
Track Hypothesis Scoring
\begin_inset CommandInset label
LatexCommand label
name "subsec:Scoring"

\end_inset


\end_layout

\begin_layout Standard
Once a track hypothesis is generated, we score it according to its inliers.
 Inliers are measurements that support the hypothetical track.
 To determine if a measurement is an inlier, we use a very similar idea
 as the validation region discussed in subsection 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Data-Association"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 The only difference is that we create the validation regions not only at
 the current time step but at previous ones also.
 We will ignore the derivation, since it is similar to subsection 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Data-Association"
plural "false"
caps "false"
noprefix "false"

\end_inset

, and present the definition.
 
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $S_{k:m}^{s}$
\end_inset

 be the innovation covariance of source 
\begin_inset Formula $s$
\end_inset

 defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:inverse_innovation_cov"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 We define a metric 
\begin_inset Formula $d_{I}:N\times N\to\mathbb{R}$
\end_inset

 on the measurement space 
\begin_inset Formula 
\[
d_{I}\left(y_{m},\hat{y}_{m}\right)=\left(y_{m}\ominus\hat{y}_{m}\right)^{\top}\left(S_{k:m}^{s}\right)^{-1}\left(y_{m}\ominus\hat{y}_{m}\right),
\]

\end_inset

where 
\begin_inset Formula $y_{m}\in Y_{m}^{c}$
\end_inset

, and 
\begin_inset Formula $\hat{y}_{m}=h\left(f\left(x_{k},0,\delta_{k:m}\right),0\right)$
\end_inset

 is the estimated measurement.
 The measurement 
\begin_inset Formula $y_{m}$
\end_inset

 is an inlier if 
\begin_inset Formula 
\[
d_{I}\left(y_{m}^{j},\hat{y}_{m}\right)<\tau_{I},
\]

\end_inset

where 
\begin_inset Formula $\tau_{I}$
\end_inset

 is an inlier threshold similar in function to the gate threshold discussed
 in subsection 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Data-Association"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 This similarity allows us to calcuated 
\begin_inset Formula $\tau_{I}$
\end_inset

 based on a probability 
\begin_inset Formula $P_{I}$
\end_inset

 which we call the probability of being an inlier.
 The score of a track hypothesis is the number of times a measurement source
 produced an inlier at a certain time step.
 This means that if a source produced multiple inliers at time 
\begin_inset Formula $m$
\end_inset

, the score would increase by 
\begin_inset Formula $1$
\end_inset

 since we assume that at most only one of the measurements originated from
 the target.
\end_layout

\begin_layout Subsection
Track Filtering 
\begin_inset CommandInset label
LatexCommand label
name "subsec:Track-Filtering"

\end_inset


\end_layout

\begin_layout Standard
RANSAC uses the best hypotetical track (provided that the hypothetical track
 has a minimum score of 
\begin_inset Formula $\tau_{RM}$
\end_inset

) created from a cluster to initialize a new track.
 To initialize a track, we propagate 
\begin_inset Formula $x_{k}^{h}$
\end_inset

 back in time to the oldest time step of an inlier measurement, denoted
 
\begin_inset Formula $x_{n}^{h}$
\end_inset

, and initialize the error covariance 
\begin_inset Formula $P_{n}$
\end_inset

.
 Using the PDAF, we propgate and update 
\begin_inset Formula $x_{n}^{h}$
\end_inset

 using it's inliers to procude a current estimate 
\begin_inset Formula $x_{k}$
\end_inset

 and error covariance 
\begin_inset Formula $P_{k}$
\end_inset

.
 The inliers are also used to calculate the track's likelihood.
 Once the track is initialized, the inliers are added to the track's consensus
 set.
 
\end_layout

\begin_layout Section
Track Management 
\begin_inset CommandInset label
LatexCommand label
name "sec:Track-Management"

\end_inset


\end_layout

\begin_layout Standard
Track management consists of merging, purning, ranking, and labeling tracks.
\end_layout

\begin_layout Subsection
Merge Tracks
\end_layout

\begin_layout Standard
As tracks are propagated and updated they can begin to coalesce in which
 case we need to merge/fuse them.
 In order to optimally fuse them, we would need to calculate the cross covarianc
e between two tracks which is computationally complex and time expensive,
 or in our case unknown.
 Fortunately, the covariance intersection (CI) method can be used to fuse
 two tracks together without calculating the cross covariance 
\begin_inset CommandInset citation
LatexCommand cite
key "Deng2012"
literal "true"

\end_inset

.
 We use the variation of the CI method presented in 
\begin_inset CommandInset citation
LatexCommand cite
key "Tian2010"
literal "true"

\end_inset

 called the sampled covariance intersection (SCI) method.
 In order to see if two tracks need to be fused together, we use a track
 association method prescribed in 
\begin_inset CommandInset citation
LatexCommand cite
key "Bar-Shalom2011"
literal "true"

\end_inset

.
 In this section we will briefly present the track association and fusion
 methods adapted to the Lie group setting.
 
\end_layout

\begin_layout Subsubsection
Track Association
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $\hat{x}^{i}$
\end_inset

 denote the state estimate of the 
\begin_inset Formula $i^{th}$
\end_inset

 track and 
\begin_inset Formula $P^{i}$
\end_inset

 be the corresponding error covariance.
 The estimation error between two tracks is denoted 
\begin_inset Formula $\Delta^{ij}$
\end_inset

 and defined as 
\begin_inset Formula 
\[
\Delta^{ij}=\hat{x}^{i}\ominus\hat{x}^{j}.
\]

\end_inset

Assuming that the two tracks are independent, the covariance of the estimation
 error is 
\begin_inset Formula 
\[
P^{ij}=P^{i}+P^{j}.
\]

\end_inset

We next define a metric 
\begin_inset Formula $d_{T}:\left(G\times\mathfrak{g}\right)\times\left(G\times\mathfrak{g}\right)\to\mathbb{R}$
\end_inset

 to be
\begin_inset Formula 
\[
d_{T}\left(\hat{x}^{i},\hat{x}^{j}\right)=\left(\Delta^{ij}\right)^{\top}\left(P^{ij}\right)^{-1}\Delta^{ij}.
\]

\end_inset

If 
\begin_inset Formula $d_{T}\left(\cdot,\cdot\right)<\tau_{S}$
\end_inset

 where 
\begin_inset Formula $\tau_{S}\in\mathbb{R}$
\end_inset

, then the two tracks are deemed to be the same and should be merged.
\end_layout

\begin_layout Subsubsection
Track Fusion
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $\hat{x}^{1},\hat{x}^{2},\cdots,\hat{x}^{n}$
\end_inset

 denote the state estimates of the tracks that need to be fused together
 and 
\begin_inset Formula $P^{i}$
\end_inset

 be their corresponding error covariance.
 The fused estimate in SCI is calculated as if the tracks to be fused are
 independent; therefore,
\begin_inset Formula 
\begin{align*}
P^{-1} & =\sum_{i=1}^{n}\left(P^{i}\right)^{-1}\\
\hat{x}_{SCI} & =P\left(\sum_{i=1}^{n}\left(P^{i}\right)^{-1}\hat{x}^{i}\right).
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
For Lie group settings, the state update is 
\begin_inset Formula 
\[
\hat{x}_{SCI}=\hat{x}^{1}\oplus\left(P\sum_{i=2}^{n}\left(\left(P^{i}\right)^{-1}\left(\hat{x}^{i}\ominus\hat{x}^{1}\right)\right)\right),
\]

\end_inset


\end_layout

\begin_layout Standard
The error covariance 
\begin_inset Formula $P^{-1}$
\end_inset

 is overly optimistic, so we must adjust the size as follows:
\end_layout

\begin_layout Itemize
Generate 
\begin_inset Formula $N$
\end_inset

 (about 100 for a good distribution) random samples 
\begin_inset Formula $x^{j}$
\end_inset

, 
\begin_inset Formula $j=1,2,\ldots,N$
\end_inset

 from 
\begin_inset Formula $x\sim\mathcal{N}\left(0,P\right)$
\end_inset


\end_layout

\begin_layout Itemize
Find
\begin_inset Formula 
\[
r_{\text{max}}=\max_{j=1,\ldots,N}\frac{\left(x^{j}\right)^{\top}P^{-1}x^{j}}{\underset{i=1,\ldots,N}{\max}\left\{ \left(x^{j}\right)^{\top}\left(P^{i}\right)^{-1}x^{j}\right\} }
\]

\end_inset

and
\begin_inset Formula 
\[
r_{\text{min}}=\min_{j=1,\ldots,N}\frac{\left(x^{j}\right)^{\top}P^{-1}x^{j}}{\underset{i=1,\ldots,N}{\max}\left\{ \left(x^{j}\right)^{\top}\left(P^{i}\right)^{-1}x^{j}\right\} }
\]

\end_inset


\end_layout

\begin_layout Itemize
Then set
\begin_inset Formula 
\[
P_{SCI}=\frac{P}{ur_{\text{min}}+\left(1-u\right)r_{\text{max}}}
\]

\end_inset

where 
\begin_inset Formula $u\in\left[0,1\right]$
\end_inset

 is used to adjust the performance of the SCI algorithm.
 When 
\begin_inset Formula $u=1$
\end_inset

, the fused covariance is conservative and when 
\begin_inset Formula $u=0$
\end_inset

, the fused covariance is optimistic.
 The authors of 
\begin_inset CommandInset citation
LatexCommand cite
key "Tian2010"
literal "true"

\end_inset

 received good results by setting 
\begin_inset Formula $u=0.5$
\end_inset

.
\end_layout

\begin_layout Standard
The fused track will have the state estimate 
\begin_inset Formula $\hat{x}_{SCI}$
\end_inset

 with error covariance 
\begin_inset Formula $P_{SCI}$
\end_inset

.
\end_layout

\begin_layout Standard
In addition, when tracks are fused, we merge their consensus sets together,
 give the merged track the highest model likelihood out of the tracks merged,
 and the label pertaining to the track that was first created out of the
 merged track.
 We note that it would be more correct to keep a history of the information
 needed to calculate the model's likelihood so that when tracks are merged
 we could recompute the model likelihood; however, such a task can require
 a lot of memory and computation depending on the amount of time merged
 models have existed.
 
\end_layout

\begin_layout Subsection
Prune, Rank and Label Tracks
\end_layout

\begin_layout Standard
As stated previously, R-RANSAC stores up to 
\begin_inset Formula $M$
\end_inset

 tracks.
 If there are more than 
\begin_inset Formula $M$
\end_inset

 tracks after track initialization and track merging, the tracks with the
 lowest track likelihood are removed until there are only 
\begin_inset Formula $M$
\end_inset

 tracks.
 The remaining tracks are then ranked according to their track likelihood.
 If the track likelihood is above the threshold 
\begin_inset Formula $\tau_{\rho}$
\end_inset

, then the track is considered a good model and is given a unique numerical
 label; otherwise it is a poor model.
 In the case that a good model is demoted to a poor model it still retains
 its label in the case that it becomes good again.
 
\end_layout

\begin_layout Section
Examples 
\begin_inset CommandInset label
LatexCommand label
name "sec:Examples"

\end_inset


\end_layout

\begin_layout Standard
In this section we provide two examples.
 The first example is to show how the Lie group framework of R-RANSAC applies
 to the Lie group 
\begin_inset Formula $\mathbb{R}^{n}$
\end_inset

 with 
\begin_inset Formula $n\in\mathbb{N}$
\end_inset

, and the second example applies R-RANSAC to tracking targets on the normalized
 virtual image plane.
\end_layout

\begin_layout Subsection
Euclidean Space 
\begin_inset Formula $\mathbb{R}^{n}$
\end_inset


\end_layout

\begin_layout Standard
This is a brief section to show how the Lie group theory applies to Lie
 groups of 
\begin_inset Formula $\mathbb{R}^{n}$
\end_inset

, where 
\begin_inset Formula $n\in\mathbb{N}$
\end_inset

, equipped with the standard topology and the group operation of addition.
 Its corresponding Lie algebra is 
\begin_inset Formula $\mathbb{R}^{n}$
\end_inset

, and the adjoint, exponential, and left and right Jacobians are the identity
 map.
 The box plus/minus and o plus/minus mapping are trivially derived; for
 example
\begin_inset Formula 
\begin{align*}
g\oplus u & =g+u\\
g_{1}\ominus g_{2} & =g_{1}-g_{2}
\end{align*}

\end_inset

where 
\begin_inset Formula $g,g_{1},g_{2}\in G=\mathbb{R}^{2}$
\end_inset

 and 
\begin_inset Formula $u\in\mathfrak{g}=\mathbb{R}^{2}$
\end_inset

.
\end_layout

\begin_layout Standard
We can write the system model as 
\begin_inset Formula 
\begin{align*}
g_{k} & =g_{k^{-}}+\delta_{k}\left(u_{k^{-}}+w_{k}^{g}\right)+\frac{\delta_{k}^{2}}{2}w_{k}^{u}\\
u_{k} & =u_{k^{-}}+\delta_{k}w_{k}^{u}\\
y_{k} & =g_{k}+v_{k},
\end{align*}

\end_inset

which can be written in familiar matrix notation as 
\begin_inset Formula 
\begin{align*}
x_{k} & =A_{k}x_{k^{-}}+B_{k}w_{k}\\
y_{k} & =Cx_{k}+v_{k}
\end{align*}

\end_inset

where 
\begin_inset Formula $x_{k}=\left[g_{k}^{\top},u_{k}^{\top}\right]^{\top}$
\end_inset

,
\begin_inset Formula 
\begin{align*}
A_{k}=\begin{bmatrix}I & \delta_{k}I\\
0 & I
\end{bmatrix}, & \thinspace & B_{k}=\begin{bmatrix}\delta_{k}I & \frac{\delta_{k}^{2}}{2}I\\
0 & \delta_{k}I
\end{bmatrix},
\end{align*}

\end_inset

and 
\begin_inset Formula 
\[
C=\begin{bmatrix}I_{2\times2} & 0_{2\times2}\end{bmatrix}.
\]

\end_inset

In this form, we can easily recognize it as an linear time-invariant system
 with near constant velocity.
\end_layout

\begin_layout Standard
The Jacobians are easily computed and are 
\begin_inset Formula $F_{k}=A_{k}$
\end_inset

, 
\begin_inset Formula $G_{k}=B_{k}$
\end_inset

, 
\begin_inset Formula $H_{k}=C$
\end_inset

, and 
\begin_inset Formula $V_{k}=I$
\end_inset

.
 For linear systems, the LMLE simplifies to a least squares problem.
 This type of system used with R-RANSAC is thoroughly discussed in 
\begin_inset CommandInset citation
LatexCommand cite
key "Niedfeldt2014a"
literal "true"

\end_inset

.
\end_layout

\begin_layout Subsection
Constrained Problem for 
\begin_inset Formula $SE\left(2\right)$
\end_inset

: Tracking in the Normalized Virtual Image Plane 
\begin_inset CommandInset label
LatexCommand label
name "subsec:tracking_image_plane"

\end_inset

 
\end_layout

\begin_layout Standard
Suppose we have a camera fixed on a UAV and a target moving with nearly
 constant velocity on fairly level ground.
 The only sensor that detects the target is the camera, thus the LSR and
 the GSR are the same, but the corresponding frames are different.
 This is because tracking is done in the normalized virtual camera frame
 (NVCF) on the normalized virtual image plane (NVIP).
 
\end_layout

\begin_layout Standard
The NVCF is coincident with the image frame, but its axes are scaled by
 the cameras intrinsic parameters and related by the rotation 
\begin_inset Formula $R_{c}^{l}=R_{b}^{l}R_{c}^{b}$
\end_inset

, where 
\begin_inset Formula $R_{c}^{b}$
\end_inset

 is the rotation from the camera frame to the body frame of the UAV, and
 
\begin_inset Formula $R_{b}^{l}$
\end_inset

 is the rotation from the body frame to the body level frame; the body frame
 is the unrolled and unpitched body frame.
 By construction, the NVCF is invariant to the camera's intrinsic parameters
 and the pitch and roll of the UAV.
 This allows the NVIP to remain parallel to the ground; otherwise, the trajector
ies of targets would not maintain a constant velocity model on 
\begin_inset Formula $SE\left(2\right)$
\end_inset

 and tracking would be difficult if not impossible with extreme changes
 in pitch or roll.
 Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:CF_NVIP_relation"
plural "false"
caps "false"
noprefix "false"

\end_inset

 shows the relation between the camera frame, NVCF, the image plane, and
 the NVIP.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename images/CF_relation_NVCF.pdf
	width 80col%

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:CF_NVIP_relation"

\end_inset

The image on the left is a depiction of the camera frame, 
\begin_inset Formula $\mathcal{F}^{c}$
\end_inset

, and the image on the right is a depiction of the NVCF, 
\begin_inset Formula $\mathcal{F}^{n}$
\end_inset

.
 The image plane is not necessarily parallel to the ground, but the NVIP
 is which makes it invariant to the roll and pitch of the UAV.
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
The volume of the surveillance region is the area of the normalized virtual
 image plane.
 Since the UAV is moving, the global frame is also moving.
 This means that we must provide a transformation so that we can transform
 all measurements and models to the current global frame.
 We do this using the Homography as described in appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Homography"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
As previously stated, the configuration manifold of the target is 
\begin_inset Formula $SE\left(2\right)$
\end_inset

.
 We can segment the target's state 
\begin_inset Formula $x_{k}=\left(g_{k},u_{k}\right)\in SE\left(2\right)\times\mathfrak{se}\left(2\right)^{\vee}$
\end_inset

 further to
\begin_inset Formula 
\begin{align*}
g_{k} & =\begin{bmatrix}R_{k} & t_{k}\\
0_{1\times2} & 1
\end{bmatrix}\\
u_{k} & =\begin{bmatrix}\rho_{k}\\
\omega_{k}
\end{bmatrix},
\end{align*}

\end_inset

where 
\begin_inset Formula $R_{k}\in SO\left(2\right)$
\end_inset

, 
\begin_inset Formula $\omega_{k}^{\wedge}\in\mathfrak{se}\left(2\right)$
\end_inset

, and 
\begin_inset Formula $t_{k},\rho_{k}\in\mathbb{R}^{2}$
\end_inset

.
 The state transition function and important Jacobians for 
\begin_inset Formula $SE\left(2\right)$
\end_inset

 can be found in appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:SE2"

\end_inset

.
 The observation function is 
\begin_inset Formula 
\begin{align*}
y_{k} & =h\left(x_{k},v_{k}\right)\\
 & =t_{k}+v_{k},
\end{align*}

\end_inset

where 
\begin_inset Formula $y_{k}\in\mathbb{R}^{2}$
\end_inset

.
 Using point measurements, we proceed to find under what conditions the
 system is locally observable.
 For a discussion of observability for nonlinear functions see 
\begin_inset Note Note
status open

\begin_layout Plain Layout
Add references
\end_layout

\end_inset

.
 Essentially, we linearize the observation error at different time steps
 about an estimated current state 
\begin_inset Formula $\hat{x}_{k}$
\end_inset

 and see if we can estimate the local error 
\begin_inset Formula $\delta x_{k}$
\end_inset

.
 The error at time 
\begin_inset Formula $m$
\end_inset

 is defined as
\begin_inset Formula 
\[
y_{m}\ominus h\left(f\left(x_{k},w_{k},\delta_{k:m}\right),v_{k}\right),
\]

\end_inset

The linearized error at time 
\begin_inset Formula $m$
\end_inset

 about 
\begin_inset Formula $x_{k}=\hat{x}_{k}$
\end_inset

, and 
\begin_inset Formula $w_{k}=v_{k}=0$
\end_inset

 is
\begin_inset Formula 
\[
\hat{e}_{k:m}-H_{m}F_{k:m}\delta x_{k},
\]

\end_inset

where 
\begin_inset Formula 
\[
\hat{e}_{k:m}=y_{m}\ominus h\left(f\left(\hat{x}_{k},0,\delta_{k:m}\right),0\right),
\]

\end_inset


\begin_inset Formula 
\begin{align*}
H_{m} & =\left.\frac{\partial h\left(x_{m},v_{m}\right)}{\partial x_{k}}\right|_{\begin{array}{c}
x_{k}=\hat{x}_{k}\\
v_{k}=0
\end{array}},\\
 & =\begin{bmatrix}R_{m} & 0_{2\times4}\end{bmatrix}
\end{align*}

\end_inset

 and 
\begin_inset Formula $F_{k:m}$
\end_inset

 is defined in lemma 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:transition_func_jacobians"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 Using several errors from different time steps we get 
\begin_inset Formula 
\[
\begin{bmatrix}\hat{e}_{k:m^{1}}\\
\hat{e}_{k:m^{2}}\\
\vdots\\
\hat{e}_{k:m^{n}}
\end{bmatrix}=\underbrace{\begin{bmatrix}H_{m}F_{k:m^{1}}\\
H_{m}F_{k:m^{2}}\\
\vdots\\
H_{m}F_{k:m^{n}}
\end{bmatrix}}_{\mathcal{O}}\delta x_{k},
\]

\end_inset

where 
\begin_inset Formula $\mathcal{O}$
\end_inset

 is the observability matrix.
 If 
\begin_inset Formula $\mathcal{O}$
\end_inset

 is full rank, then the system is locally observable.
 
\end_layout

\begin_layout Standard
Unfortunately, the observability matrix is not full rank.
 However, since we are interested in tracking the target we only need to
 be able to accurately estimate the position of the target.
 To do this, we consider two configurations for a constant velocity system.
 In the first configuration the target has a circular trajectory.
 In this case we add the constraints that the target's heading is oriented
 along the body frame velocity, i.e.
 
\begin_inset Formula $\rho=\left[\rho_{x},0\right]^{\top}$
\end_inset

, 
\begin_inset Formula $\rho_{x}>0$
\end_inset

 and 
\begin_inset Formula $\omega\neq0$
\end_inset

.
 Using these constraints, the system is observable.
 In the second configuration the target is moving in a straight line.
 In this configuration we impose the same constraints as in the first configurat
ion except that 
\begin_inset Formula $\omega=0$
\end_inset

.
 Under these constraints the system is observable.
 We can identify which configuration the target is in by looking at three
 different measurements from different times.
 If the three measurement do not form a line, then the system has first
 constraints; otherwise, the latter.
\end_layout

\begin_layout Standard
To improve the LMLE used to estimate the current state, we can seed it as
 follows.
 Let 
\begin_inset Formula $y_{k}$
\end_inset

, 
\begin_inset Formula $y_{m}$
\end_inset

, and 
\begin_inset Formula $y_{n}$
\end_inset

 be three measurements taken at different times.
 Since we observe the position of the target, we can approximate the position
 of the target at time 
\begin_inset Formula $k$
\end_inset

, 
\begin_inset Formula $m$
\end_inset

, and 
\begin_inset Formula $n$
\end_inset

 as 
\begin_inset Formula $t_{k}=y_{k}$
\end_inset

, 
\begin_inset Formula $t_{m}=y_{m}$
\end_inset

 and 
\begin_inset Formula $t_{n}=y_{n}$
\end_inset

.
 Using these estimated positions, we can numerically approximate the derivative
 as 
\begin_inset Formula 
\begin{align*}
\dot{t}_{k} & =\frac{t_{m}-t_{k}}{\delta_{k:m}},\\
\dot{t}_{m} & =\frac{t_{n}-t_{m}}{\delta_{n:m}}
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
Using the constraint that the heading of the UAS is aligned with the translation
al velocity, we get that 
\begin_inset Formula 
\[
R_{k}=\frac{1}{\left\Vert \dot{t}_{k}\right\Vert }\begin{bmatrix}\dot{t}_{k_{x}} & -\dot{t}_{k_{y}}\\
\dot{t}_{k_{y}} & \dot{t}_{k_{x}}
\end{bmatrix}
\]

\end_inset

where 
\begin_inset Formula 
\[
\dot{t}_{k}=\begin{bmatrix}\dot{t}_{k_{x}}\\
\dot{t}_{k_{y}}
\end{bmatrix},
\]

\end_inset

and that 
\begin_inset Formula 
\[
\rho_{k}=\begin{bmatrix}\left\Vert \dot{t}_{k}\right\Vert \\
0
\end{bmatrix}.
\]

\end_inset

Note that 
\begin_inset Formula 
\[
\dot{t}_{m}\approx R_{k}\text{Exp}\left(\delta_{k:m}\omega_{k}\right)\rho_{k},
\]

\end_inset

where we ignored the process noise and 
\begin_inset Formula $\dot{\theta}_{k}$
\end_inset

 is the angular velocity.
 Let 
\begin_inset Formula 
\begin{align*}
z & =R_{k}^{\top}\dot{t}_{m}/\rho_{k}\\
 & =\left[z_{x},z_{y}\right]^{\top},
\end{align*}

\end_inset

then 
\begin_inset Formula 
\[
\omega_{k}=\text{atan2}\left(z_{y},z_{x}\right)/\delta_{k:m}
\]

\end_inset

These estimates can then be used to seed the LMLE during the RANSAC step
 of the algorithm.
\end_layout

\begin_layout Section

\series bold
Hardware Results
\end_layout

\begin_layout Standard
Coming soon...
 hopefully.
\end_layout

\begin_layout Section
Conclusion
\end_layout

\begin_layout Appendices

\end_layout

\begin_layout Section
LMLE Simplification 
\begin_inset CommandInset label
LatexCommand label
name "sec:LMLE-Simplification"

\end_inset


\end_layout

\begin_layout Standard
The optimization problem defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:OptimizationProblem"
plural "false"
caps "false"
noprefix "false"

\end_inset

 can be computationally expensive if the system is nonlinear.
 The purpose of the optimization problem is to estimate the state of a hypotheti
cal track which is later refined using its inliers via filtering.
 So the state estimate doesn't have to be super refined; therefore, we can
 simplify the optimization process in different ways.
 
\end_layout

\begin_layout Standard
Let's assume that the pose of the system is measurable.
 In other words, your observation model 
\begin_inset Formula $h$
\end_inset

 is defined as 
\begin_inset Formula 
\[
h\left(x_{k},v_{k}\right)=g_{k}\exp\left(v_{k}\right),
\]

\end_inset

thus
\begin_inset Formula 
\[
y_{k}=g_{k}\exp\left(v_{k}\right).
\]

\end_inset


\end_layout

\begin_layout Standard
When generating a track hypothesis, we always use a measurement from the
 current time.
 We can use this measurement as the estimated pose 
\begin_inset Formula $g_{k}$
\end_inset

.
 All that remains is estimating the velocity term 
\begin_inset Formula $u_{k}$
\end_inset

 using one other measurement 
\begin_inset Formula $y_{m}$
\end_inset

 where 
\begin_inset Formula $m<k$
\end_inset

.
 Under the assumption that 
\begin_inset Formula $g_{k}$
\end_inset

 is the true current state, the measurement 
\begin_inset Formula $y_{m}$
\end_inset

 is 
\begin_inset Formula 
\[
y_{m}=g_{k}\exp\left(\delta_{k:m}u_{k}+\delta_{k:m}w_{k}^{g}+\frac{\delta_{k:m}^{2}}{2}w_{k}^{u}\right)\exp\left(v_{m}\right),
\]

\end_inset

which can be approximated as 
\begin_inset Formula 
\[
y_{m}\approx g_{k}\exp\left(\delta_{k:m}u_{k}+\delta_{k:m}w_{k}^{g}+\frac{\delta_{k:m}^{2}}{2}w_{k}^{u}+v_{m}\right)
\]

\end_inset

By calculating the error between the measurement and the current state we
 get 
\begin_inset Formula 
\begin{align*}
y_{m}\ominus g_{k} & =\log\left(g_{k}^{-1}y_{m}\right)\\
e_{k:m} & \approx\delta_{k:m}u_{k}+\delta_{k:m}w_{k}^{g}+\frac{\delta_{k:m}^{2}}{2}w_{k}^{u}+v_{m}.
\end{align*}

\end_inset

The expected value of 
\begin_inset Formula $e_{k:m}$
\end_inset

 is 
\begin_inset Formula 
\[
\text{E}\left[e_{k:m}\right]=\delta_{k:m}u_{k},
\]

\end_inset

and the covariance is 
\begin_inset Formula 
\begin{align*}
\text{cov}\left[e_{k:m}\right] & \approx\delta_{k:m}^{2}Q^{g}+\frac{\delta_{k:m}^{4}}{4}Q^{u}+R\\
 & =S_{k:m}
\end{align*}

\end_inset

where 
\begin_inset Formula 
\[
Q=\begin{bmatrix}Q^{g} & 0\\
0 & Q^{u}
\end{bmatrix}.
\]

\end_inset

We can simply estimate 
\begin_inset Formula $u_{k}$
\end_inset

 by letting 
\begin_inset Formula $u_{k}=e_{k:m}/\delta_{k:m}$
\end_inset

.
 We can enhance the estimate using multiple measurements.
 Let 
\begin_inset Formula $\chi$
\end_inset

 be an index set such that 
\begin_inset Formula $\cup_{m\in\chi}\left\{ y_{m}\right\} $
\end_inset

 is the set of measurements we will use to estimate 
\begin_inset Formula $u_{k}$
\end_inset

, then 
\begin_inset Formula 
\[
u_{k}=\left(\sum_{j\in\chi}\delta_{k:j}S_{k:j}^{-1}\right)^{-1}\left(\sum_{j\in\chi}S_{k:j}^{-1}e_{k:j}\right).
\]

\end_inset

We can simplify the estimation further by setting the covariance terms to
 identity which yields 
\begin_inset Formula 
\[
u_{k}=\frac{1}{\left|\chi\right|\delta_{k:j}}\sum_{j\in\Lambda}e_{k:j}.
\]

\end_inset


\end_layout

\begin_layout Standard
Another possible simplification for any approach is by setting 
\begin_inset Formula $S_{k:m}^{s}$
\end_inset

 defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:inverse_innovation_cov"
plural "false"
caps "false"
noprefix "false"

\end_inset

 to identity in the optimization problem 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:OptimizationProblem"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
We propose this simplification because computing the covariance 
\begin_inset Formula $S_{k:m}^{s}$
\end_inset

 can be computationally costly when it has to be done thousands of times
 whenever RANSAC is performed.
 
\end_layout

\begin_layout Standard
If you want the estimation to be as accurate as possible, we suggest you
 use the simplified approaches to seed the original optimization problem
 unless the system is linear since the original optimization problem is
 already simple.
 
\end_layout

\begin_layout Section
SE
\begin_inset Formula $\left(2\right)$
\end_inset


\begin_inset CommandInset label
LatexCommand label
name "sec:SE2"

\end_inset


\end_layout

\begin_layout Standard
The special Euclidean group of two dimensions is a matrix Lie group and
 is the set 
\begin_inset Formula 
\[
SE\left(2\right)=\left\{ \left.\begin{bmatrix}R & t\\
0_{1\times2} & 1_{1\times1}
\end{bmatrix}\,\right|\,R\in SO\left(2\right)\text{ and }t\in\mathbb{R}^{2}\right\} 
\]

\end_inset

equipped with matrix multiplication.
 The Lie algebra is 
\begin_inset Formula 
\[
\mathfrak{se}\left(2\right)=\left\{ \left.\begin{bmatrix}\omega_{\times} & \rho\\
0 & 0
\end{bmatrix}\,\right|\,\omega\in\mathfrak{s0}\left(2\right)\text{ and }\rho\in\mathbb{R}^{2}\right\} ,
\]

\end_inset

where 
\begin_inset Formula $\theta\in\mathbb{R},$
\end_inset


\begin_inset Formula $\omega_{\times}=\left[\omega\right]_{\times}$
\end_inset

, and 
\begin_inset Formula $\left[\cdot\right]_{\times}$
\end_inset

 is the skew symmetric operator defined as 
\begin_inset Formula 
\[
\left[\omega\right]_{\times}=\begin{bmatrix}0 & -\omega\\
\omega & 0
\end{bmatrix},
\]

\end_inset

and 
\begin_inset Formula 
\[
\begin{bmatrix}\rho\\
\omega
\end{bmatrix}\in\mathbb{R}^{3}
\]

\end_inset

which is the Cartesian vector space.
 
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $g\in SE\left(2\right)$
\end_inset

 and 
\begin_inset Formula $u\in\mathfrak{se}\left(2\right)$
\end_inset

.
 Using an element of the Lie algebra, we can define the infinitesimal generator
 
\begin_inset Formula $\xi_{u}:G\to TG$
\end_inset

 as 
\begin_inset Formula 
\begin{align*}
\xi_{u}\left(g\right) & =gu\\
 & =\dot{g}.
\end{align*}

\end_inset

The discretized state transition function 
\begin_inset Formula $f:SE\left(2\right)\times\mathbb{R}^{2}\to SE\left(2\right)\times\mathbb{R}^{2}$
\end_inset

 is 
\begin_inset Formula 
\begin{align*}
g_{k} & =\text{\text{Exp}}\left(\delta_{k}\left(u_{k^{-}}+w_{k}^{g}\right)+\frac{\delta_{k}^{2}}{2}w_{k}^{u}\right)\\
u_{k} & =u_{k^{-}}+\delta_{k}w_{k}^{u}
\end{align*}

\end_inset


\end_layout

\begin_layout Subsection
Group Operations
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $g_{1},g_{2}\in SE\left(2\right)$
\end_inset

.
 The inversion and group multiplication is matrix inversion and matrix multiplic
ation as follows
\begin_inset Formula 
\begin{align*}
g_{1}^{-1} & =\begin{bmatrix}R_{1}^{\top} & -R_{1}^{\top}t_{1}\\
0 & 1
\end{bmatrix}\\
g_{1}g_{2} & =\begin{bmatrix}R_{1}R_{2} & R_{1}t_{2}+t_{1}\\
0 & 1
\end{bmatrix}.
\end{align*}

\end_inset

 
\end_layout

\begin_layout Subsection
Exponential Map
\end_layout

\begin_layout Standard
The exponential map is the matrix exponential and it's inverse is the matrix
 logarithm.
 The matrix exponential is a surjective function; however, by restricting
 the domain to 
\begin_inset Formula 
\[
U=\left\{ u\in\mathfrak{se}\left(2\right)\,\mid\,\left\Vert u\right\Vert <\pi\right\} ,
\]

\end_inset

it becomes a bijection.
 In this case, the exponential map and its inverse have a simplified form
 
\begin_inset Formula 
\begin{align*}
\text{\exp}\left(u\right) & =\begin{bmatrix}\exp\left(\omega\right) & J_{l}\left(\omega\right)\rho\\
0_{1\times2} & 1
\end{bmatrix}\\
\text{\log}\left(g\right) & =\begin{bmatrix}\log\left(R\right) & J_{l}^{-1}\left(\omega\right)t\\
0_{1\times2} & 0
\end{bmatrix}
\end{align*}

\end_inset

with
\begin_inset Formula 
\begin{align}
\theta & =\omega^{\vee}\\
\exp\left(\omega\right) & =\begin{bmatrix}\cos\left(\theta\right) & -\sin\left(\theta\right)\\
\sin\left(\theta\right) & \cos\left(\theta\right)
\end{bmatrix}\\
\log\left(R\right) & =\arctan\left(R_{21},R_{11}\right)\\
\omega & =\log\left(R\right)\\
J_{l}\left(\omega\right) & =\begin{cases}
I & \text{if }\theta=0\\
\frac{\sin\left(\theta\right)}{\theta}I+\frac{1-\cos\left(\theta\right)}{\theta}\left[1\right]_{\times} & \text{else}
\end{cases}\label{eq:se2_v}\\
J_{l}^{-1}\left(\omega\right) & =\begin{cases}
I & \text{if }\theta=0\\
\frac{\theta\sin\left(\theta\right)}{2\left(1-\cos\left(\theta\right)\right)}I-\frac{\theta}{2}\left[1\right]_{\times} & \text{else}
\end{cases}
\end{align}

\end_inset

and 
\begin_inset Formula $J_{l}$
\end_inset

 being the left Jacobian of 
\begin_inset Formula $SO\left(2\right)$
\end_inset


\end_layout

\begin_layout Subsection
Jacobians
\end_layout

\begin_layout Subsubsection
Adjoint
\end_layout

\begin_layout Standard
The group adjoint representation is
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\mathbf{Ad}_{g}=\begin{bmatrix}R & -\left[1\right]_{\times}t\\
0_{1\times2} & 1
\end{bmatrix}
\]

\end_inset

with inverse 
\begin_inset Formula 
\[
\mathbf{Ad}_{g}^{-1}=\begin{bmatrix}R^{\top} & R^{\top}\left[1\right]_{\times}t\\
0_{1\times2} & 1
\end{bmatrix}.
\]

\end_inset

The Lie algebra adjoint representation is 
\begin_inset Formula 
\[
\mathbf{ad}_{u}=\begin{bmatrix}\left[\omega\right]_{\times} & -\left[1\right]_{\times}\rho\\
0_{1\times2} & 0
\end{bmatrix}.
\]

\end_inset


\end_layout

\begin_layout Subsubsection
Left and Right Jacobians
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula 
\begin{align*}
W_{r}\left(\theta\right) & =\frac{\cos\left(\theta\right)-1}{\theta}\left[1\right]_{\times}+\frac{\sin\left(\theta\right)}{\theta}I\\
D_{r}\left(\theta\right) & =\frac{1-\cos\left(\theta\right)}{\theta^{2}}\left[1\right]_{\times}+\frac{\theta-\sin\left(\theta\right)}{\theta^{2}}I\\
W_{l}\left(\theta\right) & =\frac{1-\cos\left(\theta\right)}{\theta}\left[1\right]_{\times}+\frac{\sin\left(\theta\right)}{\theta}I\\
D_{l}\left(\theta\right) & =\frac{\cos\left(\theta\right)-1}{\theta^{2}}\left[1\right]_{\times}+\frac{\theta-\sin\left(\theta\right)}{\theta^{2}}I,
\end{align*}

\end_inset

then 
\begin_inset Formula 
\begin{align*}
J_{r}\left(u\right) & =\begin{bmatrix}W_{r}\left(\theta\right) & D_{r}\left(\theta\right)\rho\\
0 & 1
\end{bmatrix},\\
J_{l}\left(u\right) & =\begin{bmatrix}W_{l}\left(\theta\right) & D_{l}\left(\theta\right)\rho\\
0 & 1
\end{bmatrix}\\
J_{r}^{-1}\left(u\right) & =\begin{bmatrix}W_{r}^{-1}\left(\theta\right) & -W_{r}^{-1}\left(\theta\right)D_{r}\left(\theta\right)\rho\\
0 & 1
\end{bmatrix}\\
J_{l}^{-1}\left(u\right) & =\begin{bmatrix}W_{l}^{-1}\left(\theta\right) & -W_{l}^{-1}\left(\theta\right)D_{l}\left(\theta\right)\rho\\
0 & 1
\end{bmatrix}.
\end{align*}

\end_inset

If 
\begin_inset Formula $\theta=0$
\end_inset

, then the Jacobians and their inverses are the identity function.
\end_layout

\begin_layout Section
Homography
\begin_inset CommandInset label
LatexCommand label
name "sec:Homography"

\end_inset


\end_layout

\begin_layout Standard
When tracking targets in the normalized virtual image plane (NVIP) we use
 the homography 
\begin_inset CommandInset citation
LatexCommand cite
key "Ma"
literal "false"

\end_inset

 to transform the measurements and tracks from the previous normalized virtual
 camera frame (NVCF) to the current NVCF.
 To transform a track, both the state estimate 
\begin_inset Formula $\hat{x}$
\end_inset

 and the covariance 
\begin_inset Formula $P$
\end_inset

 are transformed using the homography.
 Transforming measurements is similar to transforming the state estimate
 so we will only discuss how to transform a track.
 In this section we build upon the work presented in 
\begin_inset CommandInset citation
LatexCommand cite
key "White2019"
literal "true"

\end_inset

.
\end_layout

\begin_layout Standard
Before presenting the lemmas, we introduce notation with a little review.
 Let 
\begin_inset Formula $P_{t/n}^{c}$
\end_inset

 denote the position of the target with respect to the NVIP and expressed
 in the camera frame, 
\begin_inset Formula $R_{c}^{n}$
\end_inset

 denote the rotation from the camera frame to the NVCF, 
\begin_inset Formula $K$
\end_inset

 be a matrix containing the camera's intrinsic parameters and 
\begin_inset Formula $\lambda$
\end_inset

 a normalizing coefficient, then the target's pixel location in the NVIP
 is 
\begin_inset Formula 
\[
\lambda\begin{bmatrix}u\\
v\\
1
\end{bmatrix}=R_{c}^{n}KP_{t/n}^{c}.
\]

\end_inset

Let 
\begin_inset Formula $H$
\end_inset

 denote the homography that maps pixels from the previous to the current
 NVCF.
 It can be separated into sub-matrices 
\begin_inset Formula 
\[
H=\begin{bmatrix}H_{1} & h_{2}\\
h_{3}^{\top} & h_{4}
\end{bmatrix}.
\]

\end_inset


\end_layout

\begin_layout Lemma
\begin_inset CommandInset label
LatexCommand label
name "lem:homography_r2"

\end_inset

We assume directly that the target evolves on the configuration manifold
 
\begin_inset Formula $\mathbb{R}^{n}$
\end_inset

.
 Let 
\begin_inset Formula $\hat{x}^{n^{-}}=\left[\hat{t}^{n^{-}},\dot{\hat{t}}^{n^{-}}\right]$
\end_inset

 denote the estimated state of the target in the previous frame, and 
\begin_inset Formula $P^{n^{-}}$
\end_inset

 denote the error covariance, then 
\begin_inset Formula 
\begin{align*}
\hat{t}^{n} & =g\left(H,\hat{t}^{n^{-}}\right),\\
\dot{\hat{t}}^{n} & =G\left(H,\hat{t}^{n^{-}}\right)\dot{t}^{n^{-}},\\
P^{n} & =C\left(H,\hat{x}^{n^{-}}\right)P^{n^{-}}C^{\top}\left(H,\hat{x}^{n^{-}}\right)
\end{align*}

\end_inset

where 
\begin_inset Formula 
\begin{align}
g\left(H,\hat{t}^{n^{-}}\right) & =\frac{H_{1}\hat{t}^{n^{-}}+h_{2}}{h_{3}^{\top}\hat{t}^{n^{-}}+h_{4}},\label{eq:homography_r2_pos}\\
G\left(H,\hat{t}^{n^{-}}\right) & =\frac{1}{\hat{\eta}}\left(\hat{\eta}H_{1}-\left(H_{1}\hat{t}^{n^{-}}+h_{2}\right)h_{3}^{\top}\right),\label{eq:homography_r2_vel}\\
C\left(H,\hat{x}^{n^{-}}\right) & =\begin{bmatrix}G\left(H,\hat{t}^{n^{-}}\right) & 0\\
M\left(H,\hat{x}^{n^{-}}\right) & G\left(H,\hat{t}^{n^{-}}\right)
\end{bmatrix},\nonumber \\
M\left(H,\hat{x}^{n^{-}}\right) & =\frac{2\left(H_{1}\hat{t}^{n^{-}}+h_{2}\right)h_{3}^{\top}\hat{\dot{t}}^{n^{-}}h_{3}^{\top}}{\hat{\eta}^{3}}\label{eq:homography_r2_cov}\\
 & -\frac{H_{1}\hat{\dot{t}}^{n^{-}}h_{3}^{\top}\hat{\eta}-H_{1}h_{3}^{\top}\hat{\dot{t}}^{n^{-}}\hat{\eta}}{\hat{\eta}^{3}},\\
\hat{\eta} & =\left(h_{3}^{\top}\hat{t}^{n^{-}}+h_{4}\right)^{2}.\nonumber 
\end{align}

\end_inset


\end_layout

\begin_layout Proof
The homography satisfies the constraint
\begin_inset Formula 
\[
\lambda^{n}\begin{bmatrix}t^{n}\\
1
\end{bmatrix}=\lambda^{n^{-}}H\begin{bmatrix}t^{n^{-}}\\
1
\end{bmatrix}.
\]

\end_inset

Expanding it out gives us 
\begin_inset Formula 
\[
\begin{bmatrix}\lambda^{n}t^{n}\\
\lambda^{n}
\end{bmatrix}=\lambda^{n^{-}}\begin{bmatrix}H_{1}t^{n^{-}}+h_{2}\\
h_{3}^{\top}t^{n^{-}}+h_{4}
\end{bmatrix},
\]

\end_inset

which indicates that 
\begin_inset Formula $\lambda^{n}=\lambda^{n^{-}}\left(h_{3}^{\top}t^{n^{-}}+h_{4}\right)$
\end_inset

.
 We can now substitute in 
\begin_inset Formula $\lambda^{n^{-}}\left(h_{3}^{\top}t^{n^{-}}+h_{4}\right)$
\end_inset

 for 
\begin_inset Formula $\lambda^{n}$
\end_inset

 and solve for 
\begin_inset Formula $t^{n}$
\end_inset

 which gives 
\begin_inset Formula 
\[
t^{n}=\frac{1}{\eta}\left(H_{1}t^{n^{-}}+h_{2}\right)
\]

\end_inset

where 
\begin_inset Formula $\eta=h_{3}^{\top}t^{n^{-}}+h_{4}$
\end_inset

.
 Taking the above equation w.r.t.
 time gives us 
\begin_inset Formula 
\begin{align*}
\frac{\partial g\left(H,t^{n^{-}}\right)}{\partial t} & =\frac{H_{1}}{\eta}-\frac{\left(H_{1}t^{n^{-}}+h_{2}\right)h_{3}^{\top}}{\eta^{2}}\\
 & =\frac{1}{\eta}\left(\eta H_{1}-\left(H_{1}t^{n^{-}}+h_{2}\right)h_{3}^{\top}\right).
\end{align*}

\end_inset

Since the state of the model is a Gaussian random variable with mean 
\begin_inset Formula $\hat{x}^{n^{-}}$
\end_inset

 and covariance 
\begin_inset Formula $P^{n^{-}}$
\end_inset

, we wish to keep the transformed state and error covariance a Gaussian
 random variable.
 We do this by linearization.
 Let 
\begin_inset Formula 
\[
T\left(H,x^{n^{-}}\right)=\begin{bmatrix}g\left(H,t^{n^{-}}\right)\\
G\left(H,t^{n^{-}}\right)\dot{t}^{n^{-}}
\end{bmatrix},
\]

\end_inset

be the state transformation, then its linearization about 
\begin_inset Formula $\hat{x}^{n^{-}}$
\end_inset

 is 
\begin_inset Formula 
\begin{equation}
T\left(H,\hat{x}^{n^{-}}\right)+C\left(H,\hat{x}^{n^{-}}\right)\delta x^{n^{-}},\label{eq:homography_r2_linearized}
\end{equation}

\end_inset

where 
\begin_inset Formula $C\left(H,\hat{x}^{n^{-}}\right)$
\end_inset

 is defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:homography_r2_cov"
plural "false"
caps "false"
noprefix "false"

\end_inset

 and 
\begin_inset Formula 
\begin{align*}
M\left(H,\hat{x}^{n^{-}}\right) & =\left.\frac{\partial G\left(H,t^{n^{-}}\right)\dot{t}^{n^{-}}}{\partial t^{n^{-}}}\right|_{x^{n^{-}}=\hat{x}^{n^{-}}}\\
 & =\frac{-H_{1}\dot{\hat{t}}^{n^{-}}h_{3}^{\top}}{\hat{\eta}^{2}}-\frac{H_{1}h_{3}^{\top}\dot{\hat{t}}^{n^{-}}}{\hat{\eta}^{2}}\\
 & +\frac{2\left(H_{1}\hat{t}^{n^{-}}+h_{2}\right)h_{3}^{\top}\dot{\hat{t}}^{n^{-}}h_{3}^{\top}}{\hat{\eta}^{3}}
\end{align*}

\end_inset

Thus the mean and covariance of 
\begin_inset Formula $x^{n}$
\end_inset

 are calculated using it's linearized form shown in equation 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:homography_r2_linearized"
plural "false"
caps "false"
noprefix "false"

\end_inset

;
\begin_inset Formula 
\begin{align*}
\text{E}\left[x^{n}\right] & =T\left(H,\hat{x}^{n^{-}}\right)\\
\text{cov}\left[x^{n}\right] & =C\left(H,\hat{x}^{n^{-}}\right)P^{n^{-}}C^{\top}\left(H,\hat{x}^{n^{-}}\right).
\end{align*}

\end_inset


\end_layout

\begin_layout Proof
This proof can be trivially extended to transforming a model expressed in
 the image plane.
\end_layout

\begin_layout Lemma
We suppose directly that the target's configuration manifold is 
\begin_inset Formula $SE\left(2\right)$
\end_inset

, it's heading is aligned with it's velocity, the velocity in the body frame
 perpendicular to the heading is zero, and that the normal vector of the
 plane the target moves on points to Earth's core.
 These constraints are necessary in order to ensure observability as discussed
 in subsection 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:tracking_image_plane"
plural "false"
caps "false"
noprefix "false"

\end_inset

, and to ensure we can properly transform the model.
 We also suppose directly that the state estimate of the system in the previous
 NVCF is 
\begin_inset Formula $x^{n^{-}}=\left(g^{n^{-}},u^{n^{-}}\right)$
\end_inset

 where 
\begin_inset Formula 
\begin{align*}
g^{n^{-}} & =\begin{bmatrix}R^{n^{-}} & t^{n^{-}}\\
0 & 1
\end{bmatrix}\\
u^{n^{-}} & =\begin{bmatrix}\rho^{n^{-}}\\
\omega^{n^{-}}
\end{bmatrix}\\
R^{n^{-}} & =\frac{1}{\left\Vert \dot{t}^{n^{-}}\right\Vert }\begin{bmatrix}e_{1}\left(\dot{t}^{n^{-}}\right) & e_{2}\left(-\dot{t}^{n^{-}}\right)\\
e_{2}\left(\dot{t}^{n^{-}}\right) & e_{1}\left(\dot{t}^{n^{-}}\right)
\end{bmatrix},
\end{align*}

\end_inset

where 
\begin_inset Formula $t$
\end_inset

 is the pixel location in the NVCF, 
\begin_inset Formula $\rho$
\end_inset

 is the velocity in the body frame, and 
\begin_inset Formula $e_{i}$
\end_inset

 is a function that extracts the 
\begin_inset Formula $i^{th}$
\end_inset

 component of a tuple, then the model transformation is 
\begin_inset Formula 
\begin{align*}
R^{n} & =H_{1}R^{n^{-}},\\
t^{n} & =g\left(H,t^{n^{-}}\right),\\
\rho^{n} & =\frac{\rho^{n^{-}}}{h_{4}},\\
\omega^{n} & =\omega^{n^{-}},\\
P^{n} & =CP^{n^{-}}C^{\top},
\end{align*}

\end_inset

where 
\begin_inset Formula 
\begin{align*}
g\left(H,t^{n^{-}}\right) & =\frac{H_{1}t^{n^{-}}+h_{2}}{h_{4}},\\
C & =\text{diag}\left(\frac{1}{h_{4}},\frac{1}{h_{4}},1,\frac{1}{h_{4}},1\right).
\end{align*}

\end_inset


\end_layout

\begin_layout Proof
Under the assumptions, we can drastically simply the homography to
\begin_inset Formula 
\[
H=\begin{bmatrix}R\left(\psi\right) & -\pi_{e_{3}}\left(\frac{pn^{\top}}{d}\right)\\
0 & 1-e_{3}\left(\frac{pn^{\top}}{d}\right)
\end{bmatrix},
\]

\end_inset

where 
\begin_inset Formula $n$
\end_inset

 is the normalized vector that points to Earth's core, 
\begin_inset Formula $\begin{bmatrix}R\left(\psi\right) & 0_{2\times1}\\
0_{1\times2} & 1
\end{bmatrix}\in SO\left(3\right)$
\end_inset

 is the rotation from 
\begin_inset Formula $\mathcal{F}^{n^{-}}$
\end_inset

 to 
\begin_inset Formula $\mathcal{F}^{n}$
\end_inset

 about 
\begin_inset Formula $n$
\end_inset

, 
\begin_inset Formula $d$
\end_inset

 is the distance from the camera to the target plane, 
\begin_inset Formula $p$
\end_inset

 is the translation from 
\begin_inset Formula $\mathcal{F}^{n^{-}}$
\end_inset

 to 
\begin_inset Formula $\mathcal{F}^{n}$
\end_inset

 and 
\begin_inset Formula $\pi_{e_{3}}$
\end_inset

 extracts the first two components of it's argument.
 Thus 
\begin_inset Formula 
\begin{align*}
H_{1} & =R\left(\psi\right),\\
h_{2} & =-\pi_{e_{3}}\left(\frac{pn^{\top}}{d}\right),\\
h_{3}^{\top} & =0,\\
h_{4} & =1-e_{3}\left(\frac{pn^{\top}}{d}\right).
\end{align*}

\end_inset


\end_layout

\begin_layout Proof
The homography satisfies the constraint
\begin_inset Formula 
\[
\lambda^{n}\begin{bmatrix}t^{n}\\
1
\end{bmatrix}=\lambda^{n^{-}}H\begin{bmatrix}t^{n^{-}}\\
1
\end{bmatrix}.
\]

\end_inset

Expanding it out gives us 
\begin_inset Formula 
\[
\begin{bmatrix}\lambda^{n}t^{n}\\
\lambda^{n}
\end{bmatrix}=\lambda^{n^{-}}\begin{bmatrix}H_{1}t^{n^{-}}+h_{2}\\
h_{4}
\end{bmatrix},
\]

\end_inset

which indicates that 
\begin_inset Formula $\lambda^{n}=\lambda^{n^{-}}h_{4}$
\end_inset

.
 We can now substitute in 
\begin_inset Formula $\lambda^{n^{-}}h_{4}$
\end_inset

 for 
\begin_inset Formula $\lambda^{n}$
\end_inset

 and solve for 
\begin_inset Formula $t^{n}$
\end_inset

 which gives 
\begin_inset Formula 
\begin{align*}
t^{n} & =\frac{1}{h_{4}}\left(H_{1}t^{n^{-}}+h_{2}\right)\\
 & =g\left(H,t^{n^{-}}\right).
\end{align*}

\end_inset

Taking the above equation w.r.t.
 time gives us 
\begin_inset Formula $\dot{t}^{n}$
\end_inset

 which is
\begin_inset Formula 
\begin{align*}
\dot{t}^{n} & =\frac{\partial g\left(H,t^{n^{-}}\right)}{\partial t^{n^{-}}}\\
 & =\frac{H_{1}}{h_{4}}\dot{t}^{n^{-}}\\
 & =G\left(H,t^{n^{-}}\right)\dot{t}^{n^{-}}.
\end{align*}

\end_inset


\end_layout

\begin_layout Proof
By the definition of the rotation matrix 
\begin_inset Formula $R^{n}$
\end_inset

, we get 
\begin_inset Formula 
\begin{align*}
R^{n} & =\frac{1}{\left\Vert \dot{t}^{n}\right\Vert }\begin{bmatrix}e_{1}\left(\dot{t}^{n}\right) & e_{2}\left(-\dot{t}^{n}\right)\\
e_{2}\left(\dot{t}^{n}\right) & e_{1}\left(\dot{t}^{n}\right)
\end{bmatrix}\\
 & =\frac{1}{\left\Vert G\dot{t}^{n^{-}}\right\Vert }\begin{bmatrix}e_{1}\left(G\dot{t}^{n^{-}}\right) & -e_{2}\left(G\dot{t}^{n^{-}}\right)\\
e_{2}\left(G\dot{t}^{n^{-}}\right) & e_{1}\left(G\dot{t}^{n^{-}}\right)
\end{bmatrix}\\
 & =H_{1}R^{n^{-}}.
\end{align*}

\end_inset

The velocity in the body frame is 
\begin_inset Formula 
\begin{align*}
\rho^{n} & =\left(R^{n}\right)^{-1}GR^{n^{-}}\rho^{n^{-}}\\
 & =\left(R^{n^{-}}\right)^{-1}H_{1}^{-1}\frac{H_{1}}{h^{4}}\rho^{n^{-}}\\
 & =\frac{\rho^{n^{-}}}{h^{4}}.
\end{align*}

\end_inset


\end_layout

\begin_layout Proof
Since a rotation and translation doesn't affect the angular velocity in
 
\begin_inset Formula $SE\left(2\right)$
\end_inset

, we get 
\begin_inset Formula 
\[
\omega^{n}=\omega^{n^{-}}.
\]

\end_inset


\end_layout

\begin_layout Proof
The state 
\begin_inset Formula $x^{n^{-}}$
\end_inset

 is a Gaussian random variable with mean 
\begin_inset Formula $\hat{x}^{n^{-}}$
\end_inset

 and covariance 
\begin_inset Formula $P^{n^{-}}$
\end_inset

.
 We approximate 
\begin_inset Formula $p\left(x^{n}\right)$
\end_inset

 as a Gaussian random variable by linearizing the transformation about 
\begin_inset Formula $\hat{x}^{n^{-}}$
\end_inset

 and calculating the expected value and covariance.
 Let 
\begin_inset Formula $T:G\times E\to G\times E$
\end_inset

 denote the transformation from 
\begin_inset Formula $x^{n^{-}}$
\end_inset

 to 
\begin_inset Formula $x^{n}$
\end_inset

 using the homography.
 According to lemma 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:a_posterior"
plural "false"
caps "false"
noprefix "false"

\end_inset

, 
\begin_inset Formula 
\[
p\left(x^{n}\right)\approx\eta\exp\left(-\frac{1}{2}\left(\delta x^{n}\right)^{\top}P^{n}\delta x^{n}\right)
\]

\end_inset

where 
\begin_inset Formula 
\begin{align*}
\delta x & =x^{n}\ominus T\left(\hat{x}^{n^{-}}\right)\\
P & =CPC^{\top}\\
C & =\left.\frac{\partial T\left(x^{n^{-}}\right)}{\partial x^{n^{-}}}\right|_{x=\hat{x}}.
\end{align*}

\end_inset

To calculate 
\begin_inset Formula $C$
\end_inset

 we can decompose it into blocks
\begin_inset Formula 
\[
C=\begin{bmatrix}C_{11} & C_{12}\\
C_{21} & C_{22}
\end{bmatrix}.
\]

\end_inset

The first block is 
\begin_inset Formula 
\begin{align*}
C_{11} & =\left.\frac{\partial T_{1}\left(g^{n^{-}}\right)}{\partial g^{n^{-1}}}\right|_{x^{n^{-}}=\hat{x}^{n^{-}}}\\
 & =\text{diag}\left(\frac{1}{h_{4}},\frac{1}{h_{4}},1\right),
\end{align*}

\end_inset

where 
\begin_inset Formula $T_{1}$
\end_inset

 is the part of the transformation 
\begin_inset Formula $T$
\end_inset

 pertaining to transforming the pose.
 
\end_layout

\begin_layout Proof
The off diagonal blocks are both zero matrices, and the last block is 
\begin_inset Formula 
\begin{align*}
C_{22} & =\left.\frac{\partial T_{2}\left(H,u^{n^{-}}\right)}{\partial u^{n^{-}}}\right|_{x^{n^{-}}=\hat{x}^{n^{-}}}\\
 & =\text{diag}\left(\frac{1}{h_{4}},\frac{1}{h^{4}},1\right),
\end{align*}

\end_inset

where 
\begin_inset Formula $T_{2}$
\end_inset

 is the part of the transformation 
\begin_inset Formula $T$
\end_inset

 pertaining to transforming the velocity.
 The second diagonal term in 
\begin_inset Formula $C_{22}$
\end_inset

 pertains to the velocity that is perpendicular to the heading which we
 constrain it to be zero; thus, it is not part of the covariance and can
 be dropped to get 
\begin_inset Formula 
\[
C_{22}=\text{diag}\left(\frac{1}{h_{4}},1\right).
\]

\end_inset


\end_layout

\begin_layout Proof
Putting all of the blocks together yields 
\begin_inset Formula 
\[
C=\text{diag}\left(\frac{1}{h_{4}},\frac{1}{h_{4}},1,\frac{1}{h_{4}},1\right).
\]

\end_inset


\end_layout

\begin_layout Section
Uncertainty Lemmas
\end_layout

\begin_layout Standard
In this section we present several lemmas used to calculate the probability
 distribution of random variables used in this paper.
 For those unfamiliar with representing uncertainty on Lie groups, we refer
 you to 
\begin_inset CommandInset citation
LatexCommand cite
key "Bourmaud2014,Kim2017,Long2013,Bourmaud2013"
literal "true"

\end_inset

.
\end_layout

\begin_layout Lemma
\begin_inset CommandInset label
LatexCommand label
name "lem:a_posterior"

\end_inset

Let 
\begin_inset Formula $z\in N$
\end_inset

, 
\begin_inset Formula $x\in G$
\end_inset

, 
\begin_inset Formula $c\in E$
\end_inset

 and 
\begin_inset Formula $j:G\times E\to N$
\end_inset

 be an arbitrary function.
 Also, let 
\begin_inset Formula $x$
\end_inset

 be a Gaussian random variable with mean 
\begin_inset Formula $\hat{x}$
\end_inset

 and covariance 
\begin_inset Formula $P$
\end_inset

, and 
\begin_inset Formula $c$
\end_inset

 be a Gaussian random variable with mean 
\begin_inset Formula $0$
\end_inset

 and covariance 
\begin_inset Formula $M$
\end_inset

.
 Note that the lie Groups 
\begin_inset Formula $N$
\end_inset

 and 
\begin_inset Formula $G$
\end_inset

 can be the same groups.
 Lastly, let the probability of 
\begin_inset Formula $z$
\end_inset

 be defined as 
\begin_inset Formula 
\[
p\left(z\right)=\int_{\delta x}p\left(z\mid x\right)p\left(x\right)d\delta x,
\]

\end_inset

then the Gaussian approximation of 
\begin_inset Formula $p\left(z\right)$
\end_inset

 linearized about 
\begin_inset Formula $x=\hat{x}$
\end_inset

 and 
\begin_inset Formula $c=0$
\end_inset

 is 
\begin_inset Formula 
\begin{align*}
p\left(z\right) & \approx\eta\exp\left(-\frac{1}{2}\left(z\ominus j\left(\hat{x},0\right)\right)^{\top}\right.\\
 & \left.\Psi^{-1}\left(z\ominus j\left(\hat{x},0\right)\right)\right),
\end{align*}

\end_inset

with the mean and covariance being 
\begin_inset Formula 
\begin{align*}
\hat{z} & =j\left(\hat{x},0\right)\\
\Psi & =\left(JPJ^{\top}+CMC^{\top}\right),
\end{align*}

\end_inset

where
\begin_inset Formula 
\begin{align*}
J & =\left.\frac{\partial j\left(x,c\right)}{\partial x}\right|_{\begin{array}{c}
x=\hat{x}\\
c=0
\end{array}}\\
C & =\left.\frac{\partial j\left(x,c\right)}{\partial c}\right|_{\begin{array}{c}
x=\hat{x}\\
c=0
\end{array}}.
\end{align*}

\end_inset


\end_layout

\begin_layout Proof
We first recall that the probability, when using Lie groups, is defined
 in the Lie algebra, thus 
\begin_inset Formula 
\begin{align*}
p\left(x\right) & =\eta\exp\left(-\frac{1}{2}\left(x\ominus\hat{x}\right)^{\top}P^{-1}\left(x\ominus\hat{x}\right)\right)\\
 & =\eta\exp\left(-\frac{1}{2}\delta x^{\top}P^{-1}\delta x\right),
\end{align*}

\end_inset

where 
\begin_inset Formula $\delta x=x\ominus\hat{x}$
\end_inset

 is a random variable.
 The probability 
\begin_inset Formula $p\left(z\right)$
\end_inset

 might not necessarily be Gaussian depending on the function 
\begin_inset Formula $j$
\end_inset

.
 If 
\begin_inset Formula $j$
\end_inset

 is nonlinear in 
\begin_inset Formula $x$
\end_inset

 or 
\begin_inset Formula $c$
\end_inset

, then 
\begin_inset Formula $p\left(z\right)$
\end_inset

 is not Gaussian.
 However, we can approximate 
\begin_inset Formula $p\left(z\right)$
\end_inset

 as Gaussian by linearizing 
\begin_inset Formula $p\left(z\mid x\right)$
\end_inset

 w.r.t.
 
\begin_inset Formula $x$
\end_inset

 and 
\begin_inset Formula $c$
\end_inset

 evaluated at 
\begin_inset Formula $x=\hat{x}$
\end_inset

 and 
\begin_inset Formula $c=0$
\end_inset

.
 According to the function 
\begin_inset Formula $j$
\end_inset

,
\begin_inset Formula 
\[
z=j\left(x,c\right).
\]

\end_inset

 Linearizing it yields 
\begin_inset Formula 
\[
z\approx j\left(\hat{x},0\right)\exp\left(J\delta x+Cc\right)
\]

\end_inset

where 
\begin_inset Formula $J$
\end_inset

 and 
\begin_inset Formula $C$
\end_inset

 are defined above.
 Since 
\begin_inset Formula $p\left(z\mid x\right)$
\end_inset

 is the probability of 
\begin_inset Formula $z$
\end_inset

 conditioned on 
\begin_inset Formula $x$
\end_inset

, 
\begin_inset Formula $\delta x$
\end_inset

 is not a random variable in this case; hoever, 
\begin_inset Formula $c$
\end_inset

 is a random variable.
 Thus, the term 
\begin_inset Formula $J\delta x+Cc$
\end_inset

 is a random variable with expectation and covariance 
\begin_inset Formula 
\begin{align*}
\text{E}\left[J\delta x+Cc\right] & =J\delta x\\
\text{cov}\left[J\delta x+Cc\right] & =CMC^{\top}.
\end{align*}

\end_inset

Therefore, the Gaussian approximation of 
\begin_inset Formula $p\left(z\mid x\right)$
\end_inset

 is 
\begin_inset Formula 
\[
\eta\exp\left(-\frac{1}{2}\left(\hat{e}-J\delta x\right)^{\top}\bar{M}^{-1}\left(\hat{e}-J\delta x\right)\right),
\]

\end_inset

with 
\begin_inset Formula $\hat{e}=z\ominus j\left(\hat{x},0\right)$
\end_inset

 and 
\begin_inset Formula $\bar{M}=CMC^{\top}$
\end_inset

.
 
\end_layout

\begin_layout Proof
Using the Gaussian approximation for 
\begin_inset Formula $p\left(z\mid x\right)$
\end_inset

, expanding out the expression for 
\begin_inset Formula $p\left(z\right)$
\end_inset

 yields,
\begin_inset Formula 
\begin{align*}
p\left(z\right) & \approx\eta\int_{\delta x}\exp\left(-\frac{1}{2}\left(\hat{e}-J\delta x\right)^{\top}\bar{M}^{-1}\left(\hat{e}-J\delta x\right)\right)\\
 & \exp\left(-\frac{1}{2}\delta x^{\top}P^{-1}\delta x\right).
\end{align*}

\end_inset


\end_layout

\begin_layout Proof
Combining the exponents gives 
\begin_inset Formula 
\[
p\left(z\right)\approx\eta\int_{\delta x}\exp\left(-L\right)\delta x,
\]

\end_inset

with 
\begin_inset Formula 
\[
L=\frac{1}{2}\left(\hat{e}-J\delta x\right)^{\top}\bar{M}^{-1}\left(\hat{e}-J\delta x\right)+\frac{1}{2}\delta x^{\top}P^{-1}\delta x.
\]

\end_inset


\end_layout

\begin_layout Proof
Our next objective is to split the term 
\begin_inset Formula $L$
\end_inset

 into two terms 
\begin_inset Formula $L\left(z\right)$
\end_inset

 and 
\begin_inset Formula $L\left(z,\delta x\right)$
\end_inset

 where 
\begin_inset Formula $L\left(z\right)$
\end_inset

 is quadratic in 
\begin_inset Formula $z$
\end_inset

 and not dependent on 
\begin_inset Formula $\delta x$
\end_inset

 and 
\begin_inset Formula $L\left(z,\delta x\right)$
\end_inset

 is quadratic in 
\begin_inset Formula $\delta x$
\end_inset

.
 This will allow us to pull 
\begin_inset Formula $L\left(z\right)$
\end_inset

 out of the integral leaving 
\begin_inset Formula $L\left(z,\delta x\right)$
\end_inset

 inside the integral resembling a Gaussian distribution which would integrate
 to a constant that we can absorb into 
\begin_inset Formula $\eta$
\end_inset

.
 In other words, we will end up with 
\begin_inset Formula 
\[
p\left(z\right)\approx\eta\exp\left(-L\left(z\right)\right).
\]

\end_inset

In order to split 
\begin_inset Formula $L$
\end_inset

 into 
\begin_inset Formula $L\left(z\right)$
\end_inset

 and 
\begin_inset Formula $L\left(z,\delta x\right)$
\end_inset

 we take the first and second derivatives of 
\begin_inset Formula $L$
\end_inset

 w.r.t.
 to 
\begin_inset Formula $\delta x$
\end_inset

 and compose 
\begin_inset Formula $L\left(z,\delta x\right)$
\end_inset

.
 Taking the first derivative, setting it to zero and solving for 
\begin_inset Formula $\delta x$
\end_inset

 will give us the mean of 
\begin_inset Formula $L\left(z,\delta x\right)$
\end_inset

, and the second derivative will provide the covariance for 
\begin_inset Formula $L\left(z,\delta x\right)$
\end_inset

.
\begin_inset Formula 
\begin{align*}
\frac{\partial L}{\partial\delta x} & =-\left(\hat{e}-J\delta x\right)^{\top}\bar{M}^{-1}J\\
 & +\delta x^{\top}P^{-1},
\end{align*}

\end_inset


\begin_inset Formula 
\[
\frac{\partial^{2}L}{\partial\delta x^{2}}=J^{\top}\bar{M}^{-1}J+P^{-1}=\Psi^{-1}.
\]

\end_inset

Setting the first derivative to zero and solving for 
\begin_inset Formula $\delta x$
\end_inset

 yields 
\begin_inset Formula 
\[
\delta x=\Psi J^{\top}\bar{M}^{-1}\hat{e}
\]

\end_inset

which we use to construct 
\begin_inset Formula $L\left(z,\delta x\right)$
\end_inset

 and get 
\begin_inset Formula 
\begin{align*}
L\left(z,\delta x\right) & =\frac{1}{2}\left(\delta x-\Psi J^{\top}\bar{M}^{-1}\hat{e}\right)^{\top}\\
 & \Psi^{-1}\left(\delta x-\Psi J^{\top}\bar{M}^{-1}\hat{e}\right).
\end{align*}

\end_inset

Next we calculate 
\begin_inset Formula $L\left(z\right)=L-L\left(z,\delta x\right)$
\end_inset

 and get 
\begin_inset Formula 
\begin{align*}
L\left(z\right) & =\frac{1}{2}\left(\hat{e}^{\top}\bar{M}^{-1}\hat{e}-2\delta x^{\top}J^{\top}\bar{M}^{-1}\hat{e}+\delta x^{\top}\Psi^{-1}\delta x\right)\\
 & -\frac{1}{2}\left(\delta x^{\top}\Psi^{-1}\delta x+\hat{e}^{\top}\bar{M}^{-1}J\Psi J^{\top}\bar{M}^{\top}\hat{e}-2\delta x^{\top}J^{\top}\bar{M}^{-1}\hat{e}\right)\\
 & =\frac{1}{2}\left(\hat{e}^{\top}\left(\bar{M}^{-1}-\bar{M}^{-1}J\Psi J^{\top}\bar{M}^{\top}\right)\hat{e}\right)
\end{align*}

\end_inset

Applying the inversion lemma presented in 
\begin_inset CommandInset citation
LatexCommand cite
key "Thrun2006"
literal "false"

\end_inset

 to L
\begin_inset Formula $\left(z\right)$
\end_inset

 gives 
\begin_inset Formula 
\[
L\left(z\right)=\frac{1}{2}\hat{e}^{\top}\left(JPJ^{\top}+CMC^{\top}\right)^{-1}\hat{e}.
\]

\end_inset

Therefore, 
\begin_inset Formula $p\left(z\right)$
\end_inset

 can be approximated as a Gaussian distribution with mean 
\begin_inset Formula $\hat{z}=j\left(\hat{x},0\right)$
\end_inset

 and covariance 
\begin_inset Formula $\left(JPJ^{\top}+CMC^{\top}\right)$
\end_inset

.
\end_layout

\begin_layout Lemma
\begin_inset CommandInset label
LatexCommand label
name "lem:meas_inverse_prob"

\end_inset

Let 
\begin_inset Formula $y_{m}\in N$
\end_inset

 denote a measurement at time 
\begin_inset Formula $m$
\end_inset

 and 
\begin_inset Formula $x_{k}$
\end_inset

 denote a state at time 
\begin_inset Formula $k>m$
\end_inset

 with the relation defined in 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:model_inverse"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 Given 
\begin_inset Formula $p\left(y_{m}\mid x_{m}\right)$
\end_inset

 and 
\begin_inset Formula $p\left(x_{m}\mid x_{k}\right)$
\end_inset

, the probability 
\begin_inset Formula $p\left(y_{m}\mid x_{k}\right)$
\end_inset

 is defined as 
\begin_inset Formula 
\[
p\left(y_{m}\mid x_{k}\right)=\int_{\delta x_{m}}p\left(y_{m}\mid x_{m}\right)p\left(x_{m}\mid x_{k}\right)d_{\delta x_{m}}
\]

\end_inset

which can be approximated as Gaussian distribution
\begin_inset Formula 
\[
p\left(y_{m}\mid x_{k}\right)\approx\eta\exp\left(-\frac{1}{2}\hat{e}^{\top}S_{k:m}^{-1}\hat{e}\right),
\]

\end_inset

with 
\begin_inset Formula 
\begin{align}
\hat{x}_{m} & =f^{-1}\left(x_{k},0,\delta_{k:m}\right),\nonumber \\
\hat{e} & =y_{m}\ominus h\left(\hat{x}_{m},0\right),\nonumber \\
S_{k:m} & =V_{m}RV_{m}^{\top}+H_{m}G_{k:m}QG_{k:m}^{\top}H_{m}^{\top},\label{eq:inverse_innovation_cov}
\end{align}

\end_inset


\begin_inset Formula 
\begin{align*}
G_{k:m} & =\left.\begin{bmatrix}J_{r}\left(\delta_{k:m}u_{k}\right)\delta_{k:m} & J_{r}\left(\delta_{k:m}u_{k}\right)\frac{\delta_{k:m}^{2}}{2}\\
0 & I\delta_{k:m}
\end{bmatrix}\right|_{\begin{array}{c}
x_{m}=\hat{x}_{m},\\
v=0
\end{array}},\\
H_{m} & =\left.\frac{\partial h\left(x_{m},v_{m}\right)}{\partial x_{m}}\right|_{\begin{array}{c}
x_{m}=\hat{x}_{m},\\
v=0
\end{array}},\\
V_{m} & =\left.\frac{\partial h\left(x_{m},v_{m}\right)}{\partial v_{m}}\right|.
\end{align*}

\end_inset


\end_layout

\begin_layout Proof
We use a similar technique that's used in lemma 
\begin_inset CommandInset ref
LatexCommand ref
reference "lem:a_posterior"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
 We begin with the calculating the Gaussian linearizations of 
\begin_inset Formula $p\left(y_{m}\mid x_{m}\right)$
\end_inset

 and 
\begin_inset Formula $p\left(x_{m}\mid x_{k}\right)$
\end_inset

 that are linearized about 
\begin_inset Formula $x_{m}=\hat{x}_{m}$
\end_inset

, 
\begin_inset Formula $v_{m}=0$
\end_inset

, and 
\begin_inset Formula $w_{m}=0$
\end_inset

.
 Using lemma 
\begin_inset CommandInset ref
LatexCommand eqref
reference "lem:transition_func_jacobians"
plural "false"
caps "false"
noprefix "false"

\end_inset

 we have
\begin_inset Formula 
\[
x_{m}\approx f^{-1}\left(x_{k},0,\delta_{k:m}\right)\exp\left(G_{k:m}\delta w\right),
\]

\end_inset

with 
\end_layout

\begin_layout Proof
\begin_inset Formula 
\begin{align*}
G_{k:m} & =\begin{bmatrix}J_{r}\left(\delta_{k:m}u_{k}\right)\delta_{k:m} & J_{r}\left(\delta_{k:m}u_{k}\right)\frac{\delta_{k:m}^{2}}{2}\\
0 & I\delta_{k:m}
\end{bmatrix}_{\begin{array}{c}
x_{m}=\hat{x}_{m}\\
w_{k}=0
\end{array}}.
\end{align*}

\end_inset

Calculating the expected value and covariance gives 
\begin_inset Formula 
\begin{align*}
\text{E}\left[G_{k:m}\delta w\right] & =F_{k:m}0\\
\text{cov}\left[G_{k:m}\delta w\right] & =\bar{Q}_{k:m},
\end{align*}

\end_inset

with 
\begin_inset Formula 
\begin{equation}
\bar{Q}_{k:m}=G_{k:m}QG_{k:m}^{\top}.\label{eq:inverse_prop_cov}
\end{equation}

\end_inset


\end_layout

\begin_layout Proof
Therefore, 
\begin_inset Formula 
\begin{align*}
p\left(x_{m}\mid x_{k}\right) & \approx\eta\exp\left(-\frac{1}{2}\delta x_{m}^{\top}\bar{Q}_{k:m}^{-1}\delta x_{m}\right)
\end{align*}

\end_inset

where 
\begin_inset Formula $\delta x_{m}=x_{m}\ominus\hat{x}_{m}$
\end_inset

 and 
\begin_inset Formula $\hat{x}_{m}=f^{-1}\left(x_{k},0,\delta_{k:m}\right)$
\end_inset

.
\end_layout

\begin_layout Proof
The linearization of the observation is 
\begin_inset Formula 
\[
y_{m}\approx h\left(\hat{x}_{m},0\right)\exp\left(H_{m}\delta x_{m}+V_{m}\delta v_{m}\right),
\]

\end_inset

where 
\begin_inset Formula $H_{m}$
\end_inset

 and 
\begin_inset Formula $V_{m}$
\end_inset

 are defined above.
 Calculating the expected value and covariance gives 
\begin_inset Formula 
\begin{align*}
\text{E}\left[H_{m}\delta x_{m}+V_{m}\delta v_{m}\right] & =H_{m}\delta x_{m}\\
\text{cov}\left[H_{m}\delta x_{m}+V_{m}\delta v_{m}\right] & =R_{m},
\end{align*}

\end_inset

with 
\begin_inset Formula 
\begin{equation}
\bar{R}_{m}=V_{m}RV_{m}^{\top}.\label{eq:meas_cov}
\end{equation}

\end_inset


\end_layout

\begin_layout Proof
Therefore
\begin_inset Formula 
\begin{align*}
p\left(y_{m}\mid x_{m}\right) & \approx\eta\exp\left(-\frac{1}{2}\left(y_{m}\ominus h\left(\hat{x}_{m},0\right)-H_{m}\delta x_{m}\right)^{\top}\right.\\
 & \left.\bar{R}_{m}^{-1}\left(y_{m}\ominus h\left(\hat{x}_{m},0\right)-H_{m}\delta x_{m}\right)\right).
\end{align*}

\end_inset

 The above linearization serves two purposes: first, it keeps the integral
 a Gaussian distribution and second it exposes the random variable 
\begin_inset Formula $\delta x_{m}$
\end_inset

 which we wish to integrate over.
 
\end_layout

\begin_layout Proof
Multiplying the two linearized probabilities together yields 
\begin_inset Formula 
\begin{align*}
p\left(y_{m}\mid x_{m}\right)p\left(x_{m}\mid x_{k}\right)\approx & \eta\exp\left(-L_{m}\right)
\end{align*}

\end_inset

with 
\begin_inset Formula 
\begin{align*}
L_{m} & =\frac{1}{2}\delta x_{m}^{\top}\bar{Q}_{k:m}^{-1}\delta x_{m}+\frac{1}{2}\left(y_{m}\ominus h\left(\hat{x}_{m},0\right)+H_{m}\delta x_{m}\right)^{\top}\\
 & \bar{R}_{m}^{-1}\left(y_{m}\ominus h\left(\hat{x}_{m},0\right)+H_{m}\delta x_{m}\right).
\end{align*}

\end_inset

In order to solve the integral, we decompose 
\begin_inset Formula $L_{m}$
\end_inset

 into two functions 
\begin_inset Formula $L_{m}\left(x_{k},\delta x_{m}\right)+L_{m}\left(x_{k}\right)$
\end_inset

 where the first function depends on 
\begin_inset Formula $x_{k}$
\end_inset

 and 
\begin_inset Formula $\delta x_{m}$
\end_inset

 and the latter function only depends on 
\begin_inset Formula $x_{k}$
\end_inset

.
 This will allow us to move the latter function out of the integral so that
 we have 
\begin_inset Formula 
\begin{align*}
\int_{\delta x_{m}}\exp\left(-L_{m}\right)d\delta x_{m} & =\eta\exp\left(-L_{m}\left(x_{k}\right)\right)\\
 & \int\exp\left(-L_{m}\left(x_{k},\delta x_{m}\right)\right)d\delta x_{m}
\end{align*}

\end_inset

By constructing 
\begin_inset Formula $L_{m}\left(x_{k},\delta x_{m}\right)$
\end_inset

 to be quadratic in 
\begin_inset Formula $\delta x_{m}$
\end_inset

 so that 
\begin_inset Formula $\exp\left(-L_{m}\left(x_{k},\delta x_{m}\right)\right)$
\end_inset

 is a Gaussian distribution, the integral would evaluate to a constant regardles
 of 
\begin_inset Formula $\delta x_{m}$
\end_inset

.
 This allows us to absorb the integral into 
\begin_inset Formula $\eta$
\end_inset

 such that 
\begin_inset Formula 
\[
P\left(y_{m}\mid x_{k}\right)\approx\eta\exp\left(-L_{m}\left(x_{k}\right)\right).
\]

\end_inset

To construct 
\begin_inset Formula $L_{m}\left(x_{k},\delta x_{m}\right)$
\end_inset

, we take the first and second derivative of 
\begin_inset Formula $L_{m}$
\end_inset

 w.r.t.
 
\begin_inset Formula $\delta x_{m}$
\end_inset

 to get
\begin_inset Formula 
\begin{align*}
\frac{\partial L_{m}}{\delta x_{m}} & =\delta x_{m}^{\top}\bar{Q}_{k:m}^{-1}\\
 & +y_{m}\ominus h\left(\hat{x}_{m},0\right)^{\top}\bar{R}_{m}^{-1}H_{m}+\delta x_{m}^{\top}H_{m}^{\top}\bar{R}^{-1}H_{m}\\
\frac{\partial^{2}L_{m}}{\delta x_{m}^{2}} & =H_{m}^{\top}\bar{R}_{m}^{-1}H_{m}+\bar{Q}_{k:m}^{-1}\\
 & =\Psi^{-1}
\end{align*}

\end_inset

Setting the first derivative to zero and solving for 
\begin_inset Formula $\delta x_{m}$
\end_inset

 gives us the mean which is
\begin_inset Formula 
\begin{align*}
\delta x_{m}^{\top}\Psi^{-1} & =-y_{m}\ominus h\left(\hat{x}_{m},0\right)^{\top}\bar{R}_{m}^{-1}H_{m}\\
\delta x_{m} & =-\Psi\left(H_{m}^{\top}\bar{R}_{m}^{-1}y_{m}\ominus h\left(\hat{x}_{m},0\right)\right).
\end{align*}

\end_inset

We can now define the quadratic function 
\begin_inset Formula $L_{m}\left(x_{k},\delta x_{m}\right)$
\end_inset

 as 
\begin_inset Formula 
\begin{align*}
L_{m}\left(x_{k},\delta x_{m}\right) & =\frac{1}{2}\left(\delta x_{m}+\Psi\left(H_{m}^{\top}\bar{R}_{m}^{-1}y_{m}\ominus h\left(\hat{x}_{m},0\right)\right)\right)^{\top}\\
 & \Psi^{-1}\left(\delta x_{m}+\Psi\left(H_{m}^{\top}\bar{R}_{m}^{-1}y_{m}\ominus h\left(\hat{x}_{m},0\right)\right)\right)
\end{align*}

\end_inset

and solve for 
\begin_inset Formula $L_{m}\left(x_{k}\right)=L_{m}-L_{m}\left(x_{k},x_{m}\right)$
\end_inset


\begin_inset Formula 
\begin{align*}
L_{m}\left(x_{k}\right) & =\frac{1}{2}\delta x_{m}^{\top}\bar{Q}^{-1}\delta x_{m}\\
 & +\frac{1}{2}\left(y_{m}\ominus h\left(\hat{x}_{m},0\right)+H_{m}\delta x_{m}\right)^{\top}\\
 & \bar{R}_{m}^{-1}\left(y_{m}\ominus h\left(\hat{x}_{m},0\right)+H_{m}\delta x_{m}\right)\\
 & -\frac{1}{2}\left(\delta x_{m}+\Psi\left(H_{m}^{\top}\bar{R}_{m}^{-1}y_{m}\ominus h\left(\hat{x}_{m},0\right)\right)\right)^{\top}\\
 & \Psi^{-1}\left(\delta x_{m}+\Psi\left(H_{m}^{\top}\bar{R}_{m}^{-1}y_{m}\ominus h\left(\hat{x}_{m},0\right)\right)\right).
\end{align*}

\end_inset

With algebraic manipulation, using the Inversion Lemma in 
\begin_inset CommandInset citation
LatexCommand cite
key "Thrun2006"
literal "false"

\end_inset

 and substituting in 
\begin_inset Formula $f^{-1}\left(x_{k},0,\delta_{k:m}\right)$
\end_inset

 for 
\begin_inset Formula $\hat{x}_{m}$
\end_inset

 we get
\begin_inset Formula 
\begin{align*}
L_{m}\left(x_{k}\right) & =\frac{1}{2}y_{m}\ominus h\left(f^{-1}\left(x_{k},0,\delta_{k:m}\right),0\right)^{\top}\\
 & S_{k:m}^{-1}y_{m}\ominus h\left(f^{-1}\left(x_{k},0,\delta_{k:m}\right),0\right),
\end{align*}

\end_inset

where 
\begin_inset Formula 
\[
S_{k:m}=\bar{R}_{m}+H_{m}\bar{Q}_{k:m}H_{m}^{\top}.
\]

\end_inset

Therefore
\begin_inset Formula 
\[
p\left(y_{m}\mid x_{k}\right)\approx\eta\exp\left(-\frac{1}{2}\hat{e}^{\top}S_{k:m}^{-1}\hat{e}\right)
\]

\end_inset

where 
\begin_inset Formula 
\[
\hat{e}=y_{m}\ominus h\left(f^{-1}\left(x_{k},0,\delta_{k:m}\right),0\right).
\]

\end_inset


\end_layout

\begin_layout Section
Derivation of Jacobians
\end_layout

\begin_layout Standard
This section presents the derivation of some of the Jacobians used in R-RANSAC.
 We use similar notation and procedure as in 
\begin_inset CommandInset citation
LatexCommand cite
key "Sola2018"
literal "false"

\end_inset

.
\end_layout

\begin_layout Lemma
\begin_inset CommandInset label
LatexCommand label
name "lem:transition_func_jacobians"

\end_inset

 Let 
\begin_inset Formula $x\in G\times E$
\end_inset

 be 
\begin_inset Formula $2n$
\end_inset

 dimensional state, 
\begin_inset Formula $\Delta\in\mathbb{R}$
\end_inset

 denote a time interval and let 
\begin_inset Formula $f:\left(G\times E\right)\times\left(E\times E\right)\times\mathbb{R}\to G\times E$
\end_inset

 be defined as 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{subequations}
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "eq:general_system"

\end_inset


\begin_inset Formula 
\[
f\left(x,w,\Delta\right)=\left(g\text{Exp}\left(U\right),u+\Delta w^{u}\right)
\]

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{subequations}
\end_layout

\end_inset

 with 
\begin_inset Formula $U=\Delta\left(u+w^{g}+\frac{\Delta}{2}w^{u}\right)$
\end_inset

 and 
\begin_inset Formula $w=\left(w^{g},w^{u}\right)\in E\times E$
\end_inset

.
 Let 
\begin_inset Formula $F_{\Delta}$
\end_inset

 and 
\begin_inset Formula $G_{\Delta}$
\end_inset

 denote the Jacobians 
\begin_inset Formula 
\[
F\triangleq\frac{\partial f\left(x_{m_{1}}\right)}{\partial x_{m_{1}}}
\]

\end_inset


\begin_inset Formula 
\[
G\triangleq\frac{\partial f\left(x_{m_{1}}\right)}{\partial w_{m_{1}}},
\]

\end_inset

then in matrix notation they can be written as 
\begin_inset Formula 
\begin{align*}
F & =\begin{bmatrix}\mathbf{Ad}_{\text{Exp}\left(-U\right)} & J_{r}\left(U\right)\\
0_{n\times n} & I_{n\times n}
\end{bmatrix}\\
G & =\begin{bmatrix}\Delta J_{r}\left(U\right) & \frac{\Delta^{2}}{2}J_{r}\left(U\right)\\
0_{n\times n} & \Delta I_{n\times n}
\end{bmatrix}.
\end{align*}

\end_inset


\end_layout

\begin_layout Proof
We begin by deriving the Jacobian 
\begin_inset Formula $F$
\end_inset

.
 Letting 
\begin_inset Formula $\delta x=\left(\delta g,\delta u\right)$
\end_inset

, then by definition 
\begin_inset Formula 
\begin{align*}
F & =\lim_{\delta x\to0}\frac{f\left(x\oplus\delta x\right)\ominus f\left(x\right)}{\delta x}\\
 & =\lim_{\delta x\to0}\frac{\text{Log}}{\delta x}\left(g\text{Exp}\left(\delta g\right)\text{Exp}\left(U+\Delta\delta u\right),\right.\\
 & \left.u+\Delta w^{u}+\delta u\right)\ominus\left(g\text{Exp}\left(U\right),u+\Delta w^{u}\right)\\
 & =\lim_{\delta x\to0}\frac{\text{Log}\left(\text{Exp}\left(-U\right)\text{Exp}\left(\delta g\right)\text{Exp\left(U+\Delta\delta u\right)},\delta u\right)}{\delta x}\\
 & =\lim_{\delta x\to0}\frac{\text{Log}}{\delta x}\left(\text{Exp}\left(\mathbf{Ad}_{\text{Exp}\left(-U\right)}\delta g\right)\text{Exp}\left(-U\right)\right.\\
 & \left.\text{Exp\left(U+\Delta\delta u\right)},\delta u\right).
\end{align*}

\end_inset

The term can be simplified using the Baker Campbel Hausdorff (BCH) formula
 and removing all second order terms and higher terms of 
\begin_inset Formula $\delta x$
\end_inset

 since they will go to zero.
 According to the BCH formula, the term 
\begin_inset Formula 
\[
\text{Exp}\left(-U\right)\text{Exp\left(U+\Delta\delta u\right)}
\]

\end_inset

can be written as 
\begin_inset Formula 
\[
\text{Exp}\left(-U+U+J_{r}\left(U\right)\Delta\delta u+\mathcal{O}^{2}\left(\delta u\right)\right)
\]

\end_inset

where 
\begin_inset Formula $[,]$
\end_inset

 denotes the Lie bracket and 
\begin_inset Formula $\mathcal{O}^{2}\left(\delta u\right)$
\end_inset

 contains all of the higher order terms of 
\begin_inset Formula $\delta u$
\end_inset

.
 Simplifying the above term gives 
\begin_inset Formula 
\[
\text{Exp}\left(J_{r}\left(U\right)\Delta\delta u+\mathcal{O}^{2}\left(\delta u\right)\right).
\]

\end_inset

Using the BCH formual again, the term
\begin_inset Formula 
\[
\text{Log}\left(\text{Exp}\left(\mathbf{Ad}_{\text{Exp}\left(-U\right)}\delta g\right)\text{Exp}\left(J_{r}\left(U\right)\Delta\delta u+\mathcal{O}^{2}\left(\delta u\right)\right)\right)
\]

\end_inset

can be written as 
\begin_inset Formula 
\begin{align*}
 & \mathbf{Ad}_{\text{Exp}\left(-U\right)}\delta g+J_{r}\left(U\right)\Delta\delta u+\mathcal{O}^{2}\left(\delta u\right)+\mathcal{O}^{2}\left(\delta g\right)\\
 & +\left[\mathbf{Ad}_{\text{Exp}\left(-U\right)}\delta g,J_{r}\left(U\right)\Delta\delta u\right].
\end{align*}

\end_inset

The higher order terms 
\begin_inset Formula $\mathcal{O}^{2}\left(\delta u\right)$
\end_inset

 and 
\begin_inset Formula $\mathcal{O}^{2}\left(\delta g\right)$
\end_inset

 will go to zero when taking the limit, and the cross terms 
\begin_inset Formula $\left[\mathbf{Ad}_{\text{Exp}\left(-U\right)}\delta g,J_{r}\left(U\right)\Delta\delta u\right]$
\end_inset

 will be zero since 
\begin_inset Formula $\delta g$
\end_inset

 and 
\begin_inset Formula $\delta u$
\end_inset

 cannot be both non zero when calculating the derivative.
 Therefore
\begin_inset Formula 
\begin{align*}
F & =\lim_{\delta x\to0}\frac{\left(\mathbf{Ad}_{\text{Exp}\left(-U\right)}\delta g+\Delta J_{r}\left(U\right)\delta u,\delta u\right)}{\delta x}.
\end{align*}

\end_inset

Using matrix notation, we finally get 
\begin_inset Formula 
\begin{align*}
F & =\lim_{\delta x\to0}\begin{bmatrix}\mathbf{Ad}_{\text{Exp}\left(-U\right)} & J_{r}\left(U\right)\\
0_{n\times n} & I_{n\times n}
\end{bmatrix}\frac{\delta x}{\delta x}\\
 & =\begin{bmatrix}\mathbf{Ad}_{\text{Exp}\left(-U\right)} & J_{r}\left(U\right)\\
0_{n\times n} & I_{n\times n}
\end{bmatrix}.
\end{align*}

\end_inset

Next we derive the Jacobian 
\begin_inset Formula $G$
\end_inset

.
 Letting 
\begin_inset Formula $\delta w=\left(\delta w^{g},\delta w^{u}\right)$
\end_inset

, then by definition
\begin_inset Formula 
\begin{align*}
G & =\lim_{\delta w\to0}\frac{1}{\delta w}\left(g\text{Exp}\left(U+\Delta\delta w^{g}+\frac{\Delta^{2}}{2}\delta w^{u}\right)\right.\\
 & \left.u+\Delta w^{u}+\Delta\delta w^{u}\right)\ominus\left(g\text{Exp}\left(U\right),u+\Delta w^{u}\right)\\
 & =\lim_{\delta w\to0}\frac{\text{Log}}{\delta w}\left(\text{Exp}\left(-U\right)\text{Exp}\left(U+\Delta\delta w^{g}+\frac{\Delta^{2}}{2}\delta w^{u}\right),\right.\\
 & \left.\Delta\delta w^{u}\right).
\end{align*}

\end_inset

Once again, the term can be simplified using the BCH formula by removing
 all second order and higher terms of 
\begin_inset Formula $\delta w$
\end_inset

 since they will go to zero.
 This step yields
\begin_inset Formula 
\[
G=\lim_{\delta w\to0}\frac{\left(\Delta J_{r}\left(U\right)\delta w^{g}+\frac{\Delta^{2}}{2}\Delta J_{r}\left(U\right)\delta w^{u},\Delta\delta w^{u}\right)}{\delta w}.
\]

\end_inset

Using matrix notation, we finally get 
\begin_inset Formula 
\begin{align*}
G & =\lim_{\delta w\to0}\begin{bmatrix}\Delta J_{r}\left(U\right) & \frac{\Delta^{2}}{2}J_{r}\left(U\right)\\
0_{n\times n} & \Delta I_{n\times n}
\end{bmatrix}\frac{\delta w}{\delta w}\\
 & =\begin{bmatrix}\Delta J_{r}\left(U\right) & \frac{\Delta^{2}}{2}J_{r}\left(U\right)\\
0_{n\times n} & \Delta I_{n\times n}
\end{bmatrix}.
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset bibtex
LatexCommand bibtex
btprint "btPrintCited"
bibfiles "/home/mark/Documents/Mendeley/library"
options "plain"

\end_inset


\end_layout

\end_body
\end_document
