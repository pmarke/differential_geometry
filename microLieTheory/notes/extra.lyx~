#LyX 2.1 created this file. For more info see http://www.lyx.org/
\lyxformat 474
\begin_document
\begin_header
\textclass IEEEtran
\use_default_options true
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding auto
\fontencoding global
\font_roman default
\font_sans default
\font_typewriter default
\font_math auto
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize default
\spacing single
\use_hyperref false
\papersize default
\use_geometry true
\use_package amsmath 2
\use_package amssymb 2
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 1
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 1in
\topmargin 1in
\rightmargin 1in
\bottommargin 1in
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Subsection
Left and Right Jacobians of 
\begin_inset Formula $SO\left(3\right)$
\end_inset


\end_layout

\begin_layout Standard
The BCH approximations 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:BCH_approx_A"

\end_inset


\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:BCH_approx_B"

\end_inset

 can be easily simplified using the identity 
\begin_inset Formula 
\begin{equation}
\left[A,B\right]=\left[Ab\right]_{\times}
\end{equation}

\end_inset

where 
\begin_inset Formula $b\in\mathbb{R}^{3}$
\end_inset

 is the isomorphism of the skew symmetric matrix 
\begin_inset Formula $B$
\end_inset

 and 
\begin_inset Formula $\left[\cdot\right]_{\times}$
\end_inset

 takes a vector in 
\begin_inset Formula $\mathbb{R}^{3}$
\end_inset

 and maps it to a skew symmetric matrix.
 Expanding the first few terms of 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:BCH_approx_A"

\end_inset

 yields
\begin_inset Formula 
\begin{align}
\ln\left(\exp\left(A\right)\exp\left(B\right)\right) & \approx B+A-\frac{1}{2}\left(BA-AB\right)+\frac{1}{12}\left(B\left(BA-AB\right)-\left(BA-AB\right)B\right)+\cdots\\
Z & \approx B+A-\frac{1}{2}\left[Ba\right]_{\times}+\frac{1}{12}\left[BBa\right]_{\times}+\cdots
\end{align}

\end_inset

The vector isomorphism of 
\begin_inset Formula $Z$
\end_inset

 is simply 
\begin_inset Formula 
\begin{align*}
z & \approx b+a-\frac{1}{2}Ba+\frac{1}{12}B^{2}a+\cdots\\
 & \approx b+\sum_{k=0}^{\infty}\frac{\mathcal{B}_{k}}{\left(k\right)!}\left(B\right)^{k}a\\
 & \approx b+J_{\ell}\left(B\right)^{-1}a
\end{align*}

\end_inset

where 
\begin_inset Formula $J_{\ell}\left(B\right)^{-1}$
\end_inset

 is the inverse left hand Jacobian defined as 
\begin_inset Formula 
\begin{equation}
J_{\ell}\left(B\right)^{-1}\triangleq\sum_{k=0}^{\infty}\frac{\mathcal{B}_{k}}{\left(k\right)!}\left(B\right)^{k}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
A similar process can be done by expanding the first few terms of 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:BCH_approx_B"

\end_inset

 to get
\begin_inset Formula 
\begin{align}
\ln\left(\exp\left(A\right)\exp\left(B\right)\right) & \approx A+B+\frac{1}{2}\left(AB-BA\right)+\frac{1}{12}\left(A\left(AB-BA\right)-\left(AB-BA\right)A\right)+\cdots\\
Z & \approx A+B+\frac{1}{2}\left[Ab\right]_{\times}+\frac{1}{12}\left[AAb\right]_{\times}+\cdots
\end{align}

\end_inset

The vector isomorphism of 
\begin_inset Formula $Z$
\end_inset

 is simply 
\begin_inset Formula 
\begin{align}
z & \approx b+a+\frac{1}{2}Ab+\frac{1}{12}A^{2}b+\cdots\\
 & \approx b+\sum_{k=0}^{\infty}\frac{\mathcal{B}_{k}}{\left(k\right)!}\left(-A\right)^{k}b\\
 & \approx b+J_{r}\left(A\right)^{-1}b
\end{align}

\end_inset

 where 
\begin_inset Formula $J_{r}\left(A\right)^{-1}$
\end_inset

 is the inverse right hand Jacobian defined as 
\begin_inset Formula 
\begin{equation}
J_{r}\left(A\right)^{-1}=\sum_{k=0}^{\infty}\frac{\mathcal{B}_{k}}{\left(k\right)!}\left(-A\right)^{k}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
This approximation for 
\begin_inset Formula $z$
\end_inset

 holds on the conditions
\begin_inset Formula 
\begin{align*}
z & =\ln\left(\exp\left(A\right)\exp\left(B\right)\right)\\
 & \approx\begin{cases}
J_{\ell}\left(B\right)^{-1}A+B & \text{if }A\:\text{is small}\\
A+J_{r}\left(A\right)^{-1}B & \text{if }B\:\text{is small}
\end{cases}
\end{align*}

\end_inset

which holds since if 
\begin_inset Formula $A$
\end_inset

 is small then 
\begin_inset Formula 
\[
\sum_{k=0}^{\infty}\frac{\mathcal{B}_{k}}{k!}\underbrace{[A,[A,\ldots,[A}_{k},B]]]
\]

\end_inset

should be negligible and if 
\begin_inset Formula $B$
\end_inset

 is small then 
\begin_inset Formula 
\[
\sum_{k=0}^{\infty}\frac{\mathcal{B}_{k}}{k!}\underbrace{[B,[B,\ldots,[B}_{k},A]]]
\]

\end_inset

should be negligible.
 
\end_layout

\begin_layout Standard
For completeness we also present the left and right Jacobians
\begin_inset Formula 
\begin{align}
J_{r}\left(\phi\right) & =\sum_{k=0}^{\infty}\frac{1}{\left(k+1\right)!}\left(-\phi\right)^{k}\\
J_{\ell}\left(\phi\right) & =\sum_{k=0}^{\infty}\frac{1}{\left(k+1\right)!}\left(\phi\right)^{k}
\end{align}

\end_inset

which are related by 
\begin_inset Formula 
\begin{align}
J_{\ell}\left(\phi\right) & =\exp\left(\phi\right)J_{r}\left(\phi\right)\\
J_{\ell}\left(-\phi\right) & =J_{r}\left(\phi\right)
\end{align}

\end_inset


\end_layout

\begin_layout Subsection
The Left and Right Jacobians of 
\begin_inset Formula $SE\left(3\right)$
\end_inset


\end_layout

\begin_layout Standard
Before calculating the left and right Jacobians of 
\begin_inset Formula $SE\left(3\right)$
\end_inset

 we need to talk about the adjoint of 
\begin_inset Formula $SE\left(3\right)$
\end_inset

 and 
\begin_inset Formula $\mathfrak{se}\left(3\right)$
\end_inset

.
 Consider two elements 
\begin_inset Formula $\tau_{1},\tau_{2}\in\mathbb{R}^{6}$
\end_inset

 and the element 
\begin_inset Formula $\chi\in SE\left(3\right)$
\end_inset

 that follow the equality
\begin_inset Formula 
\[
\tau_{1}\boxplus\chi=\chi\boxplus\tau_{2}
\]

\end_inset


\end_layout

\begin_layout Standard
The adjoint at 
\begin_inset Formula $\chi$
\end_inset

, 
\begin_inset Formula $Ad_{\chi}$
\end_inset

, maps 
\begin_inset Formula $\tau_{2}^{\wedge}$
\end_inset

 to 
\begin_inset Formula $\tau_{1}^{\wedge}$
\end_inset

, 
\begin_inset Formula $Ad_{\chi}:\tau_{2}^{\wedge}\to\tau_{1}^{\wedge}$
\end_inset

 as is found as such,
\begin_inset CommandInset citation
LatexCommand cite
key "Sola2018"

\end_inset

,
\begin_inset Formula 
\begin{align}
\tau_{1}\boxplus\chi & =\chi\boxplus\tau_{2}\\
\exp\left(\tau_{1}^{\wedge}\right)\chi & =\chi\exp\left(\tau_{2}^{\wedge}\right)\\
\exp\left(\tau_{1}^{\wedge}\right) & =\chi\exp\left(\tau_{2}^{\wedge}\right)\chi^{-1}\\
\exp\left(\tau_{1}^{\wedge}\right) & =\exp\left(\chi\tau_{2}^{\land}\chi^{-1}\right)\\
\tau_{1}^{\wedge} & =\chi\tau_{2}^{\vee}\chi^{-1}\label{eq:BCH_SE3_Ad}
\end{align}

\end_inset

The adjoint 
\begin_inset Formula $Ad_{\chi}$
\end_inset

 also has a matrix representation that maps 
\begin_inset Formula $\tau_{2}$
\end_inset

 to 
\begin_inset Formula $\tau_{1}$
\end_inset

, 
\begin_inset Formula $\mathbf{Ad}_{\chi}:\tau_{2}\to\tau_{1}$
\end_inset

 and is found using 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:BCH_SE3_Ad"

\end_inset

,
\begin_inset Formula 
\begin{align}
\tau_{1}^{\wedge} & =\chi\tau_{2}^{\vee}\chi^{-1}\\
\tau_{1} & =\left(\chi\tau_{2}^{\wedge}\chi^{-1}\right)^{\vee}\\
 & =\begin{bmatrix}R & \left[t\right]_{\times}R\\
0 & R
\end{bmatrix}\tau_{2}
\end{align}

\end_inset


\end_layout

\begin_layout Standard
The matrix adjoint is a lie group 
\begin_inset CommandInset citation
LatexCommand cite
key "Barfoot2019"

\end_inset

 with a corresponding lie algebra
\begin_inset Formula 
\begin{align*}
\ln\left(\mathbf{Ad}_{\chi}\right) & =\begin{bmatrix}\left[\theta\right]_{\times} & \left[\rho\right]_{\times}\\
0 & \left[\theta\right]_{\times}
\end{bmatrix}\\
 & =\tau_{1}^{\curlywedge}
\end{align*}

\end_inset

with the relation
\begin_inset Formula 
\begin{align*}
\tau^{\wedge}\in\mathfrak{se}\left(3\right) & \quad\underset{\to}{\exp}\quad\chi\in SE\left(3\right)\\
\downarrow ad & \quad\quad\quad\quad\downarrow Ad\\
\tau^{\curlywedge}\in ad\left(\mathfrak{se}\left(3\right)\right) & \quad\underset{\to}{\exp}\quad\mathrm{\chi}^{\curlywedge}\in Ad\left(SE\left(3\right)\right)
\end{align*}

\end_inset

this relation implies that 
\begin_inset Formula $\mathfrak{se}\left(3\right)$
\end_inset

 is a homomorphism to 
\begin_inset Formula $ad\left(\mathfrak{se}\left(3\right)\right)$
\end_inset

 and that 
\begin_inset Formula $SE\left(3\right)$
\end_inset

 is a homomorphism to 
\begin_inset Formula $Ad\left(SE\left(3\right)\right)$
\end_inset

.
 We lastly note the property 
\begin_inset Formula 
\begin{equation}
\left[\tau_{1}^{\curlywedge},\tau_{2}^{\curlywedge}\right]=\tau_{1}^{\curlywedge}\tau_{2}^{\curlywedge}-\tau_{2}^{\curlywedge}\tau_{1}^{\curlywedge}=\left(\tau_{1}^{\curlywedge}\tau_{2}\right)^{\curlywedge}\in ad\left(\mathfrak{se}\left(3\right)\right)\label{eq:BCH_SE3_adjoint_property}
\end{equation}

\end_inset

This property will help us in computing the Jacobians of 
\begin_inset Formula $SE\left(3\right)$
\end_inset

.
 
\end_layout

\begin_layout Standard
The BCH approximations 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:BCH_approx_A"

\end_inset


\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:BCH_approx_B"

\end_inset

 can be easily simplified for 
\begin_inset Formula $SE\left(3\right)$
\end_inset

 using 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:BCH_SE3_adjoint_property"

\end_inset

.
 To show this we begin by expanding 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:BCH_approx_A"

\end_inset


\begin_inset Formula 
\begin{align}
\ln\left(\exp\left(\tau_{1}\right)\exp\left(\tau_{2}\right)\right)^{\vee} & =\ln\left(\exp\left(\tau_{1}^{\curlywedge}\right)\exp\left(\tau_{2}^{\curlywedge}\right)\right)^{\curlyvee}\\
\ln\left(\exp\left(\tau_{1}^{\curlywedge}\right)\exp\left(\tau_{2}^{\curlywedge}\right)\right)^{\curlyvee} & \approx\left(\tau_{2}^{\curlywedge}+\sum_{k=0}^{\infty}\frac{\mathcal{B}_{k}}{k!}\underbrace{[\tau_{2}^{\curlywedge},[\tau_{2}^{\curlywedge},\ldots,[\tau_{2}^{\curlywedge}}_{k},\tau_{1}^{\curlywedge}]]]\right)^{\curlyvee}\\
 & \approx\tau_{2}+\left(\tau_{1}^{\curlywedge}-\frac{1}{2}\left[\tau_{2}^{\curlywedge},\tau_{1}^{\curlywedge}\right]+\frac{1}{12}\left[\tau_{2}^{\curlywedge},\left[\tau_{2}^{\curlywedge},\tau_{1}^{\curlywedge}\right]\right]+\cdots\right)^{\curlyvee}\\
 & \approx\tau_{2}+\tau_{1}-\frac{1}{2}\tau_{2}^{\curlywedge}\tau_{1}+\frac{1}{12}\left(\tau_{2}^{\curlywedge}\right)^{2}\tau_{1}+\cdots\\
 & \approx\tau_{2}+\sum_{k=0}^{\infty}\frac{\mathcal{B}_{k}}{\left(k\right)!}\left(\tau_{2}^{\curlywedge}\right)^{k}\tau_{1}\\
 & \approx\tau_{2}+J_{\ell}\left(\tau_{2}^{\curlywedge}\right)^{-1}\tau_{1}
\end{align}

\end_inset

where 
\begin_inset Formula $J_{\ell}\left(\tau^{\curlywedge}\right)^{-1}$
\end_inset

 is the inverse left Jacobian defined as 
\begin_inset Formula 
\begin{equation}
J_{\ell}\left(\tau^{\curlywedge}\right)^{-1}=\sum_{k=0}^{\infty}\frac{\mathcal{B}_{k}}{\left(k\right)!}\left(\tau^{\curlywedge}\right)^{k}
\end{equation}

\end_inset


\end_layout

\begin_layout Standard
We can find the right Jacobian by expanding 
\begin_inset CommandInset ref
LatexCommand eqref
reference "eq:BCH_approx_B"

\end_inset


\begin_inset Formula 
\begin{align}
\ln\left(\exp\left(\tau_{1}\right)\exp\left(\tau_{2}\right)\right)^{\vee} & =\ln\left(\exp\left(\tau_{1}^{\curlywedge}\right)\exp\left(\tau_{2}^{\curlywedge}\right)\right)^{\curlyvee}\\
\ln\left(\exp\left(\tau_{1}^{\curlywedge}\right)\exp\left(\tau_{2}^{\curlywedge}\right)\right)^{\curlyvee} & \approx\left(\tau_{1}^{\curlywedge}+\sum_{k=0}^{\infty}\left(-1\right)^{k}\frac{\mathcal{B}_{k}}{k!}\underbrace{[\tau_{1}^{\curlywedge},[\tau_{1}^{\curlywedge},\ldots,[\tau_{1}^{\curlywedge}}_{k},\tau_{2}^{\curlywedge}]]]\right)^{\curlyvee}\\
 & \approx\tau_{1}+\left(\tau_{2}^{\curlywedge}+\frac{1}{2}\left[\tau_{1}^{\curlywedge},\tau_{2}^{\curlywedge}\right]+\frac{1}{12}\left[\tau_{1}^{\curlywedge},\left[\tau_{1}^{\curlywedge},\tau_{2}^{\curlywedge}\right]\right]+\cdots\right)^{\curlyvee}\\
 & \approx\tau_{1}+\tau_{2}+\frac{1}{2}\tau_{1}^{\curlywedge}\tau_{2}+\frac{1}{12}\left(\tau_{1}^{\curlywedge}\right)^{2}\tau_{2}\\
 & \approx\tau_{1}+\sum_{k=0}^{\infty}\frac{\mathcal{B}_{k}}{\left(k\right)!}\left(-\tau_{1}^{\curlywedge}\right)^{k}\tau_{2}\\
 & \approx\tau_{1}+J_{r}\left(\tau_{1}^{\curlywedge}\right)^{-1}\tau_{2}
\end{align}

\end_inset


\end_layout

\begin_layout Standard
where 
\begin_inset Formula $J_{r}\left(\tau^{\curlywedge}\right)^{-1}$
\end_inset

 is the inverse right Jacobian defined as 
\begin_inset Formula 
\begin{equation}
J_{r}\left(\tau^{\curlywedge}\right)^{-1}=\sum_{k=0}^{\infty}\frac{\mathcal{B}_{k}}{\left(k\right)!}\left(-\tau^{\curlywedge}\right)^{k}
\end{equation}

\end_inset

These approximations hold under certain conditions
\begin_inset Formula 
\begin{align*}
\tau_{3} & =\ln\left(\exp\left(\tau_{1}\right)\exp\left(\tau_{2}\right)\right)^{\vee}\\
 & \approx\begin{cases}
J_{\ell}\left(\tau_{2}^{\curlywedge}\right)^{-1}\tau_{1}^{\curlywedge}+\tau_{2}^{\curlywedge} & \text{if }\tau_{1}^{\curlywedge}\:\text{is small}\\
\tau_{1}^{\curlywedge}+J_{r}\left(\tau_{1}^{\curlywedge}\right)^{-1}\tau_{2}^{\curlywedge} & \text{if }\tau_{2}^{\curlywedge}\:\text{is small}
\end{cases}
\end{align*}

\end_inset


\end_layout

\begin_layout Standard
We can inverse the inverted Jacobians to get the right and left Jacobians.
 These values are
\begin_inset Formula 
\begin{align*}
J_{r}\left(\tau\right) & =\sum_{k=0}^{\infty}\frac{1}{\left(k+1\right)!}\left(-\tau^{\curlywedge}\right)^{k}=\begin{bmatrix}J_{r}\left(\theta\right) & Q_{r}\\
0 & J_{r}\left(\theta\right)
\end{bmatrix}\\
J_{\ell}\left(\tau\right) & =\sum_{k=0}^{\infty}\frac{1}{\left(k+1\right)!}\left(\tau^{\curlywedge}\right)^{k}=\begin{bmatrix}J_{\ell}\left(\theta\right) & Q_{\ell}\\
0 & J_{\ell}\left(\theta\right)
\end{bmatrix}
\end{align*}

\end_inset

where 
\begin_inset Formula $J_{r}\left(\theta\right)$
\end_inset

 and 
\begin_inset Formula $J_{\ell}\left(\theta\right)$
\end_inset

 are the left and right Jacobians of 
\begin_inset Formula $\theta$
\end_inset

 where 
\begin_inset Formula $\theta$
\end_inset

 is the corresponding rotational component of 
\begin_inset Formula $\tau=\left[\rho,\theta\right]^{\top}$
\end_inset

, 
\begin_inset Formula 
\[
Q_{\ell}\left(\tau\right)=\sum_{n=0}^{\infty}\sum_{m=0}^{\infty}\frac{1}{\left(n+m+2\right)!}\left(\left[\theta\right]_{\times}\right)^{n}\left[\rho\right]_{\times}\left[\theta\right]_{\times}^{m}
\]

\end_inset

which can be simplified to 
\begin_inset Formula 
\begin{multline*}
Q_{\ell}\left(\tau\right)=\frac{1}{2}\left[\rho\right]_{\times}+\left(\frac{\theta-\sin\theta}{\theta^{3}}\right)\left(\left[\theta\right]_{\times}\left[\rho\right]_{\times}+\left[\rho\right]_{\times}\left[\theta\right]_{\times}+\left[\theta\right]_{\times}\left[\rho\right]_{\times}\left[\theta\right]_{\times}\right)\\
+\left(\frac{\theta^{2}+2\cos\theta-2}{2\theta^{4}}\right)\left(\left[\theta\right]_{\times}\left[\theta\right]_{\times}\left[\rho\right]_{\times}+\left[\rho\right]_{\times}\left[\theta\right]_{\times}\left[\theta\right]_{\times}-3\left[\theta\right]_{\times}\left[\rho\right]_{\times}\left[\theta\right]_{\times}\right)\\
+\left(\frac{2\theta-3\sin\theta+\theta\cos\theta}{2\theta^{5}}\right)\left(\left[\theta\right]_{\times}\left[\rho\right]_{\times}\left[\theta\right]_{\times}\left[\theta\right]_{\times}+\left[\theta\right]_{\times}\left[\theta\right]_{\times}\left[\rho\right]_{\times}\left[\theta\right]_{\times}\right)
\end{multline*}

\end_inset

and 
\begin_inset Formula 
\begin{align*}
Q_{\ell}\left(-\tau\right) & =Q_{r}\left(\tau\right),\quad\text{or}\\
\exp\left(\theta\right)Q_{\ell}\left(\tau\right)+\left(J_{\ell}\left(\theta\right)\rho\right)^{\wedge}\exp\left(\theta\right)J_{\ell}\left(\theta\right) & =Q_{r}\left(\tau\right)
\end{align*}

\end_inset

It is also worth noting
\begin_inset Formula 
\begin{align*}
J_{\ell}\left(\tau\right) & =\exp\left(\tau^{\wedge}\right)J_{r}\left(\tau\right),\quad\text{or}\\
J_{\ell}\left(-\tau\right) & =J_{r}\left(\tau\right)
\end{align*}

\end_inset

and
\begin_inset Formula 
\begin{align*}
J_{r}\left(\tau\right)^{-1} & =\begin{bmatrix}J_{r}\left(\theta\right)^{-1} & -J_{r}\left(\theta\right)^{-1}Q_{r}J_{r}\left(\theta\right)^{-1}\\
0 & J_{r}\left(\theta\right)^{-1}
\end{bmatrix}\\
J_{\ell}\left(\tau\right)^{-1} & =\begin{bmatrix}J_{\ell}\left(\theta\right)^{-1} & -J_{\ell}\left(\theta\right)^{-1}Q_{\ell}J_{\ell}\left(\theta\right)^{-1}\\
0 & J_{\ell}\left(\theta\right)^{-1}
\end{bmatrix}
\end{align*}

\end_inset


\end_layout

\end_body
\end_document
